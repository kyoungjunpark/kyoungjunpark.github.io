nhn.Component=$Class({_eventHandlers:null,_options:null,$init:function(){var a=this.constructor._instances;if(typeof a=="undefined"){this.constructor._instances=a=[]}a[a.length]=this;this._eventHandlers={};this._options={}},option:function(f,a){var c=(typeof f);if(c=="undefined"){return this._options}else{if(c=="string"){if(typeof a!="undefined"){this._options[f]=a;return this}else{return this._options[f]}}else{if(c=="object"){try{for(var b in f){this._options[b]=f[b]}}catch(d){}return this}}}},fireEvent:function(a,h){var h=h?(h instanceof $Event?h._event:h):{};
var g=("boundElements" in h&&"cancelBubble" in h)||(typeof Event!="undefined"&&h instanceof Event);if(g){h=$Event(h)}else{h.type=h.type||a;h.canceled=false;h.stop=function(){this.canceled=true}}var e=[h];for(var b=2,c=arguments.length;b<c;b++){e.push(arguments[b])}var d=this["on"+a];if(typeof d=="function"){d.apply(this,e)}var f=this._eventHandlers[a];if(typeof f!="undefined"){for(var b=0,j;j=f[b];b++){j.apply(this,e)}}return !h.canceled},attach:function(a,b){if(arguments.length==1){$H(arguments[0]).forEach($Fn(function(d,e){this.attach(e,d)
},this).bind());return this}var c=this._eventHandlers[a];if(typeof c=="undefined"){c=this._eventHandlers[a]=[]}c.push(b);return this},detach:function(a,b){if(arguments.length==1){$H(arguments[0]).forEach($Fn(function(f,g){this.detach(g,f)},this).bind());return this}var c=this._eventHandlers[a];if(typeof c=="undefined"){return this}for(var d=0,e;e=c[d];d++){if(e===b){c=c.splice(d,1);break}}return this}});nhn.Component.factory=function(f,c){var a=[];if(typeof c=="undefined"){c={}}for(var b=0;b<f.length;
b++){try{obj=new this(f[b],c);a[a.length]=obj}catch(d){}}return a};nhn.HTMLComponent=$Class({tagName:""}).extend(nhn.Component);nhn.HTMLComponent.paint=function(){var a=this._instances;if(typeof a=="undefined"){return}for(var b=0;b<a.length;b++){if(a[b]&&a[b].paint){a[b].paint()}}};nhn.HTMLComponent.factory=function(g,e){if(typeof g=="string"){var c=g;if(/^(\w+)\s*(?:\[(\w+)\s*=\s*(\w+)\])?$/.test(this.prototype.tagName)){var b=[];g=document.getElementsByTagName(RegExp.$1);if(RegExp.$2&&RegExp.$3){for(var d=0;
d<g.length;d++){if(g[d].getAttribute(RegExp.$2)==RegExp.$3){b[b.length]=g[d]}}g=b}if(c){var f=new RegExp("\\b"+c+"\\b","i");for(var d=0,b=[];d<g.length;d++){if(f.test(g[d].className)){b[b.length]=g[d]}}g=b}}else{return[]}}this._tmpFactory=nhn.Component.factory;var g=this._tmpFactory(g,e);delete this._tmpFactory};SPS={__inst:{}};SPS.SpecialCode=1;SPS.ScriptLoadBalance={jpkeyboard:false};(function(){var fc_isIE=(navigator.appVersion.indexOf("MSIE")!=-1)?true:false;var fc_isWin=(navigator.appVersion.toLowerCase().indexOf("win")!=-1)?true:false;var fc_isOpera=(navigator.userAgent.indexOf("Opera")!=-1)?true:false;function checkFlashPlayerVersion(){var _version;var _e;try{var _axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.5");_version=_axo.GetVariable("$version")}catch(_e){_version=-1}return _version}function getFlashCode(_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_){_wmode_=(_wmode_==undefined)?"transparent":_wmode_;
_bgColor_=(_bgColor_==undefined)?"#ffffff":_bgColor_;if(fc_isIE&&fc_isWin&&!fc_isOpera){_object_='<object tabindex="-1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="'+_width_+'" height="'+_height_+'" id="'+_flashID_+'" align="middle">';_object_+='<param name="allowScriptAccess" value="always" />';_object_+='<param name="quality" value="high" />';_object_+='<param name="movie" value="'+_swfURL_+'" />';
_object_+='<param name="wmode" value="'+_wmode_+'" />';_object_+='<param name="bgcolor" value="'+_bgColor_+'" />';_object_+='<param name="FlashVars" value="'+_flashVars_+'">';_object_+="</object>"}else{_object_='<embed tabindex="-1" src="'+_swfURL_+'" quality="high" wmode="'+_wmode_+'" FlashVars="'+_flashVars_+'" bgcolor="'+_bgColor_+'" width="'+_width_+'" height="'+_height_+'" name="'+_flashID_+'" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />'
}return _object_}function showFlash(_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_){document.write(getFlashCode(_swfURL_,_flashID_,_width_,_height_,_wmode_,_flashVars_,_bgColor_))}function findFlashObj(_flashID_){var tarObj=fc_isIE?document.all[_flashID_]:document[_flashID_];return tarObj}function flashExternalCleanup(){__flash_unloadHandler=function(){externalProbSet=true;obj=document.getElementsByTagName("OBJECT");for(i=0;i<obj.length;i++){var theObj=eval(obj[i]);theObj.style.display="none";
for(var prop in theObj){if(typeof(theObj[prop])=="function"){}}}};if(window.onunload!=__flash_unloadHandler){__flash_savedUnloadHandler=window.onunload;window.onunload=__flash_unloadHandler}}window.onbeforeunload=flashExternalCleanup;window.getFlashCode=getFlashCode;window.showFlash=showFlash;window.findFlashObj=findFlashObj})();(function(){SPS.uniqid=function(a){return(a||"")+(new Date().getTime()%31536000000)*100+parseInt(Math.random()*100)};SPS.parseQueryString=function(h){var c=h.split("&");var a={};
for(var b=0,d=c.length;b<d;b++){var g=c[b].split("=",2);try{g[0]=decodeURIComponent(g[0])}catch(f){}try{g[1]=decodeURIComponent(g[1])}catch(f){}a[g[0]]=g[1]}return a};SPS.newWin=function(c,d){var b=[];b.push("chanellmode=1");b.push("directories=1");b.push("fullscreen=0");b.push("location=1");b.push("menubar=1");b.push("scrollbars=1");b.push("status=1");b.push("toolbar=1");b.push("resizable=1");return window.open(c,d||SPS.uniqid(),b.join(","),false)};SPS.getElementsByClassName=function(d){var a=[];
var e=document.getElementsByTagName("dl");d=" "+d+" ";for(var c=0,b;b=e[c];c++){if((" "+b.className+" ").indexOf(d)>-1){a.push(b)}}return a}})();(function(){String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")};String.prototype.cut=function(a){for(var b=0,c=this.length;b<c;b++){a-=(this.charCodeAt(b)>128?2:1);if(a<0){return this.substr(0,b)}}return this}})();(function(){$Event.prototype.getRelatedElement=function(){var a=this._event;return a.relatedTarget||(a.type=="mouseover"?a.fromElement:a.toElement)
};$Event.prototype.of=function(b){var a;var d=true;var c=this._event.type=="mouseover"||this._event.type=="mouseout";if(a=this.element){d&=$Element(b).has(a)}if(a=this.getRelatedElement()){d&=$Element(b).has(a)}else{if(c){d=false}}return d};$Element.prototype.has=function(b){var a=this.$value();var c=$Element(b).$value();for(;c;c=c.parentNode){if(c==a){return true}}return false}})();(function(){SPS.setCookie=function(h,f,g,d,c){var b="";d=d||"/";if(typeof g!="undefined"){var e=new Date();e.setDate(e.getDate()+g);
b+=";expires="+e.toGMTString()}if(typeof d!="undefined"){b+=";path="+d}if(typeof c!="undefined"){b+=";domain="+c}document.cookie=h+"="+escape(f)+b};SPS.getCookie=function(d){var e=document.cookie;if(e.length<1){return}var b=new RegExp("\\b"+d+"=([^;]*)(;|$)");var c=e.match(b);return c&&c[1]&&unescape(c[1])};SPS.setCookie2=function(h,f,g,d,c){var b="";d=d||"/";if(typeof g!="undefined"){var e=new Date();e.setDate(e.getDate()+g);b+=";expires="+e.toGMTString()}if(typeof d!="undefined"){b+=";path="+d}if(typeof c!="undefined"){b+=";domain="+c
}document.cookie=h+"="+encodeURIComponent(f)+b};SPS.setCookie3=function(h,f,g,d,c){var b="";d=d||"/";if(typeof g!="undefined"){var e=new Date();e.setDate(e.getDate()+g);b+=";expires="+e.toGMTString()}if(typeof d!="undefined"){b+=";path="+d}if(typeof c!="undefined"){b+=";domain="+c}document.cookie=h+"="+f+b};SPS.getCookie2=function(d){var e=document.cookie;if(e.length<1){return}var b=new RegExp("\\b"+d+"=([^;]*)(;|$)");var c=e.match(b);return decodeURIComponent(c&&c[1])};SPS.getCookie3=function(d){var e=document.cookie;
if(e.length<1){return}var b=new RegExp("\\b"+d+"=([^;]*)(;|$)");var c=e.match(b);return(c&&c[1])};var a=new Array();SPS.insertAfter=function(d,b){var c=b.parentNode;if(c.lastChild==b){c.appendChild(d)}else{c.insertBefore(d,b.nextSibling)}};SPS.getHuriganaTag=function(){var c=cssquery("div#content>div sup.huri");for(var e=0,b=c.length;e<b;e++){var d=c[e];a.push({target:d,prevSibling:d.previousSibling})}};SPS.removeHurigana=function(){for(var c=0,b=a.length;c<b;c++){var e=a[c].target;var d=e.parentNode;
if(d){d.removeChild(e)}}};SPS.appendHurigana=function(){var e=SPS.insertAfter;for(var c=0,b=a.length;c<b;c++){var d=a[c];e(d.target,d.prevSibling)}};SPS.huriganaTagInitialize=function(b){var c=$("hurigana");if(!c){return}SPS.getHuriganaTag();if(b=="unchecked"){c.checked=false;SPS.huriganaTag()}else{if(b==null||b==""){c.checked=true;SPS.huriganaTag()}else{if(b){c.checked=true;SPS.huriganaTag()}}}};SPS.huriganaTag=function(){var f=$("hurigana");var d=SPS.getResizes()[0];if(!d){return}var b=$Element(d);
var c=$("content");c.className=("searh_result");if(c.className==("huri_on")==true&&f.checked==false){c.className="searh_result"}else{if(f.checked==true){c.className="huri_on"}}if(f.checked==true){SPS.setCookie("njd_hurigana","checked",1)}else{SPS.setCookie("njd_hurigana","unchecked",1)}};SPS.fontSizeControll=function(e){var d=cssquery("div.size_control")[0];var c=d.getElementsByTagName("td");var f=[];f[0]="12px";f[1]="14px";f[2]="16px";for(var b=0;b<c.length;b++){$Element(c[b]).removeClass("on")}SPS.getResizes()[0].style.fontSize=f[e-1];
$Element(c[e-1]).addClass("on")}})();(function(){SPS.CTranslate=$Class({$init:function(){this._options={oButtonTranslate:null,oButtonCopy:null,oBeforeForm:null,oAfterForm:null};this._jsonp=new SPS.Include();this._agent=$Agent();this._split="%rn%";this._fnTanslate=$Fn(this._Translate,this);this._fnResultCopy=$Fn(this._ResultCopy,this);this._bIsTranslating=false;this._domHtmlCharater=$("<div>");this._domHtmlCharater.style.position="absolute";this._domHtmlCharater.style.left="-10000px";this._domHtmlCharater.style.top="-10000px";
try{var oBody=document.body;if(oBody.firstChild){oBody.insertBefore(this._domHtmlCharater,oBody.firstChild)}}catch(e){}},setAfter:function(obj){this._options.oAfter=obj},setButtonTranslate:function(obj){this._options.oButtonTranslate=obj;this._fnTanslate.attach(this._options.oButtonTranslate,"click")},setButtonCopy:function(obj){this._options.oButtonCopy=obj;this._fnResultCopy.attach(this._options.oButtonCopy,"click")},setBeforeForm:function(obj){this._options.oBeforeForm=obj},setAfterForm:function(obj){this._options.oAfterForm=obj
},_isTranslateInitial:function(){return true},_Translate:function(e){if(this._isTranslateInitial()==false){return}if(this._bIsTranslating){return}var ajaxurl="";var text=this._options.oBeforeForm.value;var str=(this._agent.navigator().ie||this._agent.navigator().opera)?this._options.oBeforeForm.value.split("\r\n"):this._options.oBeforeForm.value.split("\n");var str2="";for(var i=0;i<str.length;i++){str2+=str[i]+this._split}if(!str2){alert("내용이 없습니다")}if(str2.length>20000){alert("20000자를 초과할 수 없습니다.\n입력한 문자 수는 "+str2.length+"자입니다.");
return}this._bIsTranslating=true;this._options.oAfterForm.value="번역 중입니다. 잠시만 기다려주세요.";this._options.oAfterForm.disabled=true;this._options.oBeforeForm.disabled=true;if(this._options.oAfter){this._options.oAfter.style.display="block"}var leng=str2.length;for(var i=0;i<leng;i++){var _oneChar=text.charCodeAt(i);if(this._isKorean(_oneChar)){ajaxurl="/k2j";break}else{if(this._isJapanese(_oneChar)){ajaxurl="/j2k";break}else{ajaxurl="/k2j"}}}if(ajaxurl==""){this._TranslateDone(str2)}else{this._ajax2=$Ajax(ajaxurl+"?charset=utf-8&callback=bo&mode=json",{type:"xhr",method:"post",onload:$Fn(function(data){var real_data=data.text().substr(4,data.text().length-6);
this._domHtmlCharater.style.display="block";try{eval("var ret="+real_data);this._domHtmlCharater.innerHTML=ret.text;this._TranslateDone((this._domHtmlCharater.textContent||this._domHtmlCharater.innerText))}catch(e){}this._domHtmlCharater.style.display="none"},this).bind()});this._ajax2.request({text:str2})}},_TranslateDone:function(json_data){var data=json_data;var temp="";var split=data?data.split(this._split):"";var length=split.length;for(var i=0;i<length;i++){if(i==length-1){temp+=split[i]}else{temp+=split[i]+"\n"
}}if(!temp.trim()){temp="번역결과가 없거나 사용자가 많습니다"}this._options.oAfterForm.value=this._ResultFilter(temp);this._bIsTranslating=false;this._options.oBeforeForm.disabled=false;this._options.oAfterForm.disabled=false},_ResultFilter:function(str){str=str.replace(/￥"/gi,'"');str=str.replace(/￥'/gi,"'");str=str.replace(/￥￥/gi,"\\");return str},_TranslateFail:function(){},_ResultCopy:function(){if(this._isTranslateInitial()==false){return}var afterForm=this._options.oAfterForm;var flashcopy="js_flashcopy";if(this._agent.navigator().ie){window.clipboardData.setData("Text",afterForm.value)
}else{if($(flashcopy)==null){var flashcopy_div=$("<div>");flashcopy_div.id=flashcopy;document.body.appendChild(flashcopy_div)}else{flashcopy_div=$(flashcopy)}flashcopy_div.innerHTML="";flashcopy_div.innerHTML="<embed src='"+config_imgUrl+"/js/clipboard.swf' FlashVars='clipboard="+encodeURIComponent(afterForm.value)+"' width='0' height='0' type='application/x-shockwave-flash'></embed>"}},_isJapanese:function(ch){if(ch>12351&&ch<12448){return true}else{if(ch>12447&&ch<12544){return true}else{if(ch>12785&&ch<12800){return true
}else{if(ch>65380&&ch<65438){return true}else{return false}}}}},_isKorean:function(ch){if(ch>4351&&ch<4608){return true}else{if(ch>12591&&ch<12688){return true}else{if(ch>44031&&ch<55216){return true}else{if(ch>65439&&ch<65501){return true}else{return false}}}}},_isHanja:function(ch){if(ch>19967&&ch<40912){return true}else{if(ch>13311&&ch<13568){return true}else{if(ch>131071&&ch<131328){return true}else{return false}}}},_isChinese:function(ch){if(ch>12543&&ch<12592){return true}else{if(ch>12543&&ch<12592){return true
}else{return false}}},_isEnglish:function(ch){return false}})})();SPS.DOMLoad=(function(){var a={_handler:[],done:false,attach:function(d){this._handler.push(d)},_fire:function(){this.done=true;var d=this._handler;setTimeout(function(){for(var e=0,f;f=d[e];e++){f()}},0)}};if(/WebKit/i.test(navigator.userAgent)){var c=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(c);a._fire()}},10)}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){a._fire()
},false)}else{if(document.attachEvent){var b=document.createElement("document:ready");var c=setInterval(function(){try{b.doScroll("left");b=null;clearInterval(c);a._fire()}catch(d){}},10)}}}return a})();SPS.Timer=(function(){var a=function(){this.initialize.apply(this,arguments)};a.prototype={_bInterval:false,_oInstance:null,initialize:function(b){this._bInterval=b.toLowerCase()=="interval"},start:function(c,d,e){this.stop();if(this._bInterval){this._oInstance=window.setInterval(d,c)}else{var b=this;
this._oInstance=window.setTimeout(function(){e?d.call(e):d();b.stop()},c)}},stop:function(){var b=window[this._bInterval?"clearInterval":"clearTimeout"];if(this._oInstance){b(this._oInstance)}this._oInstance=null}};return a})();SPS.Include=(function(){var Include=function(){var self=this;this._uniqID=new Date().getTime()*100+parseInt(Math.random()*100);this._requests={};if(!Include._instance){Include._instance={}}Include._instance[this._uniqID]=this;this._gcTimer=setInterval(function(){self._gc()
},this._gcInterval)};Include.prototype={_uniqID:null,_requests:null,_trID:null,_callback:null,_gcTimer:null,_gcInterval:30000,request:function(sUrl,pCallback){var nTrID=new Date().getTime()*100+parseInt(Math.random()*100);var sMethod="SPS.Include._response("+this._uniqID+", "+nTrID+")";if(sUrl.indexOf("?")==-1){sUrl+="?"}sUrl+="&callback="+encodeURIComponent(sMethod);this._trID=nTrID;this._callback=pCallback;this._createScript(nTrID,sUrl)},abort:function(){this._trID=null},_createScript:function(nTrID,sUrl){var oScript=document.createElement("script");
with(oScript){src=sUrl;id=nTrID;language="javascript";type="text/javascript"}this._requests[nTrID]=oScript;document.body.appendChild(oScript)},_destroyScript:function(nTrID,nExpires,nNow){var oNavigator=$Agent().navigator();if(oNavigator.ie&&oNavigator.version<6){return}var oScript=this._requests[nTrID];if(nExpires){nNow=nNow||new Date().getTime();if(parseInt(oScript.id)/100>nNow-nExpires){return}}oScript.parentNode.removeChild(oScript);delete this._requests[nTrID]},_gc:function(){var nNow=new Date().getTime();
for(var nTrID in this._requests){this._destroyScript(nTrID,this._gcInterval,nNow)}}};Include._response=function(nUniqID,nTrID){var pIgnore=function(){};var oInst=this._instance[nUniqID];if(!oInst){return pIgnore}oInst._destroyScript(nTrID);if(oInst._trID!=nTrID){return pIgnore}var pCallback=oInst._callback;return function(oData){return pCallback(oData)}};return Include})();SPS.Observe=(function(){var a=function(b){this._o=b;this._value=b.value;this._bindEvents()};a.prototype._bindEvents=function(){var b=this;
var c=function(e,f,d){if(e.attachEvent){e.attachEvent("on"+f,d)}else{e.addEventListener(f,d,false)}};c(this._o,"focus",function(){if(b._timer){clearInterval(b._timer)}b._timer=setInterval(function(){if(b._value!=b._o.value){b._value=b._o.value;b._fireEvent()}},50)});c(this._o,"blur",function(){if(b._timer){clearInterval(b._timer)}b._timer=null})};a.prototype._fireEvent=function(){if(document.createEvent){var b;if(window.KeyEvent){b=document.createEvent("KeyEvents");b.initKeyEvent("keyup",true,true,window,false,false,false,false,0,0)
}else{b=document.createEvent("UIEvents");b.initUIEvent("keyup",true,true,window,1);b.keyCode=0}this._o.dispatchEvent(b)}else{var b=document.createEventObject();b.keyCode=0;this._o.fireEvent("onkeyup",b)}};return a})();SPS.DelayedRequest=(function(){var a=SPS.Timer;return $Class({_timer:null,_delay:null,_count:null,_remained:null,$init:function(b,c){this._timer=new a("timeout");this._delay=b;this._count=c;this._remained=this._count},request:function(f,d){var e=[];for(var c=2,b=arguments.length;c<b;
c++){e.push(arguments[c])}if(this._remained--<1){this._remained=this._count;this._timer.stop();return f.apply(d,e)}this._timer.start(this._delay,function(){f.apply(d,e)})},stop:function(){this._timer.stop()}})})();SPS.AutoLayer=(function(){return $Class({_panel:null,_areas:null,_options:null,$init:function(a,b,c){this._panel=a;this._areas=b||[];this._options=c||{};if(typeof(this._options.outfocusCloseClick)=="undefined"){this._options.outfocusCloseClick=true}this._bindEvents()},_bindEvents:function(){if(this._options.outfocusCloseClick==true){$Fn(function(c){var a=c.element;
if(this._panel&&c.of(this._panel)){return}for(var d=0,b;b=this._areas[d];d++){if(b&&c.of(b)){return c.stop()}}if(this._panel){this.hide()}},this).attach(document,"click")}},visible:function(){if(this._options.useVisibility){return($Element(this._panel).css("visibility")!="hidden")}return $Element(this._panel).visible()},toggle:function(){var a=this.visible();this[a?"hide":"show"]()},show:function(){if(this.visible()){return}if(this._options.useVisibility){$Element(this._panel).css("visibility","visible")
}else{$Element(this._panel).show()}if(typeof this._options.onShow=="function"){this._options.onShow()}},hide:function(){if(!this.visible()){return}if(this._options.useVisibility){$Element(this._panel).css("visibility","hidden")}else{$Element(this._panel).hide()}if(typeof this._options.onHide=="function"){this._options.onHide()}}})})();SPS.Range=(function(){var a=function(c){this._o=c;var b=this;c.onmouseup=function(){b._saveSelection()};c.onmousedown=function(){b._saveSelection()};c.onkeyup=function(){if(window.event&&window.event.keyCode==0){return
}b._saveSelection()};c.onkeydown=function(){b._saveSelection()};c.onfocus=function(){if(b._skipProcess){b._skipProcess=false;return}b._saveSelection()}};a.prototype._saveSelection=function(){var g=this._o;var d=[0,0];try{if(isNaN(this._o.selectionStart)){var c=document.selection.createRange().duplicate();var b=g.value.length;d[0]=-c.moveStart("character",-b);d[1]=b-c.moveEnd("character",b)}else{d[0]=g.selectionStart;d[1]=g.selectionEnd}this._selection=d}catch(f){}};a.prototype.getSelection=function(){return this._selection||[0,0]
};a.prototype.setSelection=function(e,b){var d=this._o;if(typeof b=="undefined"){b=e}if(d.setSelectionRange){d.setSelectionRange(e,b)}else{if(d.createTextRange){var c=d.createTextRange();c.collapse(true);c.moveStart("character",e);c.moveEnd("character",b-e);this._skipProcess=true;c.select();d.blur()}}this._selection=[e,b]};a.prototype.copy=function(){var b=this.getSelection();return this._o.value.substring(b[0],b[1])};a.prototype.paste=function(d){var g=this._o;var e=this.getSelection();var c=g.value;
var f=c.substr(0,e[0]);var b=c.substr(e[1]);c=f+d+b;g.value=c;this.setSelection(e[0]+d.length)};a.prototype.cut=function(){var b=this.copy();this.paste("");return b};return a})();SPS.getResizes=function(){if(!arguments.callee._cache){arguments.callee._cache=SPS.getElementsByClassName("resize")}return arguments.callee._cache};SPS.getStaticKeyword=function(){if(!arguments.callee._cache){var a=cssquery("span.static_keyword")[0];if(a){arguments.callee._cache=a.innerText||a.textContent||""}}return arguments.callee._cache
};SPS.DOMLoad.attach(function(){var a=jindo.$$("span.source");$A(a).forEach(function(b){b.style.position="static";b.style.position="relative"})});SPS.DOMLoad=(function(){var a={_handler:[],done:false,attach:function(d){this._handler.push(d)},_fire:function(){this.done=true;var d=this._handler;setTimeout(function(){for(var e=0,f;f=d[e];e++){f()}},0)}};if(/WebKit/i.test(navigator.userAgent)){var c=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(c);a._fire()}},10)
}else{if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){a._fire()},false)}else{if(document.attachEvent){var b=document.createElement("document:ready");var c=setInterval(function(){try{b.doScroll("left");b=null;clearInterval(c);a._fire()}catch(d){}},10)}}}return a})();SPS.TTS=(function(){var TTS=$Class({_sUniq:null,_oFrame:null,_oOptions:null,_oTimer:null,_sOrgUrl:null,$init:function(oOptions){this._sUniq="TTS"+parseInt(Math.random()*10000000);TTS._instances[this._sUniq]=this;
this._oOptions=oOptions||{};var oBody=document.body;if($("ttsIframe")){this._oFrame=$("ttsIframe")}else{this._oFrame=$("<iframe>");this._oFrame.src="/js/new/tts.html";this._oFrame.title="발음듣기";this._oFrame.frameBorder="0";with(this._oFrame.style){position="absolute";if(SPS.debugMode){right="0px";top="0px";width="640px";height="480px";background="#f5f5f5";zIndex="100"}else{width="1px";height="1px";top="-100px";left="-100px";background="#f5f5f5";zIndex="100"}}var nav=jindo.$Agent().navigator();if(nav.safari){this._oFrame1=$("<iframe>");
document.body.appendChild(this._oFrame1);this._oFrame1.title="발음듣기";this._oFrame1.src="js/tts.html?http://www.x?text=&ts="+new Date().getTime();this._oFrame1.style.display="none"}oBody.insertBefore(this._oFrame,oBody.firstChild)}},_execute:function(sMethod){var aArgs=[];for(var i=1,nLen=arguments.length;i<nLen;i++){aArgs.push(arguments[i])}var oWnd=this._oFrame.contentWindow;try{return oWnd[sMethod].apply(oWnd,aArgs)}catch(e){}},_status:null,play:function(sUrl,oOptions){var oOptions=oOptions||{};
var nav=jindo.$Agent().navigator();if(nav.opera||nav.safari){this._oFrame.style.top=(document.documentElement.scrollTop||document.body.scrollTop)+"px";this._oFrame.style.left="0px"}oOptions.loop=oOptions.loop?true:false;if(sUrl){if(sUrl.indexOf("http://")==-1&&sUrl.indexOf("mms://")==-1){sUrl=TTS.textToUrl(sUrl,oOptions)}}this._execute("play",this._sUniq,sUrl,oOptions.loop);this._status="play"},stop:function(){if(this._status=="stop"){return}this._execute("stop",this._sUniq);this._status="stop"}});
TTS.textToUrl=function(sText,oOptions){var oOptions=oOptions||{};var fUcssafeutf8=function(str){var rtn="";var for_i=0;var str_length=str.length;var u;var s;for(i=0;i<str_length;i++){u=str.charCodeAt(i);if((u>=0)&&(u<=127)){s="0"+u.toString(16);rtn+="%"+s.substr(s.length-2)}else{if(u>2097151){rtn+="%"+(oxf0+((u&1835008)>>18)).toString(16);rtn+="%"+(128+((u&258048)>>12)).toString(16);rtn+="%"+(128+((u&4032)>>6)).toString(16);rtn+="%"+(128+(u&63)).toString(16)}else{if(u>2047){rtn+="%"+(224+((u&61440)>>12)).toString(16);
rtn+="%"+(128+((u&4032)>>6)).toString(16);rtn+="%"+(128+(u&63)).toString(16)}else{rtn+="%"+(192+((u&1984)>>6)).toString(16);rtn+="%"+(128+(u&63)).toString(16)}}}}return rtn};oOptions.spkID=oOptions.spkID||302;oOptions.speed=oOptions.speed||100;var sSafeText=fUcssafeutf8(sText.trim());var vcode=SPS.TTS._getVcode(sText.trim());return"/nvoice?speaker=clara&service=dic_home&speed=2&from=dic_home&text="+sSafeText+"&vcode="+vcode};TTS._getVcode=function(text){var vcode="";var xmlhttp=new XMLHttpRequest();
var reqType="http://";if(document.location.host.indexOf("dict.naver.com")>-1){reqType="https://"}var URL=reqType+window.location.host+"/vcode.nhn?text="+encodeURIComponent(text);xmlhttp.open("GET",URL,false);xmlhttp.send(null);var result=xmlhttp.status;if(result==200){vcode=xmlhttp.responseText}xmlhttp=null;return vcode};TTS._ttsEnable=true;if($Agent().navigator().ie){try{new ActiveXObject("WMPlayer.OCX")}catch(e){TTS._ttsEnable=false}}TTS._instances={};TTS._getInstance=function(sKey){return this._instances[sKey]
};return TTS})();(function(){SPS.speech=null;SPS.DOMLoad.attach(function(){SPS.speech={};var a=new nhn.Html5AudioPlayer();SPS.speech.play=function(c,b,d){a.play(SPS.speech.getTTSUrl(c,b,d))};SPS.speech.stop=function(){a.stop()};SPS.speech.getTTSUrl=function(b,d,g){var d=d||{};var c=function(m){var l="";var k=0;var p=m.length;var n;var o;for(i=0;i<p;i++){n=m.charCodeAt(i);if((n>=0)&&(n<=127)){o="0"+n.toString(16);l+="%"+o.substr(o.length-2)}else{if(n>2097151){l+="%"+(oxf0+((n&1835008)>>18)).toString(16);
l+="%"+(128+((n&258048)>>12)).toString(16);l+="%"+(128+((n&4032)>>6)).toString(16);l+="%"+(128+(n&63)).toString(16)}else{if(n>2047){l+="%"+(224+((n&61440)>>12)).toString(16);l+="%"+(128+((n&4032)>>6)).toString(16);l+="%"+(128+(n&63)).toString(16)}else{l+="%"+(192+((n&1984)>>6)).toString(16);l+="%"+(128+(n&63)).toString(16)}}}}return l};d.spkID=d.spkID||302;d.speed=d.speed||70;var h="clara";if(d=="ko"){h="mijin"}var e=c(b.trim());var g=SPS.TTS._getVcode(b.trim());var f="http://";if(document.location.host.indexOf("dict.naver.com")>-1){f="https://"
}var j=f+window.location.host+"/api/nvoice?speaker="+h+"&service=dictionary&speech_fmt=mp3&text="+e+"&vcode="+g;return j}})})();nhn.TtsPlay=$Class({$init:function(b,a){a=a||{};this.$panel=$(b);this.playTime=a.playTime||1500;this._bindEvents()},_bindEvents:function(){$Fn(this._play,this).attach(this.$panel,"click")},_play:function(b){var c=this;if(this.currentIcon){clearTimeout(this.timer);this.setPlaying(false)}var a="";if(/ico_sound$/.test(b.element.src)){var d=$$.getSingle("span.fnt_e09",b.element.parentNode.parentNode)||$$.getSingle("span.fnt_k07",b.element.parentNode.parentNode)||$$.getSingle("span.fnt_e07",b.element.parentNode.parentNode)||$$.getSingle("span.fnt_k10",b.element.parentNode.parentNode)||$$.getSingle("span.tts_play_text",b.element.parentNode);
a=d.innerText||d.textContent||"";SPS.speech.play(a);this.currentIcon=b.element;this.setPlaying(true);b.stop(2)}if(b.element.className=="tts"){var d=$$.getSingle("span.tts_area",b.element.parentNode.parentNode);a=d.innerText||d.textContent||"";SPS.speech.play(a);this.currentIcon=b.element.getElementsByTagName("img")[0];this.setPlaying(true);b.stop(2)}this.timer=setTimeout(function(){c.setPlaying(false);c.currentIcon=null},this.playTime)},setPlaying:function(a){if(!this.currentIcon){return}this.currentIcon.src=a?"https://ssl.pstatic.net/dicimg/endic/img/play2_fresh.gif":"https://ssl.pstatic.net/dicimg/endic/img/play2.gif"
}});if(typeof window!="undefined"&&typeof window.nhn=="undefined"){window.nhn=new Object}if(typeof window!="undefined"){window.jindo={}}else{jindo={}}jindo.$Jindo=function(){var a=arguments.callee;var b=a._cached;if(b){return b}if(!(this instanceof a)){return new a()}if(!b){a._cached=this}this.version="1.3.6"};jindo.$=function(h){var l=new Array;var a=null;var n=/^<([a-z]+|h[1-5])>$/i;var e=/^<([a-z]+|h[1-5])(\s+[^>]+)?>/i;for(var c=0;c<arguments.length;c++){a=arguments[c];if(typeof a=="string"){a=a.replace(/^\s+|\s+$/g,"");
if(n.test(a)){a=document.createElement(RegExp.$1)}else{if(e.test(a)){var m={thead:"table",tbody:"table",tr:"tbody",td:"tr",dt:"dl",dd:"dl",li:"ul",legend:"fieldset"};var q=RegExp.$1.toLowerCase();var f=[];for(var d=0;q=m[q];d++){var g=document.createElement(q);if(d){g.appendChild(f[d-1])}f.push(g)}if(!f[0]){f[0]=document.createElement("div")}var b=f[0];jindo.$Element(b).html(a);for(a=b.firstChild;a;a=a.nextSibling){if(a.nodeType==1){l[l.length]=a}}}else{a=document.getElementById(a)}}}if(a){l[l.length]=a
}}return l.length>1?l:(l[0]||null)};jindo.$Class=function(d){function b(){var g=this;var l=[];var h=function(n,q,m){if(n!="constructor"&&m.toString().indexOf("$super")>-1){var p=m.toString().replace(/function\s*\(([^\)]*)[\w\W]*/g,"$1").split(",");var o=m.toString().replace(/function\s*\(.*\)\s*\{/,"").replace(/this\.\$super/g,"this.$super.$super");o=o.substr(0,o.length-1);m=q[n]=new Function(p,o)}return function(){var s=this.$this[n];var t=this.$this;var r=(t[n]=m).apply(t,arguments);t[n]=s;return r
}};while(typeof g._$superClass!="undefined"){g.$super=new Object;g.$super.$this=this;for(var f in g._$superClass.prototype){if(typeof this[f]=="undefined"&&f!="$init"){this[f]=g._$superClass.prototype[f]}if(f!="constructor"&&f!="_$superClass"&&typeof g._$superClass.prototype[f]=="function"){g.$super[f]=h(f,g._$superClass,g._$superClass.prototype[f])}else{g.$super[f]=g._$superClass.prototype[f]}}if(typeof g.$super.$init=="function"){l[l.length]=g}g=g.$super}for(var e=l.length-1;e>-1;e--){l[e].$super.$init.apply(l[e].$super,arguments)
}if(typeof this.$init=="function"){this.$init.apply(this,arguments)}}if(typeof d.$static!="undefined"){var a=0,c;for(c in d){c=="$static"||a++}for(c in d.$static){b[c]=d.$static[c]}if(!a){return d.$static}delete d.$static}b.prototype=d;b.prototype.constructor=b;b.extend=jindo.$Class.extend;return b};jindo.$Class.extend=function(b){this.prototype._$superClass=b;for(var a in b){if(a=="prototype"){continue}this[a]=b[a]}return this};jindo.$$=jindo.cssquery=(function(){var sVersion="2.3";var debugOption={repeat:1};
var UID=1;var cost=0;var validUID={};var bSupportByClassName=jindo.$("<DIV>").getElementsByClassName?true:false;var safeHTML=false;var getUID4HTML=function(oEl){var nUID=safeHTML?(oEl._cssquery_UID&&oEl._cssquery_UID[0]):oEl._cssquery_UID;if(nUID&&validUID[nUID]==oEl){return nUID}nUID=UID++;oEl._cssquery_UID=safeHTML?[nUID]:nUID;validUID[nUID]=oEl;return nUID};var getUID4XML=function(oEl){var oAttr=oEl.getAttribute("_cssquery_UID");var nUID=safeHTML?(oAttr&&oAttr[0]):oAttr;if(!nUID){nUID=UID++;oEl.setAttribute("_cssquery_UID",safeHTML?[nUID]:nUID)
}return nUID};var getUID=getUID4HTML;var uniqid=function(sPrefix){return(sPrefix||"")+new Date().getTime()+parseInt(Math.random()*100000000)};function getElementsByClass(searchClass,node,tag){var classElements=new Array();if(node==null){node=document}if(tag==null){tag="*"}var els=node.getElementsByTagName(tag);var elsLen=els.length;var pattern=new RegExp("(^|\\s)"+searchClass+"(\\s|$)");for(i=0,j=0;i<elsLen;i++){if(pattern.test(els[i].className)){classElements[j]=els[i];j++}}return classElements}var getChilds_dontShrink=function(oEl,sTagName,sClassName){if(bSupportByClassName&&sClassName){if(oEl.getElementsByClassName){return oEl.getElementsByClassName(sClassName)
}if(oEl.querySelectorAll){return oEl.querySelectorAll(sClassName)}return getElementsByClass(sClassName,oEl,sTagName)}else{if(sTagName=="*"){return oEl.all||oEl.getElementsByTagName(sTagName)}}return oEl.getElementsByTagName(sTagName)};var clearKeys=function(){backupKeys._keys={}};var oDocument_dontShrink=document;var bXMLDocument=false;var backupKeys=function(sQuery){var oKeys=backupKeys._keys;sQuery=sQuery.replace(/'(\\'|[^'])*'/g,function(sAll){var uid=uniqid("QUOT");oKeys[uid]=sAll;return uid});
sQuery=sQuery.replace(/"(\\"|[^"])*"/g,function(sAll){var uid=uniqid("QUOT");oKeys[uid]=sAll;return uid});sQuery=sQuery.replace(/\[(.*?)\]/g,function(sAll,sBody){if(sBody.indexOf("ATTR")==0){return sAll}var uid="["+uniqid("ATTR")+"]";oKeys[uid]=sAll;return uid});var bChanged;do{bChanged=false;sQuery=sQuery.replace(/\(((\\\)|[^)|^(])*)\)/g,function(sAll,sBody){if(sBody.indexOf("BRCE")==0){return sAll}var uid="_"+uniqid("BRCE");oKeys[uid]=sAll;bChanged=true;return uid})}while(bChanged);return sQuery
};var restoreKeys=function(sQuery,bOnlyAttrBrace){var oKeys=backupKeys._keys;var bChanged;var rRegex=bOnlyAttrBrace?/(\[ATTR[0-9]+\])/g:/(QUOT[0-9]+|\[ATTR[0-9]+\])/g;do{bChanged=false;sQuery=sQuery.replace(rRegex,function(sKey){if(oKeys[sKey]){bChanged=true;return oKeys[sKey]}return sKey})}while(bChanged);sQuery=sQuery.replace(/_BRCE[0-9]+/g,function(sKey){return oKeys[sKey]?oKeys[sKey]:sKey});return sQuery};var restoreString=function(sKey){var oKeys=backupKeys._keys;var sOrg=oKeys[sKey];if(!sOrg){return sKey
}return eval(sOrg)};var wrapQuot=function(sStr){return'"'+sStr.replace(/"/g,'\\"')+'"'};var getStyleKey=function(sKey){if(/^@/.test(sKey)){return sKey.substr(1)}return null};var getCSS=function(oEl,sKey){if(oEl.currentStyle){if(sKey=="float"){sKey="styleFloat"}return oEl.currentStyle[sKey]||oEl.style[sKey]}else{if(window.getComputedStyle){return oDocument_dontShrink.defaultView.getComputedStyle(oEl,null).getPropertyValue(sKey.replace(/([A-Z])/g,"-$1").toLowerCase())||oEl.style[sKey]}}if(sKey=="float"&&/MSIE/.test(window.navigator.userAgent)){sKey="styleFloat"
}return oEl.style[sKey]};var oCamels={accesskey:"accessKey",cellspacing:"cellSpacing",cellpadding:"cellPadding","class":"className",colspan:"colSpan","for":"htmlFor",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",valign:"vAlign"};var getDefineCode=function(sKey){var sVal;var sStyleKey;if(bXMLDocument){sVal='oEl.getAttribute("'+sKey+'")'}else{if(sStyleKey=getStyleKey(sKey)){sKey="$$"+sStyleKey;sVal='getCSS(oEl, "'+sStyleKey+'")'}else{switch(sKey){case"checked":sVal='oEl.checked + ""';
break;case"disabled":sVal='oEl.disabled + ""';break;case"enabled":sVal='!oEl.disabled + ""';break;case"readonly":sVal='oEl.readOnly + ""';break;case"selected":sVal='oEl.selected + ""';break;default:if(oCamels[sKey]){sVal="oEl."+oCamels[sKey]}else{sVal='oEl.getAttribute("'+sKey+'")'}}}}return"_"+sKey+" = "+sVal};var getReturnCode=function(oExpr){var sStyleKey=getStyleKey(oExpr.key);var sVar="_"+(sStyleKey?"$$"+sStyleKey:oExpr.key);var sVal=oExpr.val?wrapQuot(oExpr.val):"";switch(oExpr.op){case"~=":return"("+sVar+' && (" " + '+sVar+' + " ").indexOf(" " + '+sVal+' + " ") > -1)';
case"^=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") == 0)";case"$=":return"("+sVar+" && "+sVar+".substr("+sVar+".length - "+oExpr.val.length+") == "+sVal+")";case"*=":return"("+sVar+" && "+sVar+".indexOf("+sVal+") > -1)";case"!=":return"("+sVar+" != "+sVal+")";case"=":return"("+sVar+" == "+sVal+")"}return"("+sVar+")"};var getNodeIndex=function(oEl){var nUID=getUID(oEl);var nIndex=oNodeIndexes[nUID]||0;if(nIndex==0){for(var oSib=(oEl.parentNode||oEl._IE5_parentNode).firstChild;oSib;oSib=oSib.nextSibling){if(oSib.nodeType!=1){continue
}nIndex++;setNodeIndex(oSib,nIndex)}nIndex=oNodeIndexes[nUID]}return nIndex};var oNodeIndexes={};var setNodeIndex=function(oEl,nIndex){var nUID=getUID(oEl);oNodeIndexes[nUID]=nIndex};var unsetNodeIndexes=function(){setTimeout(function(){oNodeIndexes={}},0)};var oPseudoes_dontShrink={contains:function(oEl,sOption){return(oEl.innerText||oEl.textContent||"").indexOf(sOption)>-1},"last-child":function(oEl,sOption){for(oEl=oEl.nextSibling;oEl;oEl=oEl.nextSibling){if(oEl.nodeType==1){return false}}return true
},"first-child":function(oEl,sOption){for(oEl=oEl.previousSibling;oEl;oEl=oEl.previousSibling){if(oEl.nodeType==1){return false}}return true},"only-child":function(oEl,sOption){var nChild=0;for(var oChild=(oEl.parentNode||oEl._IE5_parentNode).firstChild;oChild;oChild=oChild.nextSibling){if(oChild.nodeType==1){nChild++}if(nChild>1){return false}}return nChild?true:false},empty:function(oEl,_){return oEl.firstChild?false:true},"nth-child":function(oEl,nMul,nAdd){var nIndex=getNodeIndex(oEl);return nIndex%nMul==nAdd
},"nth-last-child":function(oEl,nMul,nAdd){var oLast=(oEl.parentNode||oEl._IE5_parentNode).lastChild;for(;oLast;oLast=oLast.previousSibling){if(oLast.nodeType==1){break}}var nTotal=getNodeIndex(oLast);var nIndex=getNodeIndex(oEl);var nLastIndex=nTotal-nIndex+1;return nLastIndex%nMul==nAdd}};var getExpression=function(sBody){var oRet={defines:"",returns:"true"};var sBody=restoreKeys(sBody,true);var aExprs=[];var aDefineCode=[],aReturnCode=[];var sId,sTagName;var sBody=sBody.replace(/:([\w-]+)(\(([^)]*)\))?/g,function(_,sType,_,sOption){switch(sType){case"not":var oInner=getExpression(sOption);
var sFuncDefines=oInner.defines;var sFuncReturns=oInner.returnsID+oInner.returnsTAG+oInner.returns;aReturnCode.push("!(function() { "+sFuncDefines+" return "+sFuncReturns+" })()");break;case"nth-child":case"nth-last-child":sOption=restoreString(sOption);if(sOption=="even"){sOption="2n"}else{if(sOption=="odd"){sOption="2n+1"}}var nMul,nAdd;if(/([0-9]*)n([+-][0-9]+)*/.test(sOption)){nMul=parseInt(RegExp.$1)||1;nAdd=parseInt(RegExp.$2)||0}else{nMul=Infinity;nAdd=parseInt(sOption)}aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+nMul+", "+nAdd+")");
break;case"first-of-type":case"last-of-type":sType=(sType=="first-of-type"?"nth-of-type":"nth-last-of-type");sOption=1;case"nth-of-type":case"nth-last-of-type":sOption=restoreString(sOption);if(sOption=="even"){sOption="2n"}else{if(sOption=="odd"){sOption="2n+1"}}var nMul,nAdd;if(/([0-9]*)n([+-][0-9]+)*/.test(sOption)){nMul=parseInt(RegExp.$1)||1;nAdd=parseInt(RegExp.$2)||0}else{nMul=Infinity;nAdd=parseInt(sOption)}oRet.nth=[nMul,nAdd,sType];break;default:sOption=sOption?restoreString(sOption):"";
aReturnCode.push("oPseudoes_dontShrink["+wrapQuot(sType)+"](oEl, "+wrapQuot(sOption)+")");break}return""});var sBody=sBody.replace(/\[(@?[\w-]+)(([!^~$*]?=)([^\]]*))?\]/g,function(_,sKey,_,sOp,sVal){sKey=restoreString(sKey);sVal=restoreString(sVal);if(sKey=="checked"||sKey=="disabled"||sKey=="enabled"||sKey=="readonly"||sKey=="selected"){if(!sVal){sOp="=";sVal="true"}}aExprs.push({key:sKey,op:sOp,val:sVal});return""});var sClassName=null;var sBody=sBody.replace(/\.([\w-]+)/g,function(_,sClass){aExprs.push({key:"class",op:"~=",val:sClass});
if(!sClassName){sClassName=sClass}return""});var sBody=sBody.replace(/#([\w-]+)/g,function(_,sIdValue){if(bXMLDocument){aExprs.push({key:"id",op:"=",val:sIdValue})}else{sId=sIdValue}return""});sTagName=sBody=="*"?"":sBody;var oVars={};for(var i=0,oExpr;oExpr=aExprs[i];i++){var sKey=oExpr.key;if(!oVars[sKey]){aDefineCode.push(getDefineCode(sKey))}aReturnCode.unshift(getReturnCode(oExpr));oVars[sKey]=true}if(aDefineCode.length){oRet.defines="var "+aDefineCode.join(",")+";"}if(aReturnCode.length){oRet.returns=aReturnCode.join("&&")
}oRet.quotID=sId?wrapQuot(sId):"";oRet.quotTAG=sTagName?wrapQuot(bXMLDocument?sTagName:sTagName.toUpperCase()):"";if(bSupportByClassName){oRet.quotCLASS=sClassName?wrapQuot(sClassName):""}oRet.returnsID=sId?"oEl.id == "+oRet.quotID+" && ":"";oRet.returnsTAG=sTagName&&sTagName!="*"?"oEl.tagName == "+oRet.quotTAG+" && ":"";return oRet};var splitToParts=function(sQuery){var aParts=[];var sRel=" ";var sBody=sQuery.replace(/(.*?)\s*(!?[+>~ ]|!)\s*/g,function(_,sBody,sRelative){if(sBody){aParts.push({rel:sRel,body:sBody})
}sRel=sRelative.replace(/\s+$/g,"")||" ";return""});if(sBody){aParts.push({rel:sRel,body:sBody})}return aParts};var isNth_dontShrink=function(oEl,sTagName,nMul,nAdd,sDirection){var nIndex=0;for(var oSib=oEl;oSib;oSib=oSib[sDirection]){if(oSib.nodeType==1&&(!sTagName||sTagName==oSib.tagName)){nIndex++}}return nIndex%nMul==nAdd};var compileParts=function(aParts){var aPartExprs=[];for(var i=0,oPart;oPart=aParts[i];i++){aPartExprs.push(getExpression(oPart.body))}var sFunc="";var sPushCode="aRet.push(oEl); if (oOptions.single) { bStop = true; }";
for(var i=aParts.length-1,oPart;oPart=aParts[i];i--){var oExpr=aPartExprs[i];var sPush=(debugOption.callback?"cost++;":"")+oExpr.defines;var sReturn="if (bStop) {"+(i==0?"return aRet;":"return;")+"}";if(oExpr.returns=="true"){sPush+=(sFunc?sFunc+"(oEl);":sPushCode)+sReturn}else{sPush+="if ("+oExpr.returns+") {"+(sFunc?sFunc+"(oEl);":sPushCode)+sReturn+"}"}var sCheckTag="oEl.nodeType != 1";if(oExpr.quotTAG){sCheckTag="oEl.tagName != "+oExpr.quotTAG}var sTmpFunc="(function(oBase"+(i==0?", oOptions) { var bStop = false; var aRet = [];":") {");
if(oExpr.nth){sPush="if (isNth_dontShrink(oEl, "+(oExpr.quotTAG?oExpr.quotTAG:"false")+","+oExpr.nth[0]+","+oExpr.nth[1]+',"'+(oExpr.nth[2]=="nth-of-type"?"previousSibling":"nextSibling")+'")) {'+sPush+"}"}switch(oPart.rel){case" ":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oCandi = oEl;for (; oCandi; oCandi = (oCandi.parentNode || oCandi._IE5_parentNode)) {if (oCandi == oBase) break;}if (!oCandi || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="var aCandi = getChilds_dontShrink(oBase, "+(oExpr.quotTAG||'"*"')+", "+(oExpr.quotCLASS||"null")+");for (var i = 0, oEl; oEl = aCandi[i]; i++) {"+(oExpr.quotCLASS?"if ("+sCheckTag+") continue;":"")+sPush+"}"
}break;case">":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");if ((oEl.parentNode || oEl._IE5_parentNode) != oBase || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = oBase.firstChild; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }"+sPush+"}"}break;case"+":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oPrev;for (oPrev = oEl.previousSibling; oPrev; oPrev = oPrev.previousSibling) { if (oPrev.nodeType == 1) break; }if (!oPrev || oPrev != oBase || "+sCheckTag+") return aRet;"+sPush
}else{sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush}break;case"~":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oCandi = oEl;for (; oCandi; oCandi = oCandi.previousSibling) { if (oCandi == oBase) break; }if (!oCandi || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = oBase.nextSibling; oEl; oEl = oEl.nextSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"
}break;case"!":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");for (; oBase; oBase = (oBase.parentNode || oBase._IE5_parentNode)) { if (oBase == oEl) break; }if (!oBase || "+sCheckTag+") return aRet;"+sPush}else{sTmpFunc+="for (var oEl = (oBase.parentNode || oBase._IE5_parentNode); oEl; oEl = (oEl.parentNode || oEl._IE5_parentNode)) {if ("+sCheckTag+") { continue; }"+sPush+"}"}break;case"!>":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel = (oBase.parentNode || oBase._IE5_parentNode);if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush
}else{sTmpFunc+="var oEl = (oBase.parentNode || oBase._IE5_parentNode);if (!oEl || "+sCheckTag+") { return aRet; }"+sPush}break;case"!+":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType == 1) break; }if (!oRel || oEl != oRel || ("+sCheckTag+")) return aRet;"+sPush}else{sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) { if (oEl.nodeType == 1) break; }if (!oEl || "+sCheckTag+") { return aRet; }"+sPush
}break;case"!~":if(oExpr.quotID){sTmpFunc+="var oEl = oDocument_dontShrink.getElementById("+oExpr.quotID+");var oRel;for (oRel = oBase.previousSibling; oRel; oRel = oRel.previousSibling) { if (oRel.nodeType != 1) { continue; }if (oRel == oEl) { break; }}if (!oRel || ("+sCheckTag+")) return aRet;"+sPush}else{sTmpFunc+="for (oEl = oBase.previousSibling; oEl; oEl = oEl.previousSibling) {if ("+sCheckTag+") { continue; }if (!markElement_dontShrink(oEl, "+i+")) { break; }"+sPush+"}"}break}sTmpFunc+=(i==0?"return aRet;":"")+"})";
sFunc=sTmpFunc}eval("var fpCompiled = "+sFunc+";");return fpCompiled};var parseQuery=function(sQuery){var sCacheKey=sQuery;var fpSelf=arguments.callee;var fpFunction=fpSelf._cache[sCacheKey];if(!fpFunction){sQuery=backupKeys(sQuery);var aParts=splitToParts(sQuery);fpFunction=fpSelf._cache[sCacheKey]=compileParts(aParts);fpFunction.depth=aParts.length}return fpFunction};parseQuery._cache={};var parseTestQuery=function(sQuery){var fpSelf=arguments.callee;var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);
var aResult=[];var nLen=aSplitQuery.length;var aFunc=[];for(var i=0;i<nLen;i++){aFunc.push((function(sQuery){var sCacheKey=sQuery;var fpFunction=fpSelf._cache[sCacheKey];if(!fpFunction){sQuery=backupKeys(sQuery);var oExpr=getExpression(sQuery);eval("fpFunction = function(oEl) { "+oExpr.defines+"return ("+oExpr.returnsID+oExpr.returnsTAG+oExpr.returns+"); };")}return fpFunction})(restoreKeys(aSplitQuery[i])))}return aFunc};parseTestQuery._cache={};var distinct=function(aList){var aDistinct=[];var oDummy={};
for(var i=0,oEl;oEl=aList[i];i++){var nUID=getUID(oEl);if(oDummy[nUID]){continue}aDistinct.push(oEl);oDummy[nUID]=true}return aDistinct};var markElement_dontShrink=function(oEl,nDepth){var nUID=getUID(oEl);if(cssquery._marked[nDepth][nUID]){return false}cssquery._marked[nDepth][nUID]=true;return true};var oResultCache=null;var bUseResultCache=false;var cssquery=function(sQuery,oParent,oOptions){if(typeof sQuery=="object"){var oResult={};for(var k in sQuery){oResult[k]=arguments.callee(sQuery[k],oParent,oOptions)
}return oResult}cost=0;var executeTime=new Date().getTime();var aRet;for(var r=0,rp=debugOption.repeat;r<rp;r++){aRet=(function(sQuery,oParent,oOptions){oOptions=oOptions||{};if(!oParent){oParent=document}oDocument_dontShrink=oParent.ownerDocument||oParent.document||oParent;if(/\bMSIE\s([0-9]+(\.[0-9]+)*);/.test(navigator.userAgent)&&parseFloat(RegExp.$1)<6){try{oDocument_dontShrink.location}catch(e){oDocument_dontShrink=document}oDocument_dontShrink.firstChild=oDocument_dontShrink.getElementsByTagName("html")[0];
oDocument_dontShrink.firstChild._IE5_parentNode=oDocument_dontShrink}bXMLDocument=(typeof XMLDocument!="undefined")?(oDocument_dontShrink.constructor===XMLDocument):(!oDocument_dontShrink.location);getUID=bXMLDocument?getUID4XML:getUID4HTML;clearKeys();var aSplitQuery=backupKeys(sQuery).split(/\s*,\s*/);var aResult=[];var nLen=aSplitQuery.length;for(var i=0;i<nLen;i++){aSplitQuery[i]=restoreKeys(aSplitQuery[i])}for(var i=0;i<nLen;i++){var sSingleQuery=aSplitQuery[i];var aSingleQueryResult=null;var sResultCacheKey=sSingleQuery+(oOptions.single?"_single":"");
var aCache=bUseResultCache?oResultCache[sResultCacheKey]:null;if(aCache){for(var j=0,oCache;oCache=aCache[j];j++){if(oCache.parent==oParent){aSingleQueryResult=oCache.result;break}}}if(!aSingleQueryResult){var fpFunction=parseQuery(sSingleQuery);cssquery._marked=[];for(var j=0,nDepth=fpFunction.depth;j<nDepth;j++){cssquery._marked.push({})}aSingleQueryResult=distinct(fpFunction(oParent,oOptions));if(bUseResultCache){if(!(oResultCache[sResultCacheKey] instanceof Array)){oResultCache[sResultCacheKey]=[]
}oResultCache[sResultCacheKey].push({parent:oParent,result:aSingleQueryResult})}}aResult=aResult.concat(aSingleQueryResult)}unsetNodeIndexes();return aResult})(sQuery,oParent,oOptions)}executeTime=new Date().getTime()-executeTime;if(debugOption.callback){debugOption.callback(sQuery,cost,executeTime)}return aRet};cssquery.test=function(oEl,sQuery){clearKeys();var aFunc=parseTestQuery(sQuery);for(var i=0,nLen=aFunc.length;i<nLen;i++){if(aFunc[i](oEl)){return true}}return false};cssquery.useCache=function(bFlag){if(typeof bFlag!="undefined"){bUseResultCache=bFlag;
cssquery.clearCache()}return bUseResultCache};cssquery.clearCache=function(){oResultCache={}};cssquery.getSingle=function(sQuery,oParent){return cssquery(sQuery,oParent,{single:true})[0]||null};cssquery.xpath=function(sXPath,oParent){var sXPath=sXPath.replace(/\/(\w+)(\[([0-9]+)\])?/g,function(_,sTag,_,sTh){sTh=sTh||"1";return">"+sTag+":nth-of-type("+sTh+")"});return cssquery(sXPath,oParent)};cssquery.debug=function(fpCallback,nRepeat){debugOption.callback=fpCallback;debugOption.repeat=nRepeat||1
};cssquery.safeHTML=function(bFlag){var bIE=/MSIE/.test(window.navigator.userAgent);if(arguments.length>0){safeHTML=bFlag&&bIE}return safeHTML||!bIE};cssquery.version=sVersion;return cssquery})();jindo.$Agent=function(){var a=arguments.callee;var b=a._cached;if(b){return b}if(!(this instanceof a)){return new a}if(!b){a._cached=this}};jindo.$Agent.prototype.navigator=function(){var b=new Object;var c=-1;var g=navigator.userAgent;var d=navigator.vendor||"";function h(f,e){return((e||"").indexOf(f)>-1)
}b.getName=function(){var e="";for(x in b){if(typeof b[x]=="boolean"&&b[x]){e=x}}return e};b.opera=(typeof window.opera!="undefined")||h("Opera",g);b.ie=!b.opera&&h("MSIE",g);b.chrome=h("Chrome",g);b.safari=!b.chrome&&h("Apple",d);b.firefox=h("Firefox",g);b.mozilla=h("Gecko",g)&&!b.safari&&!b.chrome&&!b.firefox;b.camino=h("Camino",d);b.netscape=h("Netscape",g);b.omniweb=h("OmniWeb",g);b.icab=h("iCab",d);b.konqueror=h("KDE",d);try{if(b.ie){c=g.match(/(?:MSIE) ([0-9.]+)/)[1]}else{if(b.firefox||b.opera||b.omniweb){c=g.match(/(?:Firefox|Opera|OmniWeb)\/([0-9.]+)/)[1]
}else{if(b.mozilla){c=g.match(/rv:([0-9.]+)/)[1]}else{if(b.safari){c=parseFloat(g.match(/Safari\/([0-9.]+)/)[1]);if(c==100){c=1.1}else{c=[1,1.2,-1,1.3,2,3][Math.floor(c/100)]}}else{if(b.icab){c=g.match(/iCab[ \/]([0-9.]+)/)[1]}else{if(b.chrome){c=g.match(/Chrome[ \/]([0-9.]+)/)[1]}}}}}}b.version=parseFloat(c);if(isNaN(b.version)){b.version=-1}}catch(a){b.version=-1}jindo.$Agent.prototype.navigator=function(){return b};return b};jindo.$Agent.prototype.os=function(){var b=new Object;var c=navigator.userAgent;
var a=navigator.platform;var d=function(f,e){return(e.indexOf(f)>-1)};b.getName=function(){var e="";for(x in b){if(typeof b[x]=="boolean"&&b[x]){e=x}}return e};b.win=d("Win",a);b.mac=d("Mac",a);b.linux=d("Linux",a);b.win2000=b.win&&(d("NT 5.0",a)||d("2000",a));b.winxp=b.win&&(d("NT 5.1",a)||d("Win32",a));b.xpsp2=b.winxp&&(d("SV1",c)||d("MSIE 7",c));b.vista=d("NT 6.0",a);b.win7=d("NT 6.1",a);jindo.$Agent.prototype.os=function(){return b};return b};jindo.$Agent.prototype.flash=function(){var b=new Object;
var a=navigator.plugins;var c=navigator.mimeTypes;var g=null;b.installed=false;b.version=-1;if(typeof a!="undefined"&&a.length){g=a["Shockwave Flash"];if(g){b.installed=true;if(g.description){b.version=parseFloat(g.description.match(/[0-9.]+/)[0])}}if(a["Shockwave Flash 2.0"]){b.installed=true;b.version=2}}else{if(typeof c!="undefined"&&c.length){g=c["application/x-shockwave-flash"];b.installed=(g&&g.enabledPlugin)}else{for(var d=10;d>1;d--){try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+d);
b.installed=true;b.version=d;break}catch(h){}}}}jindo.$Agent.prototype.flash=function(){return b};jindo.$Agent.prototype.info=jindo.$Agent.prototype.flash;return b};jindo.$Agent.prototype.silverlight=function(){var b=new Object;var a=navigator.plugins;var c=null;b.installed=false;b.version=-1;if(typeof a!="undefined"&&a.length){c=a["Silverlight Plug-In"];if(c){b.installed=true;b.version=parseInt(c.description.split(".")[0]);if(c.description=="1.0.30226.2"){b.version=2}}}else{try{c=new ActiveXObject("AgControl.AgControl");
b.installed=true;if(c.isVersionSupported("2.0")){b.version=2}else{if(c.isVersionSupported("1.0")){b.version=1}}}catch(d){}}jindo.$Agent.prototype.silverlight=function(){return b};return b};jindo.$A=function(a){var b=arguments.callee;if(typeof a=="undefined"){a=[]}if(a instanceof b){return a}if(!(this instanceof b)){return new b(a)}this._array=[];for(var c=0;c<a.length;c++){this._array[this._array.length]=a[c]}};jindo.$A.prototype.toString=function(){return this._array.toString()};jindo.$A.prototype.length=function(b,d){if(typeof b=="number"){var c=this._array.length;
this._array.length=b;if(typeof d!="undefined"){for(var a=c;a<b;a++){this._array[a]=d}}return this}else{return this._array.length}};jindo.$A.prototype.has=function(a){return(this.indexOf(a)>-1)};jindo.$A.prototype.indexOf=function(a){if(typeof this._array.indexOf!="undefined"){return this._array.indexOf(a)}for(var b=0;b<this._array.length;b++){if(this._array[b]==a){return b}}return -1};jindo.$A.prototype.$value=function(){return this._array};jindo.$A.prototype.push=function(a){return this._array.push.apply(this._array,jindo.$A(arguments).$value())
};jindo.$A.prototype.pop=function(){return this._array.pop()};jindo.$A.prototype.shift=function(){return this._array.shift()};jindo.$A.prototype.unshift=function(a){this._array.unshift.apply(this._array,jindo.$A(arguments).$value());return this._array.length};jindo.$A.prototype.forEach=function(l,d){var b=this._array;var h=this.constructor.Break;var m=this.constructor.Continue;function g(n,o,f){try{l.call(d,n,o,f)}catch(e){if(!(e instanceof m)){throw e}}}if(typeof this._array.forEach=="function"){try{this._array.forEach(g)
}catch(c){if(!(c instanceof h)){throw c}}return this}for(var a=0;a<b.length;a++){try{g(b[a],a,b)}catch(c){if(c instanceof h){break}throw c}}return this};jindo.$A.prototype.map=function(l,d){var b=this._array;var h=this.constructor.Break;var m=this.constructor.Continue;function g(n,o,f){try{return l.call(d,n,o,f)}catch(e){if(e instanceof m){return n}else{throw e}}}if(typeof this._array.map=="function"){try{this._array=this._array.map(g)}catch(c){if(!(c instanceof h)){throw c}}return this}for(var a=0;
a<this._array.length;a++){try{b[a]=g(b[a],a,b)}catch(c){if(c instanceof h){break}throw c}}return this};jindo.$A.prototype.filter=function(a,c){var b=new Array;this.forEach(function(d,e,f){if(a.call(c,d,e,f)===true){b[b.length]=d}});return jindo.$A(b)};jindo.$A.prototype.every=function(a,c){if(typeof this._array.every!="undefined"){return this._array.every(a,c)}var b=true;this.forEach(function(d,e,f){if(a.call(c,d,e,f)===false){b=false;jindo.$A.Break()}});return b};jindo.$A.prototype.some=function(a,c){if(typeof this._array.some!="undefined"){return this._array.some(a,c)
}var b=false;this.forEach(function(d,e,f){if(a.call(c,d,e,f)===true){b=true;jindo.$A.Break()}});return b};jindo.$A.prototype.refuse=function(c){var b=jindo.$A(arguments);return this.filter(function(a,d){return !b.has(a)})};jindo.$A.prototype.slice=function(c,d){var b=this._array.slice.call(this._array,c,d);return jindo.$A(b)};jindo.$A.prototype.splice=function(b,d){var c=this._array.splice.apply(this._array,arguments);return jindo.$A(c)};jindo.$A.prototype.shuffle=function(){this._array.sort(function(d,c){return Math.random()>Math.random()?1:-1
});return this};jindo.$A.prototype.unique=function(){var d=this._array,g=[],f=d.length;var e,c;for(e=0;e<f;e++){for(c=0;c<g.length;c++){if(d[e]==g[c]){break}}if(c>=g.length){g[c]=d[e]}}this._array=g;return this};jindo.$A.prototype.reverse=function(){this._array.reverse();return this};jindo.$A.prototype.empty=function(){return this.length(0)};jindo.$A.Break=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee}};jindo.$A.Continue=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee
}};jindo.$Ajax=function(g,b){var l=arguments.callee;if(!(this instanceof l)){return new l(g,b)}function d(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{if(ActiveXObject){try{return new ActiveXObject("MSXML2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}return null}}}var a=location.toString();var c="";try{c=a.match(/^https?:\/\/([a-z0-9_\-\.]+)/i)[1]}catch(h){}this._status=0;this._url=g;this._options=new Object;this._headers=new Object;this._options={type:"xhr",method:"post",proxy:"",timeout:0,onload:function(e){},onerror:null,ontimeout:function(e){},jsonp_charset:"utf-8",callbackid:"",sendheader:true};
this.option(b);var f=this._options;f.type=f.type.toLowerCase();f.method=f.method.toLowerCase();if(typeof window.__jindo2_callback=="undefined"){window.__jindo2_callback=new Array()}switch(f.type){case"get":case"post":f.method=f.type;f.type="xhr";case"xhr":this._request=d();break;case"flash":this._request=new jindo.$Ajax.SWFRequest();break;case"jsonp":f.method="get";this._request=new jindo.$Ajax.JSONPRequest();this._request.charset=f.jsonp_charset;this._request.callbackid=f.callbackid;break;case"iframe":this._request=new jindo.$Ajax.FrameRequest();
this._request._proxy=f.proxy;break}};jindo.$Ajax.prototype._onload=function(){try{if(this._request.readyState==4){if(this._request.status!=200&&typeof this._options.onerror=="function"){this._options.onerror(jindo.$Ajax.Response(this._request))}else{this._options.onload(jindo.$Ajax.Response(this._request))}}}finally{this._status--}};jindo.$Ajax.prototype.request=function(g){this._status++;var f=this;var b=this._request;var h=this._options;var n,e,d=[],n="";var l=null;if(typeof g=="undefined"||!g){n=null
}else{for(var m in g){e=g[m];if(typeof e=="function"){e=e()}if(e instanceof Array||e instanceof jindo.$A){$A(e).forEach(function(o,a,p){d[d.length]=m+"="+encodeURIComponent(o)})}else{d[d.length]=m+"="+encodeURIComponent(e)}}n=d.join("&")}b.open(h.method.toUpperCase(),this._url,true);if(h.sendheader){b.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8");b.setRequestHeader("charset","utf-8");for(var c in this._headers){if(typeof this._headers[c]=="function"){continue
}b.setRequestHeader(c,String(this._headers[c]))}}if(typeof b.onload!="undefined"){b.onload=function(a){clearTimeout(l);f._onload(a)}}else{b.onreadystatechange=function(a){clearTimeout(l);f._onload(a)}}if(h.timeout>0){l=setTimeout(function(){try{b.abort()}catch(a){}h.ontimeout(b)},h.timeout*1000)}b.send(n);return this};jindo.$Ajax.prototype.isIdle=function(){return this._status==0};jindo.$Ajax.prototype.abort=function(){try{this._request.abort()}finally{this._status--}return this};jindo.$Ajax.prototype.option=function(d,a){if(typeof d=="undefined"){return""
}if(typeof d=="string"){if(typeof a=="undefined"){return this._options[d]}this._options[d]=a;return this}try{for(var c in d){this._options[c]=d[c]}}catch(b){}return this};jindo.$Ajax.prototype.header=function(d,a){if(typeof d=="undefined"){return""}if(typeof d=="string"){if(typeof a=="undefined"){return this._headers[d]}this._headers[d]=a;return this}try{for(var c in d){this._headers[c]=d[c]}}catch(b){}return this};jindo.$Ajax.Response=function(a){if(this===jindo.$Ajax){return new jindo.$Ajax.Response(a)
}this._response=a};jindo.$Ajax.Response.prototype.xml=function(){return this._response.responseXML};jindo.$Ajax.Response.prototype.text=function(){return this._response.responseText};jindo.$Ajax.Response.prototype.status=function(){return this._response.status};jindo.$Ajax.Response.prototype.readyState=function(){return this._response.readyState};jindo.$Ajax.Response.prototype.json=function(){if(this._response.responseJSON){return this._response.responseJSON}else{if(this._response.responseText){try{return new Function("return "+this._response.responseText)()
}catch(a){return{}}}}return{}};jindo.$Ajax.Response.prototype.header=function(a){if(typeof a=="string"){return this._response.getResponseHeader(a)}return this._response.getAllResponseHeaders()};jindo.$Ajax.RequestBase=jindo.$Class({_headers:{},_respHeaders:{},_respHeaderString:"",callbackid:"",responseXML:null,responseJSON:null,responseText:"",status:404,readyState:0,$init:function(){},onload:function(){},abort:function(){},open:function(){},send:function(){},setRequestHeader:function(a,b){this._headers[a]=b
},getResponseHeader:function(a){return this._respHeaders[a]||""},getAllResponseHeaders:function(){return this._respHeaderString},_getCallbackInfo:function(){var b="";if(this.callbackid!=""){var a=0;do{b="$"+this.callbackid+"_"+a;a++}while(window.__jindo2_callback[b])}else{do{b="$"+Math.floor(Math.random()*10000)}while(window.__jindo2_callback[b])}return{id:b,name:"window.__jindo2_callback."+b}}});jindo.$Ajax.JSONPRequest=jindo.$Class({charset:"utf-8",_script:null,_onerror:null,_callback:function(b){if(this._onerror){clearTimeout(this._onerror);
this._onerror=null}var a=this;this.responseJSON=b;this.onload(this);setTimeout(function(){a.abort()},10)},abort:function(){if(this._script){try{this._script.parentNode.removeChild(this._script)}catch(a){}}},open:function(b,a){this.responseJSON=null;this._url=a},send:function(e){var c=this;var a=this._getCallbackInfo();var b=document.getElementsByTagName("head")[0];this._script=jindo.$("<script>");this._script.type="text/javascript";this._script.charset=this.charset;if(b){b.appendChild(this._script)
}else{if(document.body){document.body.appendChild(this._script)}}window.__jindo2_callback[a.id]=function(f){try{c.readyState=4;c.status=200;c._callback(f)}finally{delete window.__jindo2_callback[a.id]}};var d=jindo.$Agent();if(d.navigator().ie||d.navigator().opera){this._script.onreadystatechange=function(){if(this.readyState=="loaded"){if(!c.responseJSON){c.readyState=4;c.status=500;c._onerror=setTimeout(function(){c._callback(null)},200)}this.onreadystatechange=null}}}else{this._script.onload=function(){if(!c.responseJSON){c.readyState=4;
c.status=500;c._onerror=setTimeout(function(){c._callback(null)},200)}this.onload=null;this.onerror=null};this._script.onerror=function(){if(!c.responseJSON){c.readyState=4;c.status=404;c._onerror=setTimeout(function(){c._callback(null)},200)}this.onerror=null;this.onload=null}}this._script.src=this._url+"?_callback="+a.name+"&"+e}}).extend(jindo.$Ajax.RequestBase);jindo.$Ajax.SWFRequest=jindo.$Class({_callback:function(c,d,b){this.readyState=4;if((typeof c).toLowerCase()=="number"){this.status=c
}else{if(c==true){this.status=200}}if(this.status==200){if(typeof d=="string"){try{this.responseText=decodeURIComponent(d)}catch(a){}}if(typeof b=="object"){this._respHeaders=b}}this.onload(this)},open:function(a,b){var c=/https?:\/\/([a-z0-9_\-\.]+)/i;this._url=b;this._method=a},send:function(g){this.responseXML=false;this.responseText="";var e=this;var d={};var h=this._getCallbackInfo();var b=window.document[jindo.$Ajax.SWFRequest._tmpId];function c(n){switch(typeof n){case"string":return'"'+n.replace(/\"/g,'\\"')+'"';
break;case"number":return n;break;case"object":var o="",m=[];if(n instanceof Array){for(var p=0;p<n.length;p++){m[p]=c(n[p])}o="["+m.join(",")+"]"}else{for(var f in n){m[m.length]=c(f)+":"+c(n[f])}o="{"+m.join(",")+"}"}return o;default:return'""'}}g=(g||"").split("&");for(var l=0;l<g.length;l++){pos=g[l].indexOf("=");key=g[l].substring(0,pos);val=g[l].substring(pos+1);d[key]=decodeURIComponent(val)}window.__jindo2_callback[h.id]=function(m,f){try{e._callback(m,f)}finally{delete window.__jindo2_callback[h.id]
}};var a={url:this._url,type:this._method,data:d,charset:"UTF-8",callback:h.name,header_json:this._headers};b.requestViaFlash(c(a))}}).extend(jindo.$Ajax.RequestBase);jindo.$Ajax.SWFRequest.write=function(a){if(typeof a=="undefined"){a="./ajax.swf"}jindo.$Ajax.SWFRequest._tmpId="tmpSwf"+(new Date).getMilliseconds()+Math.floor(Math.random()*100000);document.write('<div style="position:absolute;top:-1000px;left:-1000px"><object tabindex="-1" id="'+jindo.$Ajax.SWFRequest._tmpId+'" width="1" height="1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"><param name="movie" value="'+a+'"><param name = "allowScriptAccess" value = "always" /><embed name="'+jindo.$Ajax.SWFRequest._tmpId+'" src="'+a+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true"></embed></object></div>')
};jindo.$Ajax.FrameRequest=jindo.$Class({_frame:null,_proxy:"",_domain:"",_callback:function(b,d,a){var c=this;this.readyState=4;this.status=200;this.responseText=d;this._respHeaderString=a;a.replace(/^([\w\-]+)\s*:\s*(.+)$/m,function(e,g,f){c._respHeaders[g]=f});this.onload(this);setTimeout(function(){c.abort()},10)},abort:function(){if(this._frame){try{this._frame.parentNode.removeChild(this._frame)}catch(a){}}},open:function(b,c){var d=/https?:\/\/([a-z0-9_\-\.]+)/i;var a=document.location.toString().match(d);
this._method=b;this._url=c;this._remote=String(c).match(/(https?:\/\/[a-z0-9_\-\.]+)(:[0-9]+)?/i)[0];this._frame=null;this._domain=(a[1]!=document.domain)?document.domain:""},send:function(l){this.responseXML="";this.responseText="";var f=this;var e=/https?:\/\/([a-z0-9_\-\.]+)/i;var h=this._getCallbackInfo();var g=this._remote+"/ajax_remote_callback.html?method="+this._method;var a=new Array;window.__jindo2_callback[h.id]=function(m,n,o){try{f._callback(m,n,o)}finally{delete window.__jindo2_callback[h.id]
}};for(var d in this._headers){a[a.length]="'"+d+"':'"+this._headers[d]+"'"}a="{"+a.join(",")+"}";g+="&id="+h.id;g+="&header="+encodeURIComponent(a);g+="&proxy="+encodeURIComponent(this._proxy);g+="&domain="+this._domain;g+="&url="+encodeURIComponent(this._url.replace(e,""));g+="#"+encodeURIComponent(l);var c=this._frame=jindo.$("<iframe>");c.style.position="absolute";c.style.visibility="hidden";c.style.width="1px";c.style.height="1px";var b=document.body||document.documentElement;if(b.firstChild){b.insertBefore(c,b.firstChild)
}else{b.appendChild(c)}c.src=g}}).extend(jindo.$Ajax.RequestBase);jindo.$H=function(a){var b=arguments.callee;if(typeof a=="undefined"){a=new Object}if(a instanceof b){return a}if(!(this instanceof b)){return new b(a)}this._table={};for(var c in a){if(this._table[c]==a[c]){continue}this._table[c]=a[c]}};jindo.$H.prototype.$value=function(){return this._table};jindo.$H.prototype.$=function(a,b){if(typeof b=="undefined"){return this._table[a]}this._table[a]=b;return this};jindo.$H.prototype.length=function(){var b=0;
for(var a in this._table){if(typeof Object.prototype[a]!="undeifned"&&Object.prototype[a]===this._table[a]){continue}b++}return b};jindo.$H.prototype.forEach=function(b,d){var f=this._table;var g=this.constructor;for(var c in f){if(!f.propertyIsEnumerable(c)){continue}try{b.call(d,f[c],c,f)}catch(a){if(a instanceof g.Break){break}if(a instanceof g.Continue){continue}throw a}}return this};jindo.$H.prototype.filter=function(a,b){var c=jindo.$H();this.forEach(function(d,f,e){if(a.call(b,d,f,e)===true){c.add(f,d)
}});return c};jindo.$H.prototype.map=function(a,b){var c=this._table;this.forEach(function(d,f,e){c[f]=a.call(b,d,f,e)});return this};jindo.$H.prototype.add=function(a,b){this._table[a]=b;return this};jindo.$H.prototype.remove=function(a){if(typeof this._table[a]=="undefined"){return null}var b=this._table[a];delete this._table[a];return b};jindo.$H.prototype.search=function(b){var a=false;this.forEach(function(c,e,d){if(c===b){a=e;jindo.$H.Break()}});return a};jindo.$H.prototype.hasKey=function(b){var a=false;
return(typeof this._table[b]!="undefined")};jindo.$H.prototype.hasValue=function(a){return(this.search(a)!==false)};jindo.$H.prototype.sort=function(){var e=new Object;var b=this.values();var c=false;b.sort();for(var d=0;d<b.length;d++){c=this.search(b[d]);e[c]=b[d];delete this._table[c]}this._table=e;return this};jindo.$H.prototype.ksort=function(){var d=new Object;var b=this.keys();b.sort();for(var c=0;c<b.length;c++){d[b[c]]=this._table[b[c]]}this._table=d;return this};jindo.$H.prototype.keys=function(){var b=new Array;
for(var a in this._table){b.push(a)}return b};jindo.$H.prototype.values=function(){var b=[];for(var a in this._table){b[b.length]=this._table[a]}return b};jindo.$H.prototype.toQueryString=function(){var a=[],b=null,c=0;for(var d in this._table){if(typeof(b=this._table[d])=="object"&&b.constructor==Array){for(i=0;i<b.length;i++){a[a.length]=encodeURIComponent(d)+"[]="+encodeURIComponent(b[i]+"")}}else{a[a.length]=encodeURIComponent(d)+"="+encodeURIComponent(this._table[d]+"")}}return a.join("&")};
jindo.$H.prototype.empty=function(){var b=this.keys();for(var a=0;a<b.length;a++){delete this._table[b[a]]}return this};jindo.$H.Break=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee}};jindo.$H.Continue=function(){if(!(this instanceof arguments.callee)){throw new arguments.callee}};jindo.$Json=function(c){var b=arguments.callee;if(typeof c=="undefined"){c=new Object}if(c instanceof b){return c}if(!(this instanceof b)){return new b(c)}if(typeof c=="string"){try{c=new Function("return "+c)()
}catch(a){c=new Object}}this._object=c};jindo.$Json.fromXML=function(f){var l=new Object;var e=/\s*<(\/?[\w:\-]+)((?:\s+[\w:\-]+\s*=\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'))*)\s*((?:\/>)|(?:><\/\1>|\s*))|\s*<!\[CDATA\[([\w\W]*?)\]\]>\s*|\s*>?([^<]*)/ig;var b=/^[0-9]+(?:\.[0-9]+)?$/;var c={"&amp;":"&","&nbsp;":" ","&quot;":'"',"&lt;":"<","&gt;":">"};var g={tags:["/"],stack:[l]};var d=function(n){return n.replace(/&[a-z]+;/g,function(o){return(typeof c[o]=="string")?c[o]:o})};var m=function(n,o){n.replace(/([\w\:\-]+)\s*=\s*(?:"((?:\\"|[^"])*)"|'((?:\\'|[^'])*)')/g,function(q,p,s,r){o[p]=d((s?s.replace(/\\"/g,'"'):undefined)||(r?r.replace(/\\'/g,"'"):undefined))
})};var h=function(o){for(var n in o){if(Object.prototype[n]){continue}return false}return true};var a=function(r,D,w,p,v,y){var B,s="";var C=g.stack.length-1;if(typeof D=="string"&&D){if(D.substr(0,1)!="/"){var n=(typeof w=="string"&&w);var o=(typeof p=="string"&&p);var z=(!n&&o)?"":{};B=g.stack[C];if(typeof B[D]=="undefined"){B[D]=z;B=g.stack[C+1]=B[D]}else{if(B[D] instanceof Array){var t=B[D].length;B[D][t]=z;B=g.stack[C+1]=B[D][t]}else{B[D]=[B[D],z];B=g.stack[C+1]=B[D][1]}}if(n){m(w,B)}g.tags[C+1]=D;
if(o){g.tags.length--;g.stack.length--}}else{g.tags.length--;g.stack.length--}}else{if(typeof v=="string"&&v){s=v}else{if(typeof y=="string"&&y){s=d(y)}}}if(s.length>0){var A=g.stack[C-1];var u=g.tags[C];if(b.test(s)){s=parseFloat(s)}else{if(s=="true"||s=="false"){s=new Boolean(s)}}if(typeof A=="undefined"){return}if(A[u] instanceof Array){var q=A[u];if(typeof q[q.length-1]=="object"&&!h(q[q.length-1])){q[q.length-1].$cdata=s;q[q.length-1].toString=function(){return s}}else{q[q.length-1]=s}}else{if(typeof A[u]=="object"&&!h(A[u])){A[u].$cdata=s;
A[u].toString=function(){return s}}else{A[u]=s}}}};f=f.replace(/<(\?|\!-)[^>]*>/g,"");f.replace(e,a);return jindo.$Json(l)};jindo.$Json.prototype.get=function(n){var q=this._object;var g=n.split("/");var l=/^([\w:\-]+)\[([0-9]+)\]$/;var m=[[q]],r=m[0];var a=g.length,d,f,h,b,s;for(var c=0;c<a;c++){if(g[c]=="."||g[c]==""){continue}if(g[c]==".."){m.length--}else{h=[];f=-1;d=r.length;if(d==0){return[]}if(l.test(g[c])){f=+RegExp.$2}for(b=0;b<d;b++){s=r[b][g[c]];if(typeof s=="undefined"){continue}if(s instanceof Array){if(f>-1){if(f<s.length){h[h.length]=s[f]
}}else{h=h.concat(s)}}else{if(f==-1){h[h.length]=s}}}m[m.length]=h}r=m[m.length-1]}return r};jindo.$Json.prototype.toString=function(){var a={$:function(b){if(typeof b=="undefined"){return'""'}if(typeof b=="boolean"){return b?"true":"false"}if(typeof b=="string"){return this.s(b)}if(typeof b=="number"){return b}if(b instanceof Array){return this.a(b)}if(b instanceof Object){return this.o(b)}},s:function(b){var d={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t"};var f=function(c){return(typeof d[c]!="undefined")?d[c]:c
};return'"'+b.replace(/[\\"'\n\r\t]/g,f)+'"'},a:function(e){var d="[",g="",f=e.length;for(var b=0;b<f;b++){if(typeof e[b]=="function"){continue}d+=g+this.$(e[b]);if(!g){g=","}}return d+"]"},o:function(e){var d="{",f="";for(var b in e){if(typeof e[b]=="function"){continue}d+=f+this.s(b)+":"+this.$(e[b]);if(!f){f=","}}return d+"}"}};return a.$(this._object)};jindo.$Json.prototype.toXML=function(){var a=function(h,d){var g=function(m,n){return"<"+d+(n||"")+">"+m+"</"+d+">"};switch(typeof h){case"undefined":case"null":return g("");
case"number":return g(h);case"string":if(h.indexOf("<")<0){return g(h.replace(/&/g,"&amp;"))}else{return g("<![CDATA["+h+"]]>")}case"boolean":return g(String(h));case"object":var e="";if(h instanceof Array){var c=h.length;for(var f=0;f<c;f++){e+=a(h[f],d)}}else{var b="";for(var l in h){if(l=="$cdata"||typeof h[l]=="function"){continue}e+=a(h[l],l)}if(d){e=g(e,b)}}return e}};return a(this._object,"")};jindo.$Json.prototype.toObject=function(){return this._object};jindo.$Json.prototype.$value=jindo.$Json.prototype.toObject;
jindo.$Cookie=function(){var a=arguments.callee;var b=a._cached;if(a._cached){return a._cached}if(!(this instanceof a)){return new a}if(typeof a._cached=="undefined"){a._cached=this}};jindo.$Cookie.prototype.keys=function(){var c=document.cookie.split(";");var e=/^\s+|\s+$/g;var b=new Array;for(var d=0;d<c.length;d++){b[b.length]=c[d].substr(0,c[d].indexOf("=")).replace(e,"")}return b};jindo.$Cookie.prototype.get=function(b){var c=document.cookie.split(/\s*;\s*/);var a=new RegExp("^(\\s*"+b+"\\s*=)");
for(var d=0;d<c.length;d++){if(a.test(c[d])){return unescape(c[d].substr(RegExp.$1.length))}}return null};jindo.$Cookie.prototype.set=function(a,b,f,c,d){var e="";if(typeof f=="number"){e=";expires="+(new Date((new Date()).getTime()+f*1000*60*60*24)).toGMTString()}if(typeof c=="undefined"){c=""}if(typeof d=="undefined"){d="/"}document.cookie=a+"="+escape(b)+e+"; path="+d+(c?"; domain="+c:"");return this};jindo.$Cookie.prototype.remove=function(a,b,c){if(this.get(a)!=null){this.set(a,"",-1,b,c)}return this
};jindo.$Element=function(b){var a=arguments.callee;if(b&&b instanceof a){return b}if(!jindo.$(b)){return null}if(!(this instanceof a)){return new a(b)}this._element=jindo.$(b);this.tag=(typeof this._element.tagName!="undefined")?this._element.tagName.toLowerCase():""};jindo.$Element.prototype.$value=function(){return this._element};jindo.$Element.prototype.visible=function(a){if(typeof a!="undefined"){this[a?"show":"hide"]();return this}return(this.css("display")!="none")};jindo.$Element.prototype.show=function(){var d=this._element.style;
var a="block";var g={p:a,div:a,form:a,h1:a,h2:a,h3:a,h4:a,ol:a,ul:a,fieldset:a,td:"table-cell",th:"table-cell",li:"list-item",table:"table",thead:"table-header-group",tbody:"table-row-group",tfoot:"table-footer-group",tr:"table-row",col:"table-column",colgroup:"table-column-group",caption:"table-caption",dl:a,dt:a,dd:a};try{if(typeof g[this.tag]=="string"){d.display=g[this.tag]}else{d.display="inline"}}catch(f){d.display="block"}return this};jindo.$Element.prototype.hide=function(){this._element.style.display="none";
return this};jindo.$Element.prototype.toggle=function(){this[this.visible()?"hide":"show"]();return this};jindo.$Element.prototype.opacity=function(d){var c,f=this._element,a=this.visible();d=parseFloat(d);if(!isNaN(d)){d=Math.max(Math.min(d,1),0);if(typeof f.filters!="undefined"){d=Math.ceil(d*100);if(typeof f.filters!="unknown"&&typeof f.filters.alpha!="undefined"){f.filters.alpha.opacity=d}else{f.style.filter=(f.style.filter+" alpha(opacity="+d+")")}}else{f.style.opacity=d}return d}if(typeof f.filters!="undefined"){c=(typeof f.filters.alpha=="undefined")?(a?100:0):f.filters.alpha.opacity;
c=c/100}else{c=parseFloat(f.style.opacity);if(isNaN(c)){c=a?1:0}}return c};jindo.$Element.prototype.appear=function(h,b){var f=this;var a=this.opacity();if(!this.visible()){a=0}if(a==1){return this}try{clearTimeout(this._fade_timer)}catch(g){}b=b||new Function;var c=(1-a)/((h||0.3)*100);var d=function(){a+=c;f.opacity(a);if(a>=1){b(f)}else{f._fade_timer=setTimeout(d,10)}};this.show();d();return this};jindo.$Element.prototype.disappear=function(h,b){var f=this;var a=this.opacity();if(a==0){return this
}try{clearTimeout(this._fade_timer)}catch(g){}b=b||new Function;var c=a/((h||0.3)*100);var d=function(){a-=c;f.opacity(a);if(a<=0){f.hide();f.opacity(1);b(f)}else{f._fade_timer=setTimeout(d,10)}};d();return this};jindo.$Element.prototype.css=function(m,f){var o=this._element;if(m=="opacity"){return typeof f=="undefined"?this.opacity():this.opacity(f)}if(typeof m=="string"){var c;if(typeof f=="string"||typeof f=="number"){var n=new Object;n[m]=f;m=n}else{if(o.currentStyle){if(m=="cssFloat"){m="styleFloat"
}return o.currentStyle[m]||o.style[m]}else{if(window.getComputedStyle){if(m=="cssFloat"){m="float"}var a=o.ownerDocument||o.document||document;return a.defaultView.getComputedStyle(o,null).getPropertyValue(m.replace(/([A-Z])/g,"-$1").toLowerCase())||o.style[m]}else{if(m=="cssFloat"&&/MSIE/.test(window.navigator.userAgent)){m="styleFloat"}return o.style[m]}}return null}}if(typeof jindo.$H!="undefined"&&m instanceof jindo.$H){m=m.$value()}if(typeof m=="object"){var g,b;for(var l in m){g=m[l];b=(typeof g);
if(b!="string"&&b!="number"){continue}if(l=="opacity"){b=="undefined"?this.opacity():this.opacity(g);continue}if(l=="cssFloat"&&navigator.userAgent.indexOf("MSIE")>-1){l="styleFloat"}try{o.style[l]=g}catch(h){if(l=="cursor"&&g=="pointer"){o.style.cursor="hand"}else{if(("#top#left#right#bottom#").indexOf(l+"#")>0&&(b=="number"||!isNaN(parseInt(g)))){o.style[l]=parseInt(g)+"px"}}}}}return this};jindo.$Element.prototype.attr=function(f,a){var d=this._element;if(typeof f=="string"){if(typeof a!="undefined"){var c=new Object;
c[f]=a;f=c}else{if(f=="class"||f=="className"){return d.className}return d.getAttribute(f)}}if(typeof jindo.$H!="undefined"&&f instanceof jindo.$H){f=f.$value()}if(typeof f=="object"){for(var b in f){if(/^on[a-zA-Z]+$/.test(b)){d[b]=f[b];continue}if(typeof(a)!="undefined"&&a===null){d.removeAttribute(b)}else{d.setAttribute(b,f[b])}}}return this};jindo.$Element.prototype.offset=function(h,g){var n=this._element;var l=null;if(typeof h=="number"&&typeof g=="number"){if(isNaN(parseInt(this.css("top")))){this.css("top",0)
}if(isNaN(parseInt(this.css("left")))){this.css("left",0)}var c=this.offset();var d={top:h-c.top,left:g-c.left};n.style.top=parseInt(this.css("top"))+d.top+"px";n.style.left=parseInt(this.css("left"))+d.left+"px";return this}var m=/Safari/.test(navigator.userAgent);var f=/MSIE/.test(navigator.userAgent);var e=f?navigator.userAgent.match(/(?:MSIE) ([0-9.]+)/)[1]:0;var a=function(r){var q={left:0,top:0};for(var p=r,o=p.offsetParent;p=p.parentNode;){if(p.offsetParent){q.left-=p.scrollLeft;q.top-=p.scrollTop
}if(p==o){q.left+=r.offsetLeft+p.clientLeft;q.top+=r.offsetTop+p.clientTop;if(!p.offsetParent){q.left+=p.offsetLeft;q.top+=p.offsetTop}o=p.offsetParent;r=p}}return q};var b=function(q){var p={left:0,top:0};var v=q.ownerDocument||q.document||document;var s=v.documentElement;var o=v.body;if(q.getBoundingClientRect){if(!l){if(f&&e<8&&window.external){l={left:2,top:2};oBase=null}else{l={left:0,top:0}}}var r=q.getBoundingClientRect();if(q!==s&&q!==o){p.left=r.left-l.left;p.top=r.top-l.top;p.left+=s.scrollLeft||o.scrollLeft;
p.top+=s.scrollTop||o.scrollTop}}else{if(v.getBoxObjectFor){var r=v.getBoxObjectFor(q);var u=v.getBoxObjectFor(s||o);p.left=r.screenX-u.screenX;p.top=r.screenY-u.screenY}else{for(var t=q;t;t=t.offsetParent){p.left+=t.offsetLeft;p.top+=t.offsetTop}for(var t=q.parentNode;t;t=t.parentNode){if(t.tagName=="BODY"){break}if(t.tagName=="TR"){p.top+=2}p.left-=t.scrollLeft;p.top-=t.scrollTop}}}return p};return(m?a:b)(n)};jindo.$Element.prototype.width=function(a){if(typeof a=="number"){var b=this._element;
b.style.width=a+"px";if(b.offsetWidth!=a){b.style.width=(a*2-b.offsetWidth)+"px"}return this}return this._element.offsetWidth};jindo.$Element.prototype.height=function(a){if(typeof a=="number"){var b=this._element;b.style.height=a+"px";if(b.offsetHeight!=a){var a=(a*2-b.offsetHeight);if(a>0){b.style.height=a+"px"}}return this}return this._element.offsetHeight};jindo.$Element.prototype.className=function(b){var a=this._element;if(typeof b=="undefined"){return a.className}a.className=b;return this};
jindo.$Element.prototype.hasClass=function(a){return(" "+this._element.className+" ").indexOf(" "+a+" ")>-1};jindo.$Element.prototype.addClass=function(b){var a=this._element;if(this.hasClass(b)){return this}a.className=(a.className+" "+b).replace(/^\s+/,"");return this};jindo.$Element.prototype.removeClass=function(b){var a=this._element;a.className=(" "+a.className+" ").replace(" "+b+" "," ").replace(/\s+$/,"").replace(/^\s+/,"");return this};jindo.$Element.prototype.toggleClass=function(b,a){a=a||"";
if(this.hasClass(b)){this.removeClass(b);if(a){this.addClass(a)}}else{this.addClass(b);if(a){this.removeClass(a)}}return this};jindo.$Element.prototype.text=function(b){var a=(typeof this._element.innerText!="undefined")?"innerText":"textContent";if(this.tag=="textarea"||this.tag=="input"){a="value"}if(typeof b=="string"){try{this._element[a]=b}catch(c){return this.html(b.replace(/&/g,"&amp;").replace(/</g,"&lt;"))}return this}return this._element[a]};jindo.$Element.prototype.html=function(a){if(typeof a=="string"){var b=this._element;
var c=jindo.$Agent().navigator().ie||(jindo.$Agent().navigator().firefox&&!b.parentNode);if(c){var l="R"+new Date().getTime()+parseInt(Math.random()*100000);var e=b.ownerDocument||b.document||document;var h;var g=b.tagName.toLowerCase();switch(g){case"select":case"table":h=jindo.$("<div>");h.innerHTML="<"+g+' class="'+l+'">'+a+"</"+g+">";break;case"tr":case"thead":case"tbody":h=jindo.$("<div>");h.innerHTML="<table><"+g+' class="'+l+'">'+a+"</"+g+"></table>";break;default:b.innerHTML=a;break}if(h){var d;
for(d=h.firstChild;d;d=d.firstChild){if(d.className==l){break}}if(d){for(var f;f=b.firstChild;){f.removeNode(true)}for(var f=d.firstChild;f;f=d.firstChild){b.appendChild(f)}h.removeNode&&h.removeNode(true)}h=null}}else{b.innerHTML=a}return this}return this._element.innerHTML};jindo.$Element.prototype.evalScripts=function(sHTML){var aJS=[];sHTML=sHTML.replace(new RegExp("<script(\\s[^>]+)*>(.*?)<\/script>","gi"),function(_,_,sPart){aJS.push(sPart);return""});eval(aJS.join("\n"));return this};jindo.$Element.prototype.outerHTML=function(){var a=this._element;
if(typeof a.outerHTML!="undefined"){return a.outerHTML}var b=jindo.$("<div>");var d=a.parentNode;if(!d){return a.innerHTML}d.insertBefore(b,a);b.style.display="none";b.appendChild(a);var c=b.innerHTML;d.insertBefore(a,b);d.removeChild(b);return c};jindo.$Element.prototype.toString=jindo.$Element.prototype.outerHTML;jindo.$Element.prototype.append=function(a){var b=jindo.$Element(a).$value();this._element.appendChild(b);return jindo.$Element(b)};jindo.$Element.prototype.prepend=function(b){var c=this._element;
var a=jindo.$Element(b).$value();if(c.childNodes.length>0){c.insertBefore(a,c.childNodes[0])}else{c.appendChild(a)}return jindo.$Element(a)};jindo.$Element.prototype.replace=function(b){var c=this._element;var a=jindo.$Element(b).$value();c.parentNode.insertBefore(a,c);c.parentNode.removeChild(c);return jindo.$Element(a)};jindo.$Element.prototype.appendTo=function(a){var b=jindo.$Element(a).$value();b.appendChild(this._element);return this};jindo.$Element.prototype.prependTo=function(a){var b=jindo.$Element(a).$value();
if(b.childNodes.length>0){b.insertBefore(this._element,b.childNodes[0])}else{b.appendChild(this._element)}return this};jindo.$Element.prototype.before=function(a){var b=jindo.$Element(a).$value();this._element.parentNode.insertBefore(b,this._element);return jindo.$Element(b)};jindo.$Element.prototype.after=function(a){var b=this.before(a);b.before(this);return b};jindo.$Element.prototype.parent=function(d,b){var g=this._element;var c=[],f=null;if(typeof d=="undefined"){return jindo.$Element(g.parentNode)
}if(typeof b=="undefined"||b==0){b=-1}while(g.parentNode&&b--!=0){f=jindo.$Element(g.parentNode);if(g.parentNode==document.documentElement){break}if(!d||(d&&d(f))){c[c.length]=f}g=g.parentNode}return c};jindo.$Element.prototype.child=function(m,h){var g=this._element;var l=[],b=null,d=null;if(typeof m=="undefined"){return jindo.$A(g.childNodes).filter(function(a){return a.nodeType==1}).map(function(a){return jindo.$Element(a)}).$value()}if(typeof h=="undefined"||h==0){h=-1}(d=function(c,f){var e=null,n=null;
for(var a=0;a<c.childNodes.length;a++){e=c.childNodes[a];if(e.nodeType!=1){continue}n=jindo.$Element(c.childNodes[a]);if(!m||(m&&m(n))){l[l.length]=n}if(f!=0){d(c.childNodes[a],f-1)}}})(g,h-1);return l};jindo.$Element.prototype.prev=function(c){var d=this._element;var g=[];var f=(typeof c=="undefined");if(!d){return f?jindo.$Element(null):g}do{d=d.previousSibling;if(!d||d.nodeType!=1){continue}if(f){return jindo.$Element(d)}if(!c||c(d)){g[g.length]=jindo.$Element(d)}}while(d);return f?jindo.$Element(d):g
};jindo.$Element.prototype.next=function(c){var d=this._element;var g=[];var f=(typeof c=="undefined");if(!d){return f?jindo.$Element(null):g}do{d=d.nextSibling;if(!d||d.nodeType!=1){continue}if(f){return jindo.$Element(d)}if(!c||c(d)){g[g.length]=jindo.$Element(d)}}while(d);return f?jindo.$Element(d):g};jindo.$Element.prototype.first=function(){var a=this._element.firstElementChild||this._element.firstChild;if(!a){return null}while(a&&a.nodeType!=1){a=a.nextSibling}return a?jindo.$Element(a):null
};jindo.$Element.prototype.last=function(){var a=this._element.lastElementChild||this._element.lastChild;if(!a){return null}while(a&&a.nodeType!=1){a=a.previousSibling}return a?jindo.$Element(a):null};jindo.$Element.prototype.isChildOf=function(b){var a=this._element;var c=jindo.$Element(b).$value();while(a&&a.parentNode){a=a.parentNode;if(a==c){return true}}return false};jindo.$Element.prototype.isParentOf=function(a){var b=jindo.$Element(a).$value();while(b&&b.parentNode){b=b.parentNode;if(this._element==b){return true
}}return false};jindo.$Element.prototype.isEqual=function(a){try{return(this._element===jindo.$Element(a).$value())}catch(b){return false}};jindo.$Element.prototype.fireEvent=function(a,d){function b(f,g){f=(f+"").toLowerCase();var e=document.createEventObject();if(g){for(k in g){e[k]=g[k]}e.button=(g.left?1:0)+(g.middle?4:0)+(g.right?2:0);e.relatedTarget=g.relatedElement||null}this._element.fireEvent("on"+f,e);return this}function c(e,h){var f="HTMLEvents";e=(e+"").toLowerCase();if(e=="click"||e.indexOf("mouse")==0){f="MouseEvent";
if(e=="mousewheel"){e="dommousescroll"}}else{if(e.indexOf("key")==0){f="KeyboardEvent"}}var g=document.createEvent(f);if(h){switch(f){case"MouseEvent":h.button=0+(h.middle?1:0)+(h.right?2:0);g.initMouseEvent(e,true,true,null,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,h.ctrl,h.alt,h.shift,h.meta,h.button,h.relatedElement);break;case"KeyboardEvent":if(g.initKeyboardEvent){g.initKeyboardEvent(e,true,true,null,null,null,h.ctrl,h.alt,h.shift,h.meta);g.keyCode=h.keyCode;g.charCode=h.keyCode}else{g.initKeyEvent(e,true,true,null,h.ctrl,h.alt,h.shift,h.meta,h.keyCode,h.keyCode)
}break;default:g.initEvent(e,true,true)}}else{g.initEvent(e,true,true)}this._element.dispatchEvent(g);return this}jindo.$Element.prototype.fireEvent=(typeof this._element.dispatchEvent!="undefined")?c:b;return this.fireEvent(a,d)};jindo.$Element.prototype.empty=function(){this.html("");return this};jindo.$Element.prototype.remove=function(a){jindo.$Element(a).leave();return this};jindo.$Element.prototype.leave=function(){var a=this._element;if(a.parentNode){a.parentNode.removeChild(a)}jindo.$Fn.freeElement(this._element);
return this};jindo.$Element.prototype.wrap=function(b){var a=this._element;b=jindo.$Element(b).$value();if(a.parentNode){a.parentNode.insertBefore(b,a)}b.appendChild(a);return this};jindo.$Element.prototype.ellipsis=function(b){b=b||"...";var d=this.text();var c=d.length;var f=this.height();var e=0;var a=this.text("A").height();if(f<a*1.5){return this.text(d)}f=a;while(f<a*1.5){e+=Math.max(Math.ceil((c-e)/2),1);f=this.text(d.substring(0,e)+b).height()}while(f>a*1.5){e--;f=this.text(d.substring(0,e)+b).height()
}};jindo.$Element.prototype.indexOf=function(b){try{var h=jindo.$Element(b).$value();var a=this._element.childNodes;var f=0;var g=a.length;for(var d=0;d<g;d++){if(a[d].nodeType!=1){continue}if(a[d]===h){return f}f++}}catch(h){}return -1};jindo.$Element.prototype.queryAll=function(a){return jindo.$$(a,this._element)};jindo.$Element.prototype.query=function(a){return jindo.$$.getSingle(a,this._element)};jindo.$Element.prototype.test=function(a){return jindo.$$.test(this._element,a)};jindo.$Element.prototype.xpathAll=function(a){return jindo.$$.xpath(sSelector,this._element)
};jindo.$Fn=function(a,c){var b=arguments.callee;if(a instanceof b){return a}if(!(this instanceof b)){return new b(a,c)}this._events=[];this._tmpElm=null;this._key=null;if(typeof a=="function"){this._func=a;this._this=c}else{if(typeof a=="string"&&typeof c=="string"){this._func=new Function(a,c)}}};jindo.$Fn.prototype.$value=function(){return this._func};jindo.$Fn.prototype.bind=function(){var g=jindo.$A(arguments).$value();var d=this._func;var c=this._this;var e=function(){var a=jindo.$A(arguments).$value();
if(g.length){a=g.concat(a)}return d.apply(c,a)};return e};jindo.$Fn.prototype.bindForEvent=function(){var d=arguments;var g=this._func;var h=this._this;var e=this._tmpElm||null;var c=function(b){var a=jindo.$A(d);if(typeof b=="undefined"){b=window.event}if(typeof b.currentTarget=="undefined"){b.currentTarget=e}a.unshift(jindo.$Event(b));return g.apply(h,a.$value())};return c};jindo.$Fn.prototype.attach=function(d,h){var f=null,a,g=h,e=d,c=navigator.userAgent;if((e instanceof Array)||(jindo.$A&&(e instanceof jindo.$A)&&(e=e.$value()))){for(var b=0;
b<e.length;b++){this.attach(e[b],g)}return this}if(!e||!g){return this}if(typeof e.$value=="function"){e=e.$value()}e=jindo.$(e);g=g.toLowerCase();this._tmpElm=e;f=this.bindForEvent();this._tmpElm=null;if(typeof e.addEventListener!="undefined"){if(g=="domready"){g="DOMContentLoaded"}else{if(g=="mousewheel"&&c.indexOf("WebKit")<0&&!/Opera/.test(c)){g="DOMMouseScroll"}else{if(g=="mouseenter"){g="mouseover";f=jindo.$Fn._fireWhenElementBoundary(e,f)}else{if(g=="mouseleave"){g="mouseout";f=jindo.$Fn._fireWhenElementBoundary(e,f)
}}}}e.addEventListener(g,f,false)}else{if(typeof e.attachEvent!="undefined"){if(g=="domready"){jindo.$Fn._domready(e,f);return this}else{e.attachEvent("on"+g,f)}}}if(!this._key){this._key="$"+jindo.$Fn.gc.count++;jindo.$Fn.gc.pool[this._key]=this}this._events[this._events.length]={element:e,event:h.toLowerCase(),func:f};return this};jindo.$Fn.prototype.detach=function(a,m){var g=null,b,n=a,f=m,h=navigator.userAgent;if((n instanceof Array)||(jindo.$A&&(n instanceof jindo.$A)&&(n=n.$value()))){for(var c=0;
c<n.length;c++){this.detach(n[c],f)}return this}if(!n||!f){return this}if(jindo.$Element&&n instanceof jindo.$Element){n=n.$value()}n=jindo.$(n);f=f.toLowerCase();var d=this._events;for(var c=0;c<d.length;c++){if(d[c].element!==n||d[c].event!==f){continue}g=d[c].func;this._events=jindo.$A(this._events).refuse(d[c]).$value();break}if(typeof n.removeEventListener!="undefined"){if(f=="domready"){f="DOMContentLoaded"}else{if(f=="mousewheel"&&h.indexOf("WebKit")<0){f="DOMMouseScroll"}else{if(f=="mouseenter"){f="mouseover"
}else{if(f=="mouseleave"){f="mouseout"}}}}n.removeEventListener(f,g,false)}else{if(typeof n.detachEvent!="undefined"){if(f=="domready"){jindo.$Fn._domready.list=jindo.$Fn._domready.list.refuse(g);return this}else{n.detachEvent("on"+f,g)}}}return this};jindo.$Fn.prototype.delay=function(a,b){if(typeof b=="undefined"){b=[]}setTimeout(this.bind.apply(this,b),a*1000);return this};jindo.$Fn.prototype.free=function(d){var c=this._events.length;while(c>0){var a=this._events[--c].element;if(d&&a!=d){continue
}this.detach(a,this._events[c].event);delete this._events[c]}if(this._events.length==0){try{delete jindo.$Fn.gc.pool[this._key]}catch(b){}}};jindo.$Fn._domready=function(b,g){if(typeof jindo.$Fn._domready.list=="undefined"){var a=null,d=jindo.$Fn._domready.list=jindo.$A([g]);var c=false,e=function(){if(!c){c=true;var f={type:"domready",target:b,currentTarget:b};while(a=d.shift()){a(f)}}};(function(){try{b.documentElement.doScroll("left")}catch(f){setTimeout(arguments.callee,50);return}})();b.onreadystatechange=function(){if(b.readyState=="complete"){b.onreadystatechange=null;
e()}}}else{jindo.$Fn._domready.list.push(g)}};jindo.$Fn._fireWhenElementBoundary=function(b,a){return function(e){var c=jindo.$Event(e);var d=jindo.$Element(c.relatedElement);if(d&&(d.isEqual(this)||d.isChildOf(this))){return}a.call(this,e)}};jindo.$Fn.gc=function(){var a=jindo.$Fn.gc.pool;for(var b in a){try{a[b].free()}catch(c){}}jindo.$Fn.gc.pool=a={}};jindo.$Fn.freeElement=function(d){var b=jindo.$Fn.gc.pool;for(var c in b){try{b[c].free(d)}catch(a){}}};jindo.$Fn.gc.count=0;jindo.$Fn.gc.pool={};
if(typeof window!="undefined"){jindo.$Fn(jindo.$Fn.gc).attach(window,"unload")}jindo.$Event=function(b){var a=arguments.callee;if(b instanceof a){return b}if(!(this instanceof a)){return new a(b)}if(typeof b=="undefined"){b=window.event}if(b===window.event&&document.createEventObject){b=document.createEventObject(b)}this._event=b;this._globalEvent=window.event;this.type=b.type.toLowerCase();if(this.type=="dommousescroll"){this.type="mousewheel"}else{if(this.type=="DOMContentLoaded"){this.type="domready"
}}this.canceled=false;this.element=b.target||b.srcElement;this.currentElement=b.currentTarget;this.relatedElement=null;if(typeof b.relatedTarget!="undefined"){this.relatedElement=b.relatedTarget}else{if(b.fromElement&&b.toElement){this.relatedElement=b[(this.type=="mouseout")?"toElement":"fromElement"]}}};jindo.$Event.prototype.mouse=function(){var a=this._event;var b=0;var g=(a.which&&a.button==0)||!!(a.button&1);var d=(a.which&&a.button==1)||!!(a.button&4);var f=(a.which&&a.button==2)||!!(a.button&2);
var c={};if(a.wheelDelta){b=a.wheelDelta/120}else{if(a.detail){b=-a.detail/3}}c={delta:b,left:g,middle:d,right:f};this.mouse=function(){return c};return c};jindo.$Event.prototype.key=function(){var a=this._event;var b=a.keyCode||a.charCode;var c={keyCode:b,alt:a.altKey,ctrl:a.ctrlKey,meta:a.metaKey,shift:a.shiftKey,up:(b==38),down:(b==40),left:(b==37),right:(b==39),enter:(b==13),esc:(b==27)};this.key=function(){return c};return c};jindo.$Event.prototype.pos=function(g){var c=this._event;var f=(this.element.ownerDocument||document).body;
var l=(this.element.ownerDocument||document).documentElement;var d=[f.scrollLeft||l.scrollLeft,f.scrollTop||l.scrollTop];var h={clientX:c.clientX,clientY:c.clientY,pageX:"pageX" in c?c.pageX:c.clientX+d[0]-f.clientLeft,pageY:"pageY" in c?c.pageY:c.clientY+d[1]-f.clientTop,layerX:"offsetX" in c?c.offsetX:c.layerX-1,layerY:"offsetY" in c?c.offsetY:c.layerY-1};if(g){var a=jindo.$Element(this.element).offset();h.offsetX=h.pageX-a.left;h.offsetY=h.pageY-a.top}return h};jindo.$Event.prototype.stop=function(c){c=c||jindo.$Event.CANCEL_ALL;
var f=(window.event&&window.event==this._globalEvent)?this._globalEvent:this._event;var a=!!(c&jindo.$Event.CANCEL_BUBBLE);var g=!!(c&jindo.$Event.CANCEL_DEFAULT);this.canceled=true;if(typeof f.preventDefault!="undefined"&&g){f.preventDefault()}if(typeof f.stopPropagation!="undefined"&&a){f.stopPropagation()}if(g){f.returnValue=false}if(a){f.cancelBubble=true}return this};jindo.$Event.prototype.stopDefault=function(){return this.stop(jindo.$Event.CANCEL_DEFAULT)};jindo.$Event.prototype.stopBubble=function(){return this.stop(jindo.$Event.CANCEL_BUBBLE)
};jindo.$Event.CANCEL_BUBBLE=1;jindo.$Event.CANCEL_DEFAULT=2;jindo.$Event.CANCEL_ALL=3;jindo.$ElementList=function(b){var a=arguments.callee;if(b instanceof a){return b}if(!(this instanceof a)){return new a(b)}if(b instanceof Array||(jindo.$A&&b instanceof jindo.$A)){b=jindo.$A(b)}else{if(typeof b=="string"&&cssquery){b=jindo.$A(cssquery(b))}else{b=jindo.$A()}}this._elements=b.map(function(c,d,e){return jindo.$Element(c)})};jindo.$ElementList.prototype.get=function(a){return this._elements.$value()[a]
};jindo.$ElementList.prototype.getFirst=function(){return this.get(0)};jindo.$ElementList.prototype.getLast=function(){return this.get(Math.Max(this._elements.length-1,0))};(function(b){var a="show,hide,toggle,addClass,removeClass,toggleClass,fireEvent,leave,";a+="empty,appear,disappear,className,width,height,text,html,css,attr";jindo.$A(a.split(",")).forEach(function(c){b[c]=function(){var d=jindo.$A(arguments).$value();this._elements.forEach(function(e){e[c].apply(e,d)});return this}});jindo.$A(["appear","disappear"]).forEach(function(c){b[c]=function(g,e){var f=this._elements.length;
var d=this;this._elements.forEach(function(l,h){if(h==f-1){l[c](g,function(){e(d)})}else{l[c](g)}});return this}})})(jindo.$ElementList.prototype);jindo.$S=function(b){var a=arguments.callee;if(typeof b=="undefined"){b=""}if(b instanceof a){return b}if(!(this instanceof a)){return new a(b)}this._str=b+""};jindo.$S.prototype.$value=function(){return this._str};jindo.$S.prototype.toString=jindo.$S.prototype.$value;jindo.$S.prototype.trim=function(){return jindo.$S(this._str.replace(/^\s+|\s+$/g,""))
};jindo.$S.prototype.escapeHTML=function(){var b={'"':"quot","&":"amp","<":"lt",">":"gt"};var a=this._str.replace(/[<>&"]/g,function(c){return b[c]?"&"+b[c]+";":c});return jindo.$S(a)};jindo.$S.prototype.stripTags=function(){return jindo.$S(this._str.replace(/<\/?(?:h[1-5]|[a-z]+(?:\:[a-z]+)?)[^>]*>/ig,""))};jindo.$S.prototype.times=function(a){var b=[];for(var c=0;c<a;c++){b[b.length]=this._str}return jindo.$S(b.join(""))};jindo.$S.prototype.unescapeHTML=function(){var b={quot:'"',amp:"&",lt:"<",gt:">"};
var a=this._str.replace(/&([a-z]+);/g,function(d,c){return b[c]?b[c]:d});return jindo.$S(a)};jindo.$S.prototype.escape=function(){var a=this._str.replace(/([\u0080-\uFFFF]+)|[\n\r\t"'\\]/g,function(d,c,b){if(c){return escape(c).replace(/%/g,"\\")}return(b={"\n":"\\n","\r":"\\r","\t":"\\t"})[d]?b[d]:"\\"+d});return jindo.$S(a)};jindo.$S.prototype.bytes=function(f){var d=0,b=0,c=0,a=this._str.length;var g=((document.charset||document.characterSet||document.defaultCharset)+"").toLowerCase();var e=(typeof f=="number");
if(g=="utf-8"){for(c=0;c<a;c++){d=this._str.charCodeAt(c);if(d<128){b+=1}else{if(d<2048){b+=2}else{if(d<65536){b+=3}else{b+=4}}}if(e&&b>f){this._str=this._str.substr(0,c);break}}}else{for(c=0;c<a;c++){b+=(this._str.charCodeAt(c)>128)?2:1;if(e&&b>f){this._str=this._str.substr(0,c);break}}}return e?this:b};jindo.$S.prototype.parseString=function(){var a=this._str.split(/&/g),b,e,f,c={};for(var d=0;d<a.length;d++){e=a[d].substring(0,b=a[d].indexOf("="));f=decodeURIComponent(a[d].substring(b+1));if(e.substr(e.length-2,2)=="[]"){e=e.substring(0,e.length-2);
if(typeof c[e]=="undefined"){c[e]=[]}c[e][c[e].length]=f}else{c[e]=f}}return c};jindo.$S.prototype.escapeRegex=function(){var a=this._str;var b=/([\?\.\*\+\-\/\(\)\{\}\[\]\:\!\^\$\\\|])/g;return jindo.$S(a.replace(b,"\\$1"))};jindo.$S.prototype.format=function(){var c=arguments;var b=0;var a=this._str.replace(/%([ 0])?(-)?([1-9][0-9]*)?([bcdsoxX])/g,function(g,f,d,n,l){var m=c[b++];var e="",h="";n=n?+n:0;if(l=="s"){e=m+""}else{if(" bcdoxX".indexOf(l)>0){if(typeof m!="number"){return""}e=(l=="c")?String.fromCharCode(m):m.toString(({b:2,d:10,o:8,x:16,X:16})[l]);
if(" X".indexOf(l)>0){e=e.toUpperCase()}}}if(e.length<n){h=jindo.$S(f||" ").times(n-e.length).toString()}(d=="-")?(e+=h):(e=h+e);return e});return jindo.$S(a)};jindo.$Document=function(b){var a=arguments.callee;if(b instanceof a){return b}if(!(this instanceof a)){return new a(b)}this._doc=b||document;this._docKey=this.renderingMode()=="Standards"?"documentElement":"body"};jindo.$Document.prototype.$value=function(){return this._doc};jindo.$Document.prototype.scrollSize=function(){var b=jindo.$Agent().navigator();
var a=this._doc[(b.chrome||b.safari)?"body":this._docKey];return{width:Math.max(a.scrollWidth,a.clientWidth),height:Math.max(a.scrollHeight,a.clientHeight)}};jindo.$Document.prototype.scrollPosition=function(){var b=jindo.$Agent().navigator();var a=this._doc[(b.chrome||b.safari)?"body":this._docKey];return{left:a.scrollLeft||window.pageXOffset||window.scrollX||0,top:a.scrollTop||window.pageYOffset||window.scrollY||0}};jindo.$Document.prototype.clientSize=function(){var b=jindo.$Agent().navigator();
var a=this._doc[this._docKey];return(b.safari)?{width:window.innerWidth,height:window.innerHeight}:{width:a.clientWidth,height:a.clientHeight}};jindo.$Document.prototype.renderingMode=function(){var a=jindo.$Agent().navigator();var b;if("compatMode" in this._doc){b=this._doc.compatMode=="CSS1Compat"?"Standards":(a.ie?"Quirks":"Almost")}else{b=a.safari?"Standards":"Quirks"}return b};jindo.$Document.prototype.queryAll=function(a){return jindo.$$(a,this._doc)};jindo.$Document.prototype.query=function(a){return jindo.$$.getSingle(a,this._doc)
};jindo.$Document.prototype.xpathAll=function(a){return jindo.$$.xpath(sSelector,this._doc)};jindo.$Form=function(b){var a=arguments.callee;if(b instanceof a){return b}if(!(this instanceof a)){return new a(b)}b=jindo.$(b);if(!b.tagName||b.tagName.toUpperCase()!="FORM"){throw new Error("The element should be a FORM element")}this._form=b};jindo.$Form.prototype.$value=function(){return this._form};jindo.$Form.prototype.serialize=function(){var b=this;var e={};var d=arguments.length;var a=function(g){var f=b.value(g);
if(typeof f!="undefined"){e[g]=f}};if(d==0){jindo.$A(this.element()).forEach(function(f){if(f.name){a(f.name)}})}else{for(var c=0;c<d;c++){a(arguments[c])}}return jindo.$H(e).toQueryString()};jindo.$Form.prototype.element=function(a){if(arguments.length>0){return this._form[a]}return this._form.elements};jindo.$Form.prototype.enable=function(){var a=arguments[0];if(typeof a=="object"){var b=this;jindo.$H(a).forEach(function(f,g){b.enable(g,f)});return this}var d=this.element(a);if(!d){return this
}d=d.nodeType==1?[d]:d;if(arguments.length<2){var e=true;jindo.$A(d).forEach(function(f){if(f.disabled){e=false;jindo.$A.Break()}});return e}else{var c=arguments[1];jindo.$A(d).forEach(function(f){f.disabled=!c});return this}};jindo.$Form.prototype.value=function(a){if(typeof a=="object"){var c=this;jindo.$H(a).forEach(function(f,g){c.value(g,f)});return this}var e=this.element(a);if(!e){throw new Error("The element is not exist")}e=e.nodeType==1?[e]:e;if(arguments.length>1){var b=arguments[1];jindo.$A(e).forEach(function(g){switch(g.type){case"radio":case"checkbox":g.checked=(g.value==b);
break;case"select-one":var l=-1;for(var f=0,h=g.options.length;f<h;f++){if(g.options[f].value==b){l=f}}g.selectedIndex=l;break;default:g.value=b;break}});return this}var d=[];jindo.$A(e).forEach(function(f){switch(f.type){case"radio":case"checkbox":if(f.checked){d.push(f.value)}break;case"select-one":if(f.selectedIndex!=-1){d.push(f.options[f.selectedIndex].value)}break;default:d.push(f.value);break}});return d.length>1?d:d[0]};jindo.$Form.prototype.submit=function(c,b){var a=null;if(typeof c=="string"){a=this._form.target;
this._form.target=c}if(typeof c=="function"){b=c}if(typeof b!="undefined"){if(!b(this._form)){return this}}this._form.submit();if(a!==null){this._form.target=a}return this};jindo.$Form.prototype.reset=function(a){if(typeof a!="undefined"){if(!a(this._form)){return this}}this._form.reset();return this};jindo.$Template=function(b){var a=null,c="";var d=arguments.callee;if(b instanceof d){return b}if(!(this instanceof d)){return new d(b)}if(typeof b=="undefined"){b=""}else{if((a=document.getElementById(b)||b)&&a.tagName&&(c=a.tagName.toUpperCase())&&(c=="TEXTAREA"||(c=="SCRIPT"&&a.getAttribute("type")=="text/template"))){b=(a.value||a.innerHTML).replace(/^\s+|\s+$/g,"")
}}this._str=b+""};jindo.$Template.splitter=/(?!\\)[\{\}]/g;jindo.$Template.pattern=/^(?:if (.+)|elseif (.+)|for (?:(.+)\:)?(.+) in (.+)|(else)|\/(if|for)|=(.+)|js (.+)|set (.+))$/;jindo.$Template.prototype.process=function(a){var e="\x01";var m="\x02";var d="\x03";var c=(" "+this._str+" ").replace(/\\{/g,m).replace(/\\}/g,d).replace(/(?!\\)\}\{/g,"}"+e+"{").split(jindo.$Template.splitter),b=c.length;var g={'"':'\\"',"\\":"\\\\","\n":"\\n","\r":"\\r","\t":"\\t","\f":"\\f"};var h=[/("(?:(?:\\.)+|[^\\"]+)*"|[a-zA-Z_][\w\.]*)/g,/[\n\r\t\f"\\]/g,/^\s+/,/\s+$/,/#/g];
var n=[function(o){return(o.substring(0,1)=='"')?o:"d."+o},function(o){return g[o]||o},"",""];var f=[];var l=0;c[0]=c[0].substr(1);c[b-1]=c[b-1].substr(0,c[b-1].length-1);if(b<2){return c}while(b--){if(b%2){c[b]=c[b].replace(jindo.$Template.pattern,function(){var o=arguments;if(o[10]){return o[10].replace(/(\w+)=(?:([a-zA-Z_][a-zA-Z0-9_]+)|(.+))$/g,function(){var p=arguments;var q="d."+p[1]+"=";if(p[2]){q+="d."+p[2]}else{q+=p[3].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(r){return(r.substring(0,1)=="=")?"d."+r.replace("=",""):r
})}return q})+";"}if(o[9]){return"s[i++]="+o[9].replace(/(=(?:[a-zA-Z_][\w\.]*)+)/g,function(p){return(p.substring(0,1)=="=")?"d."+p.replace("=",""):p})+";"}if(o[8]){return"s[i++]= d."+o[8]+";"}if(o[1]){return"if("+o[1].replace(h[0],n[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){"}if(o[2]){return"}else if("+o[2].replace(h[0],n[0]).replace(/d\.(typeof) /,"$1 ").replace(/ d\.(instanceof) d\./," $1 ")+"){"}if(o[5]){return("var t#=d."+o[5]+"||{},p#=isArray(t#),i#=0;for(var x# in t#){ if( (p# && isNaN(i#=parseInt(x#))) || (!p# && !t#.propertyIsEnumerable(x#)) ) continue; d."+o[4]+"=t#[x#];"+(o[3]?"d."+o[3]+"=p#?i#:x#;":"")).replace(h[4],l++)
}if(o[6]){return"}else{"}if(o[7]){return"};"}return o[0]})}else{if(c[b]==e){c[b]=""}else{if(c[b]){c[b]='s[i++]="'+c[b].replace(h[1],n[1])+'";'}}}}c=c.join("").replace(new RegExp(m,"g"),"{").replace(new RegExp(d,"g"),"}");c=(new Function("d",'var s=[],i=0;function isArray(o){ return Object.prototype.toString.call(o) == "[object Array]" };'+c+'return s.join("");'))(a);return c};jindo.$Date=function(e){var c=arguments,d="";var b=arguments.callee;if(e&&e instanceof b){return e}if(!(this instanceof b)){return new b(c[0],c[1],c[2],c[3],c[4],c[5],c[6])
}if((d=typeof e)=="string"){this._date=b.parse(e)}else{if(d=="number"){if(typeof c[1]=="undefined"){this._date=new Date(e)}else{this._date=new Date(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}}else{if(d=="object"&&e.constructor==Date){(this._date=new Date).setTime(e.getTime());this._date.setMilliseconds(e.getMilliseconds())}else{this._date=new Date}}}};jindo.$Date.names={month:["January","Febrary","March","April","May","June","July","August","September","October","Novermber","December"],s_month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s_day:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"]};
jindo.$Date.now=function(){return Date.now()};jindo.$Date.parse=function(a){return Date.parse(a)};jindo.$Date.prototype.$value=function(){return this._date};jindo.$Date.prototype.format=function(c){var a={};var e=this._date;return(c||"").replace(/[a-z]/ig,function b(d){if(typeof a[d]!="undefined"){return a[d]}switch(d){case"d":case"j":a.j=e.getDate();a.d=(a.j>9?"":"0")+a.j;return a[d];case"l":case"D":case"w":case"N":a.w=e.getDay();a.N=a.w?a.w:7;a.D=jindo.$Date.names.s_day[a.w];a.l=jindo.$Date.names.day[a.w];
return a[d];case"S":return(!!(a.S=["st","nd","rd"][e.getDate()]))?a.S:(a.S="th");case"z":a.z=Math.floor((e.getTime()-(new Date(e.getFullYear(),0,1)).getTime())/(3600*24*1000));return a.z;case"m":case"n":a.n=e.getMonth()+1;a.m=(a.n>9?"":"0")+a.n;return a[d];case"L":a.L=this.isLeapYear();return a.L;case"o":case"Y":case"y":a.o=a.Y=e.getFullYear();a.y=(a.o+"").substr(2);return a[d];case"a":case"A":case"g":case"G":case"h":case"H":a.G=e.getHours();a.g=(a.g=a.G%12)?a.g:12;a.A=a.G<12?jindo.$Date.names.ampm[0]:jindo.$Date.names.ampm[1];
a.a=a.A.toLowerCase();a.H=(a.G>9?"":"0")+a.G;a.h=(a.g>9?"":"0")+a.g;return a[d];case"i":a.i=(((a.i=e.getMinutes())>9)?"":"0")+a.i;return a.i;case"s":a.s=(((a.s=e.getSeconds())>9)?"":"0")+a.s;return a.s;case"u":a.u=e.getMilliseconds();return a.u;case"U":a.U=this.time();return a.U;default:return d}})};jindo.$Date.prototype.time=function(a){if(typeof a=="number"){this._date.setTime(a);return this}return this._date.getTime()};jindo.$Date.prototype.year=function(a){if(typeof a=="number"){this._date.setFullYear(a);
return this}return this._date.getFullYear()};jindo.$Date.prototype.month=function(a){if(typeof a=="number"){this._date.setMonth(a);return this}return this._date.getMonth()};jindo.$Date.prototype.date=function(a){if(typeof a=="number"){this._date.setDate(a);return this}return this._date.getDate()};jindo.$Date.prototype.day=function(){return this._date.getDay()};jindo.$Date.prototype.hours=function(a){if(typeof a=="number"){this._date.setHours(a);return this}return this._date.getHours()};jindo.$Date.prototype.seconds=function(a){if(typeof a=="number"){this._date.setSeconds(a);
return this}return this._date.getSeconds()};jindo.$Date.prototype.minutes=function(a){if(typeof a=="number"){this._date.setMinutes(a);return this}return this._date.getMinutes()};jindo.$Date.prototype.isLeapYear=function(){var a=this._date.getFullYear();return !(a%4)&&!!(a%100)||!(a%400)};jindo.$Window=function(b){var a=arguments.callee;if(b instanceof a){return b}if(!(this instanceof a)){return new a(b)}this._win=b||window};jindo.$Window.prototype.$value=function(){return this._win};jindo.$Window.prototype.resizeTo=function(b,a){this._win.resizeTo(b,a);
return this};jindo.$Window.prototype.resizeBy=function(b,a){this._win.resizeBy(b,a);return this};jindo.$Window.prototype.moveTo=function(b,a){this._win.moveTo(b,a);return this};jindo.$Window.prototype.moveBy=function(b,a){this._win.moveBy(b,a);return this};jindo.$Window.prototype.sizeToContent=function(){if(typeof this._win.sizeToContent=="function"){this._win.sizeToContent()}else{var a=jindo.$Document(this._win.document);var c=a.clientSize();var b=a.scrollSize();this.resizeBy(b.width-c.width,b.height-c.height)
}return this};if(typeof window!="undefined"){for(prop in jindo){window[prop]=jindo[prop]}};var $$=jindo.$$;if(typeof jindo!="undefined"){$Event=jindo.$Event}if(typeof jindo=="undefined"){jindo={};jindo.$Class=$Class;jindo.$Event=$Event;jindo.$H=$H;jindo.$Fn=$Fn}nhn.Component=jindo.$Class({_eventHandlers:null,_options:null,$init:function(){var a=this.constructor._instances;if(typeof a=="undefined"){this.constructor._instances=a=[]}a[a.length]=this;this._eventHandlers={};this._options={};this._options._setters={}},option:function(f,a){var c=(typeof f);if(c=="undefined"){return this._options
}else{if(c=="string"){if(typeof a!="undefined"){this._options[f]=a;if(typeof this._options._setters[f]=="function"){this._options._setters[f](a)}return this}else{return this._options[f]}}else{if(c=="object"){try{for(var b in f){this._options[b]=f[b];if(typeof this._options._setters[b]=="function"){this._options._setters[b](f[b])}}}catch(d){}return this}}}},optionSetter:function(a,c){var d=(typeof a);if(d=="undefined"){return this._options._setters}else{if(d=="string"){if(typeof c!="undefined"){this._options._setters[a]=jindo.$Fn(c,this).bind();
return this}else{return this._options._setters[a]}}else{if(d=="object"){try{for(var b in a){this._options._setters[b]=jindo.$Fn(a[b],this).bind()}}catch(f){}return this}}}},fireEvent:function(n,l){var l=l?(l instanceof jindo.$Event?l._event:l):{};var c=this["on"+n];var a=this._eventHandlers[n];var h=typeof c=="function";var g=typeof a!="undefined";if(!h&&!g){return true}a=a.concat();var j=(function(i){try{if(i instanceof Event){return true}}catch(e){}try{if(i instanceof MouseEvent){return true}}catch(e){}try{if(i instanceof KeyEvent){return true
}}catch(e){}try{if(("cancelBubble" in i||"preventBubble" in i)&&"type" in i){return true}}catch(e){}return false})(l);if(!j){try{if(typeof l._extends=="undefined"){l._extends=[];l.stop=function(){if(l._extends.length>0){l._extends[l._extends.length-1].canceled=true}}}l._extends.push({type:n,canceled:false});l.type=n}catch(b){j=true}}if(j){l=jindo.$Event(l)}var f=[l];for(var o=2,k=arguments.length;o<k;o++){f.push(arguments[o])}if(h){c.apply(this,f)}if(g){for(var o=0,m;m=a[o];o++){m.apply(this,f)}}if(j){return !l.canceled
}var d=l._extends.pop();return !d.canceled},attach:function(a,c){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(d,e){this.attach(e,d)},this).bind());return this}var b=this._eventHandlers[a];if(typeof b=="undefined"){b=this._eventHandlers[a]=[]}b.push(c);return this},detach:function(a,e){if(arguments.length==1){jindo.$H(arguments[0]).forEach($Fn(function(f,g){this.detach(g,f)},this).bind());return this}var b=this._eventHandlers[a];if(typeof b=="undefined"){return this}for(var c=0,d;
d=b[c];c++){if(d===e){b=b.splice(c,1);break}}return this},detachAll:function(a){var b=this._eventHandlers;if(arguments.length){if(typeof b[a]=="undefined"){return this}delete b[a];return this}for(var c in b){delete b[c]}return this}});nhn.Component.factory=function(b,a){var c=[];if(typeof a=="undefined"){a={}}for(var d=0;d<b.length;d++){try{oInstance=new this(b[d],a);c[c.length]=oInstance}catch(f){}}return c};nhn.Timer=jindo.$Class({_timer:null,_lastest:null,_remained:0,_delay:null,_callback:null,$init:function(){},start:function(a,b){var c=this;
this.abort();this.fireEvent("wait");this._lastest=new Date().getTime();this._remained=0;this._delay=b;this._callback=a;this.resume();return true},_clearTimer:function(){var a=false;if(this._timer){clearInterval(this._timer);a=true}this._timer=null;return a},abort:function(){var a;if(a=this._clearTimer()){this.fireEvent("abort")}return a},pause:function(){var a=new Date().getTime()-this._lastest;this._remained=this._delay-a;if(this._remained<0){this._remained=0}return this._clearTimer()},resume:function(){var b=this;
if(!this._callback){return false}var a=function(c,d){b._clearTimer();b._timer=setInterval(function(){b.fireEvent("run");var e=b._callback();b._lastest=new Date().getTime();if(!e){clearInterval(b._timer);b._timer=null;b.fireEvent("end");return}b.fireEvent("wait");if(d){a(b._delay,false)}},c)};if(this._remained){a(this._remained,true);this._remained=0}else{a(this._delay,false)}return true}}).extend(nhn.Component);nhn.Transition=jindo.$Class({_nFPS:15,_aQueue:null,_oTimer:null,_bIsWaiting:true,_bIsPlaying:false,$init:function(a){this._aQueue=[];
this._oTimer=new nhn.Timer();this.option({effect:nhn.Effect.linear,correction:false});this.option(a||{})},fps:function(a){if(arguments.length>0){this._nFPS=a;return this}return this._nFPS},abort:function(){this._aQueue=[];this._oTimer.abort();if(this._bIsPlaying){this.fireEvent("abort")}this._bIsWaiting=true;this._bIsPlaying=false;this._oNow=null},start:function(){this.abort();return this.precede.apply(this,arguments)},pause:function(){if(this._oTimer.abort()){this.fireEvent("pause")}},resume:function(){var a=this;
if(!this._oNow){return}if(this._bIsWaiting==false&&this._bIsPlaying==true){this.fireEvent("resume")}this._goOn();this._bIsWaiting=false;this._bIsPlaying=true;this._oTimer.start(function(){var b=!a._goOn();if(b){a._bIsWaiting=true;setTimeout(function(){a._try()},0)}return !b},this._oNow.interval)},precede:function(g,a){if(typeof g=="function"){this._aQueue.push(g)}else{var d={duration:g,lists:[]};for(var c=arguments,f=c.length,b=1;b<f-1;b+=2){var e=[];jindo.$H(c[b+1]).forEach(function(h,i){if(/^(@|style\.)(\w+)/i.test(i)){e.push(["csses",RegExp.$2,h])
}else{e.push(["attrs",i,h])}});d.lists.push({element:"tagName" in c[b]?jindo.$Element(c[b]):c[b],values:e})}this._aQueue.push(d)}this._try();return this},_dequeue:function(){var h=this._aQueue.shift();if(!h){return}if(typeof h=="function"){return h}var a=h.lists;for(var b=0,f=a.length;b<f;b++){var c=a[b].element;for(var l=0,e=a[b].values,d=e.length;l<d;l++){var g=e[l][0];var k=e[l][2];if(typeof k!="function"){if(k instanceof Array){k=this.option("effect")(k[0],k[1])}else{k=this.option("effect")(k)
}}if(k.setStart){if(c instanceof jindo.$Element){switch(g){case"csses":k.setStart(c.css(e[l][1]));break;case"attrs":k.setStart(c.$value()[e[l][1]]);break}}else{k.setStart(c.getter(e[l][1]))}}e[l][2]=k}}return h},_try:function(){var b=this;if(!this._bIsWaiting){return false}var a;do{a=this._dequeue();if(!a){if(this._bIsPlaying){this._bIsPlaying=false;this.abort();this.fireEvent("end")}return false}if(!this._bIsPlaying){this.fireEvent("start")}if(typeof a=="function"){this._bIsPlaying=true;a.call(this)
}}while(typeof a=="function");var c=1000/this._nFPS;this._oNow={lists:a.lists,ratio:0,interval:c,step:c/a.duration};this.resume();return true},_goOn:function(){var s=this._oNow;var b=s.ratio;var e=s.lists;var r={};b=parseFloat(b.toFixed(5));if(b>1){b=1}var h=this.option("correction");for(var l=0,f=e.length;l<f;l++){var p=e[l].element;for(var o=0,k=e[l].values,q=k.length;o<q;o++){if(p instanceof jindo.$Element){var n=k[o][1];var d=k[o][2](b);if(h){var c=/[0-9]([^0-9]*)$/.test(d)&&RegExp.$1||"";if(c){var t=parseFloat(d);
var g;var m=t;t+=r[n]||0;t=parseFloat(t.toFixed(5));if(l==f-1){d=Math.round(t)+c}else{g=parseFloat(/(\.[0-9]+)$/.test(t)&&RegExp.$1||0);d=parseInt(t)+c;r[n]=g}}}switch(k[o][0]){case"csses":p.css(n,d);break;case"attrs":p.$value()[n]=d;break}}else{p.setter(k[o][1],k[o][2](b))}this.fireEvent("playing",{element:p})}}s.ratio+=s.step;return b!=1}}).extend(nhn.Component);nhn.Effect=function(b){if(this instanceof arguments.callee){throw new Error("You can't create a instance of this")}var f=/^(\-?[0-9\.]+)(%|px|pt|em)?$/;
var e=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i;var c=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i;var d=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i;var a=function(g){var h;if(f.test(g)){g=parseFloat(g),h=RegExp.$2}else{if(e.test(g)){g=[parseInt(RegExp.$1),parseInt(RegExp.$2),parseInt(RegExp.$3)],h="color"}else{if(c.test(g=g.replace(d,"#$1$1$2$2$3$3"))){g=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)],h="color"}}}return{value:g,unit:h}};return function(k,g){var l;if(arguments.length>1){k=a(k),g=a(g),l=g.unit
}else{g=a(k),k=null,l=g.unit}if(k&&g&&k.unit!=g.unit){throw new Error("unit error")}k=k&&k.value;g=g&&g.value;var h,j;var i=function(o){var m=k;var t=g;var q=function(r,p){return(p-r)*b(o)+r+l};if(l=="color"){var n=parseInt(q(m[0],t[0]))<<16;n|=parseInt(q(m[1],t[1]))<<8;n|=parseInt(q(m[2],t[2]));n=n.toString(16).toUpperCase();for(var u=0;6-n.length;u++){n="0"+n}return"#"+n}return q(m,t)};if(k===null){i.setStart=function(m){if(isNaN(parseInt(m))){m=0+l}m=a(m);if(m.unit!=l){throw new Error("unit eror")
}k=m.value}}return i}};nhn.Effect.linear=nhn.Effect(function(a){return a});nhn.Effect.easeIn=nhn.Effect(function(a){y=Math.sqrt(1-(a*a));return(1-y)});nhn.Effect.easeOut=nhn.Effect(function(a){y=Math.sqrt((2-a)*a);return y});nhn.Effect.overphase=nhn.Effect(function(a){a/=0.69643223;y=Math.sqrt((2-a)*a)+0.1;return y.toFixed(7)});nhn.Effect.bounce=nhn.Effect(function(a){if(a<(1/2.75)){return(7.5625*a*a)}else{if(a<(2/2.75)){return(7.5625*(a-=(1.5/2.75))*a+0.75)}else{if(a<(2.5/2.75)){return(7.5625*(a-=(2.25/2.75))*a+0.9375)
}else{return(7.5625*(a-=(2.625/2.75))*a+0.984375)}}}});(function(){var a=jindo.$Element.prototype.css;jindo.$Element.prototype.css=function(c,b){if(c=="opacity"){return typeof b!="undefined"?this.opacity(parseFloat(b)):this.opacity()}return b!="undefined"?a.call(this,c,b):a.call(this,c)}})();nhn.DragArea=jindo.$Class({_bIsActivating:false,$init:function(b,a){this.option({className:"dragable",flowOut:true,setCapture:false,threshold:0});this.option(a||{});this._el=b;this.bIsIE=jindo.$Agent().navigator().ie;
this._oDragInfo={prepare:false};this._bIsDragging=false;this._wfOnMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfOnMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);this._wfOnDragStart=jindo.$Fn(this._onDragStart,this);this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this);this.activate()},_findDraggableElement:function(d){if(jindo.cssquery.test(d,"input[type=text]")||d.tagName=="TEXTAREA"){return null}var c=this;var b="."+this.option("className");
var a=function(e){if(e==null){return false}if(!c._el.tagName||c._el===e){return true}return jindo.$Element(c._el).isParentOf(e)};var d=jindo.cssquery.test(d,b)?d:jindo.cssquery.getSingle("! "+b,d);if(!a(d)){d=null}return d},isDragging:function(){return this._bIsDragging&&!this._oDragInfo.prepare},_attachEvent:function(){if(this.isActivating()){return}this._wfOnMouseDown.attach(this._el,"mousedown");if(this.bIsIE){this._wfOnDragStart.attach(this._el,"dragstart");this._wfOnSelectStart.attach(this._el,"selectstart")
}this._bIsActivating=true},_detachEvent:function(){if(!this.isActivating()){return}this._wfOnMouseDown.detach(this._el,"mousedown");if(this.bIsIE){this._wfOnDragStart.detach(this._el,"dragstart");this._wfOnSelectStart.detach(this._el,"selectstart")}this._bIsActivating=false},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},activate:function(){this._attachEvent()},deactivate:function(){this._detachEvent()},isEventAttached:function(){return this.isActivating()},isActivating:function(){return this._bIsActivating
},_onMouseDown:function(a){if(this._bIsDragging||this._oDragInfo.prepare){return}if(a.mouse().right){return}var c=this._findDraggableElement(a.element);if(!c){return}var b=a.pos();this._oDragInfo={prepare:true,button:a._event.button,handle:c,element:c,pageX:b.pageX,pageY:b.pageY};this.fireEvent("handledown",{handle:c,element:c,event:a});this._wfOnMouseMove.attach(document,"mousemove");this._wfOnMouseUp.attach(document,"mouseup");this._wfOnMouseUp.attach(document,"contextmenu");a.stop($Event.CANCEL_DEFAULT)
},_onMouseMove:function(b){this._bIsDragging=true;var a=this._oDragInfo;var g=b.pos();if(a.prepare){var n=this.option("threshold");var j={pageX:0,pageY:0};if(n){j.pageX=g.pageX-a.pageX;j.pageY=g.pageY-a.pageY;var h=Math.sqrt(j.pageX*j.pageX+j.pageY*j.pageY);if(n>h){return}}var l=this._findDraggableElement(b.element);if(this.bIsIE&&this.option("setCapture")){this._elSetCapture=(this._el==document)?document.body:l;this._elSetCapture.setCapture(true)}var p={area:this._el,handle:a.handle,element:a.element,diff:j,event:b};
if(!this.fireEvent("dragstart",p)){this._bIsDragging=false;return}var o=jindo.$Element(p.element);a.prepare=false;a.handle=p.handle;a.element=p.element;a.objectX=parseInt(o.css("left"))||0;a.objectY=parseInt(o.css("top"))||0}var m={x:g.pageX-a.pageX,y:g.pageY-a.pageY};var p={area:this._el,handle:a.handle,element:a.element,event:b,x:a.objectX+m.x,y:a.objectY+m.y,gapX:m.x,gapY:m.y};if(!this.fireEvent("beforedrag",p)){return}if(this.option("flowOut")==false){var f=p.element;var k=jindo.cssquery.getSingle("! [@position!=static]",p.element);
var i=[f.offsetWidth,f.offsetHeight];var d=k?{width:k.clientWidth,height:k.clientHeight}:jindo.$Document().clientSize();if(p.x!==null){if(p.x<0){p.x=0}else{if(p.x+i[0]>d.width){p.x=d.width-i[0]}}}if(p.y!==null){if(p.y<0){p.y=0}else{if(p.y+i[1]>d.height){p.y=d.height-i[1]}}}}var c=a.element;if(p.x!==null){c.style.left=p.x+"px"}if(p.y!==null){c.style.top=p.y+"px"}if(!this.fireEvent("drag",p)){return}},_onMouseUp:function(b){if(b.type=="mouseup"&&b.mouse().right){return}if(b.type=="contextmenu"){this._oDragInfo.prepare=false;
b.stop()}this._wfOnMouseMove.detach(document,"mousemove");this._wfOnMouseUp.detach(document,"mouseup");this._wfOnMouseUp.detach(document,"contextmenu");var c=this._oDragInfo;if(!c.prepare&&this._bIsDragging){var a=c.element;var d=jindo.$Element(a);if(!this.fireEvent("dragend",{area:this._el,handle:c.handle,element:c.element,event:b,x:parseInt(d.css("left"))||0,y:parseInt(d.css("top"))||0})){return}}if(this.bIsIE&&this._elSetCapture){this._elSetCapture.releaseCapture();this._elSetCapture=null}this._bIsDragging=false;
this._oDragInfo.prepare=false;this.fireEvent("handleup",{handle:c.handle,element:c.element,event:b})},_onDragStart:function(a){a.stop($Event.CANCEL_DEFAULT)},_onSelectStart:function(a){if(this._findDraggableElement(a.element)){a.stop(jindo.$Event.CANCEL_DEFAULT)}}}).extend(nhn.Component);nhn.Accordion=jindo.$Class({$init:function(c,a){this._el=jindo.$(c);this.option({classPrefix:"accordion-",direction:"vertical",duration:300,fps:30,effect:"linear",expandDelay:0,contractDelay:0});if(a){this.option(a)
}this.oTimer=new nhn.Timer();jindo.cssquery.useCache(true);var b=this.option("classPrefix");this._aBlock=jindo.cssquery("."+b+"block",this._el);this.oTransition=new nhn.Transition({correction:true}).fps(this.option("fps"));jindo.$Fn(function(h){var d=h.element;if(d==this._el){return}var g=this.option("classPrefix");var f=(jindo.$Element(d).hasClass(g+"block"))?d:jindo.cssquery.getSingle("! ."+g+"block",d);var i=null;jindo.$A(this._aBlock).forEach(function(k,j){if(k===f){i=j}});if(typeof i=="number"){var e=this.getHandler(i);
if(e===f||d===e){this.fireEvent(h.type,{element:d,index:i,event:h})}}},this).attach(this._el,"click").attach(this._el,"mouseover");jindo.$Fn(function(g){var j=g.element;if(j==this._el){return}var h=this.option("classPrefix");var e=(jindo.$Element(j).hasClass(h+"block"))?j:jindo.cssquery.getSingle("! ."+h+"block",j);var f=null;jindo.$A(this._aBlock).forEach(function(l,k){if(l===e){f=k}});var i=this;var d=true;jindo.$A(jindo.cssquery("! *",g.relatedElement)).forEach(function(k){if(k==i._el){d=false;
jindo.$A.Break()}});if(e&&d&&typeof f=="number"){this.fireEvent(g.type,{element:e,index:f})}},this).attach(this._el,"mouseout")},_getBodySize:function(b){var a=this.getBody(b);a.style.zoom=1;return{width:jindo.$Element(a).width(),height:jindo.$Element(a).height()}},expand:function(a){var c=this;this.oTimer.abort();if(this.getExpanded()==a){return}var b=new Array();b.push(this.option("duration"));jindo.$A(this._aBlock).forEach(function(e,g){var d=c._getBodySize(g);b.push(c._aBlock[g]);var f=c.getHead(g);
switch(c.option("direction")){case"vertical":if(g==a){b.push({"@height":nhn.Effect[c.option("effect")](d.height+jindo.$Element(f).height()+"px")})}else{b.push({"@height":nhn.Effect[c.option("effect")](jindo.$Element(f).height()+"px")})}break;case"horizontal":if(g==a){b.push({"@width":nhn.Effect[c.option("effect")](d.width+jindo.$Element(f).width()+"px")})}else{b.push({"@width":nhn.Effect[c.option("effect")](jindo.$Element(f).width()+"px")})}break}});this.oTimer.start(function(){c.oTransition.start.apply(c.oTransition,b);
c._setExpanded(a)},this.option("expandDelay"))},expandAll:function(){var b=this;this.oTimer.abort();var a=new Array();a.push(this.option("duration"));jindo.$A(this._aBlock).forEach(function(d,f){var c=b._getBodySize(f);var e=b.getHead(f);a.push(b._aBlock[f]);switch(b.option("direction")){case"vertical":a.push({"@height":nhn.Effect[b.option("effect")](c.height+jindo.$Element(e).height()+"px")});break;case"horizontal":a.push({"@width":nhn.Effect[b.option("effect")](c.width+jindo.$Element(e).width()+"px")});
break}});this.oTimer.start(function(){b.oTransition.start.apply(b.oTransition,a);b._setExpanded("all")},this.option("expandDelay"))},contractAll:function(){var b=this;var a=new Array();a.push(this.option("duration"));jindo.$A(this._aBlock).forEach(function(d,c){a.push(b._aBlock[c]);var e=b.getHead(c);switch(b.option("direction")){case"vertical":a.push({"@height":nhn.Effect[b.option("effect")](jindo.$Element(e).height()+"px")});break;case"horizontal":a.push({"@width":nhn.Effect[b.option("effect")](jindo.$Element(e).width()+"px")});
break}});this.oTimer.start(function(){b.oTransition.start.apply(b.oTransition,a);b._setExpanded(null)},this.option("contractDelay"))},_setExpanded:function(a){this.nExpanded=a},getExpanded:function(){return this.nExpanded},getBlock:function(a){return this._aBlock[a]},getAllBlocks:function(){return this._aBlock},getHead:function(b){var a=this.getBlock(b);return jindo.cssquery.getSingle("dt",a)},getBody:function(b){var a=this.getBlock(b);return jindo.cssquery.getSingle("dd",a)},getHandler:function(a){var b=this.option("classPrefix");
var c=this.getBlock(a);return jindo.cssquery.getSingle("."+b+"handler",c)||this.getBlock(a)}}).extend(nhn.Component);nhn.Slider=jindo.$Class({_elTrack:null,_oDragArea:null,_aThumbs:null,_aPoses:null,_oSwap:null,_bIsEventAttached:false,$init:function(a,c){this.option({vertical:false,jump:true,classPrefix:"slider-",adjustValue:null,minValue:0,maxValue:1});this.option(c||{});if(!this.option("vertical")){this._oSwap={y:"y",x:"x",clientX:"clientX",pageX:"pageX",offsetWidth:"offsetWidth",left:"left"}}else{this._oSwap={y:"x",x:"y",clientX:"clientY",pageX:"pageY",offsetWidth:"offsetHeight",left:"top"}
}this._sRand="S"+parseInt(Math.random()*100000000);this._elTrack=jindo.$(a);this._aThumbs=$$("."+this.option("classPrefix")+"thumb",this._elTrack);var b=jindo.$ElementList(this._aThumbs);b.addClass(this._sRand);this._aPoses=[];this._onTrackMouseDownFn=jindo.$Fn(this._onTrackMouseDown,this);this._initDragArea();this.activate();this._detectChange();a=null},getTrack:function(){return this._elTrack},getThumb:function(a){return this._aThumbs[a]},_initDragArea:function(){var b=this;var a=this._oSwap;this._oDragArea=new nhn.DragArea(this._elTrack,{className:this._sRand,flowOut:false}).attach({beforedrag:function(d){var f=b._getThumbIndex(d.handle);
var c={index:f,pos:d[a.x],jump:false};if(!b.fireEvent("beforechange",c)){return false}var g=b._getAdjustedPos(f,c.pos);if(g===false){return d.stop()}d[a.x]=g;d[a.y]=null},drag:function(d){var c=b._getThumbIndex(d.handle);b._fireChangeEvent(c)}})},getDragArea:function(){return this._oDragArea},_fireBeforeChangeEvent:function(b,a,c){},_fireChangeEvent:function(d){var c=this.option("adjustBy");if(!this._detectChange()){return}var b=this._aPoses[d];var a={index:d,pos:b,value:this._getValue(d,b)};this.fireEvent("change",a)
},_attachEvent:function(){if(this._bIsEventAttached){return}this._onTrackMouseDownFn.attach(this._elTrack,"mousedown");this._bIsEventAttached=true},_detachEvent:function(){if(!this._bIsEventAttached){return}this._onTrackMouseDownFn.detach(this._elTrack,"mousedown");this._bIsEventAttached=false},activate:function(){this.getDragArea().activate();this._attachEvent()},deactivate:function(){this.getDragArea().deactivate();this._detachEvent()},_onTrackMouseDown:function(f){var l=this;if(!this.option("jump")){return
}var n=0;var m=this._oSwap;var o=f.element;var b="."+this.option("classPrefix")+"thumb";var j=jindo.cssquery.test(o,b)||jindo.cssquery.getSingle("! "+b,o);if(j){return}var d=f.pos()[m.pageX];d-=jindo.$Element(this._elTrack).offset()[m.left];var a=9999999;for(var c=0,h;h=this._aThumbs[c];c++){var g=parseInt(jindo.$Element(h).css(m.left))||0;g+=parseInt(h[m.offsetWidth]/2);var k=Math.abs(d-g);if(k<a){a=k;n=c}}var h=this._aThumbs[n];d-=parseInt(h[m.offsetWidth]/2);f.stop(jindo.$Event.CANCEL_DEFAULT);
this.positions(n,d)},_getTrackInfo:function(h){var g=this._oSwap;var e=this._aThumbs[h];var b=e[g.offsetWidth];var d=this._elTrack[g.offsetWidth];var a=d-b;var c=this.option("maxValue");var f=this.option("minValue");return{maxPos:a,max:c,min:f}},_getValue:function(c,e){if(typeof e=="undefined"){e=this._aPoses[c]}var b=this._getTrackInfo(c);var d=Math.min(Math.max(e*(b.max-b.min)/b.maxPos+b.min,b.min),b.max);var a;if(a=this.option("adjustValue")){d=a.call(this,d)}return d},_getAdjustedPos:function(b,e){var c=e;
var a=this._getTrackInfo(b);var g;if(g=this.option("adjustValue")){var d=Math.min(Math.max(c*(a.max-a.min)/a.maxPos+a.min,a.min),a.max);var f=g.call(this,d);if(d!=f){c=a.maxPos*(f-a.min)/(a.max-a.min)}}c=Math.max(c,0);c=Math.min(c,a.maxPos);return c},_detectChange:function(){var a=this.positions();var b=false;for(var d=0,c=a.length;d<c;d++){if(a[d]!==this._aPoses[d]){b=true}}this._aPoses=a;return b},_getThumbIndex:function(a){for(var c=0,b=this._aThumbs.length;c<b;c++){if(this._aThumbs[c]==a){return c
}}return -1},positions:function(c,a,d){if(typeof d=="undefined"){d=true}var h=this._oSwap;switch(arguments.length){case 0:var g=[];for(var e=0,f=this._aThumbs.length;e<f;e++){g[e]=this.positions(e)}return g;case 1:return parseInt(jindo.$Element(this._aThumbs[c]).css(h.left));default:if(d){var b={index:c,pos:a,jump:true};if(!this.fireEvent("beforechange",b)){return false}var j=this._getAdjustedPos(c,b.pos);if(j===false){return this}jindo.$Element(this._aThumbs[c]).css(h.left,j+"px");this._fireChangeEvent(c);
return this}var j=this._getAdjustedPos(c,a);jindo.$Element(this._aThumbs[c]).css(h.left,j+"px");return this}},values:function(d,f,g){if(typeof g=="undefined"){g=true}switch(arguments.length){case 0:var c=[];for(var e=0,b=this._aThumbs.length;e<b;e++){c[e]=this._getValue(e)}return c;case 1:return this._getValue(d,this.positions(d));default:var a=this._getTrackInfo(d);this.positions(d,(f-a.min)*a.maxPos/(a.max-a.min),g);return this}}}).extend(nhn.Component);nhn.WatchInput=jindo.$Class({_bIsActivating:false,_bTimerRunning:false,_bEventAttached:false,_sPrevValue:"",$init:function(b,c){var a={interval:100,useTimerOnIE:false,keyEvent:"keyup",activateOnload:true};
this.option(a);this.option(c||{});this._elInput=jindo.$(b);this._oTimer=new nhn.Timer();this._bIE=jindo.$Agent().navigator().ie;if(this.option("useTimerOnIE")){this._bIE=false}this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyEvent=jindo.$Fn(this._onKeyEvent,this);if(this.option("activateOnload")){this.activate(true)}},getInput:function(){return this._elInput},setInputValue:function(a){this.getInput().value=a;this.setCompareValue(a)},getCompareValue:function(){return this._sPrevValue
},setCompareValue:function(a){this._sPrevValue=a},start:function(a){this.activate(a||false)},stop:function(){this.deactivate()},isActivating:function(){return this._bIsActivating},activate:function(b){if(this.isActivating()){return}var a=this.getInput();var b=b||false;if(this._bIE){this._wfKeyEvent.attach(a,this.option("keyEvent"))}else{if(this._isTimerRunning()){return}this._wfFocus.attach(a,"focus");this._wfBlur.attach(a,"blur");if(b){this._onFocus()}}this._bIsActivating=true;this.fireEvent("start");
return this},deactivate:function(){if(!this.isActivating()){return}var a=this.getInput();if(this._bIE){this._wfKeyEvent.detach(a,this.option("keyEvent"))}else{if(this._isTimerRunning()){this._stopTimer()}this._wfFocus.detach(a,"focus");this._wfBlur.detach(a,"blur")}this._bIsActivating=false;this.fireEvent("stop");return this},getInterval:function(){return this.option("interval")},setInterval:function(a){this.option("interval",a)},_isTimerRunning:function(){return this._bTimerRunning},_stopTimer:function(){var a=this;
return setTimeout(function(){a._oTimer.abort();a._bTimerRunning=false;a.fireEvent("timerStop")},this.getInterval())},_onKeyEvent:function(a){this._compare()},_onFocus:function(){if(this._isTimerRunning()){clearTimeout(this._nTimerStopCall);this._nTimerStopCall=null;return}this._bTimerRunning=true;this.fireEvent("timerStart");this._compare();var a=this;this._oTimer.start(function(){a._compare();return true},this.getInterval())},_onBlur:function(){var a=this;this._nTimerStopCall=this._stopTimer()},_compare:function(){var a=this.getInput().value;
if(a!=this.getCompareValue()){this.fireEvent("change",{text:a});this.setCompareValue(a)}}}).extend(nhn.Component);jindo.Component=jindo.$Class({_htEventHandler:null,_htOption:null,$init:function(){var a=this.constructor.getInstance();a.push(this);this._htEventHandler={};this._htOption={};this._htOption._htSetter={}},option:function(a,c){switch(typeof a){case"undefined":return this._htOption;case"string":if(typeof c!="undefined"){if(a=="htCustomEventHandler"){if(typeof this._htOption[a]=="undefined"){this.attach(c)}else{return this}}this._htOption[a]=c;if(typeof this._htOption._htSetter[a]=="function"){this._htOption._htSetter[a](c)
}}else{return this._htOption[a]}break;case"object":for(var b in a){if(b=="htCustomEventHandler"){if(typeof this._htOption[b]=="undefined"){this.attach(a[b])}else{continue}}this._htOption[b]=a[b];if(typeof this._htOption._htSetter[b]=="function"){this._htOption._htSetter[b](a[b])}}break}return this},optionSetter:function(a,b){switch(typeof a){case"undefined":return this._htOption._htSetter;case"string":if(typeof b!="undefined"){this._htOption._htSetter[a]=jindo.$Fn(b,this).bind()}else{return this._htOption._htSetter[a]
}break;case"object":for(var c in a){this._htOption._htSetter[c]=jindo.$Fn(a[c],this).bind()}break}return this},fireEvent:function(h,f){f=f||{};var k=this["on"+h],j=this._htEventHandler[h]||[],d=typeof k=="function",c=j.length>0;if(!d&&!c){return true}j=j.concat();f.sType=h;if(typeof f._aExtend=="undefined"){f._aExtend=[];f.stop=function(){if(f._aExtend.length>0){f._aExtend[f._aExtend.length-1].bCanceled=true}}}f._aExtend.push({sType:h,bCanceled:false});var b=[f],a,e;for(a=2,e=arguments.length;a<e;
a++){b.push(arguments[a])}if(d){k.apply(this,b)}if(c){var g;for(a=0,g;(g=j[a]);a++){g.apply(this,b)}}return !f._aExtend.pop().bCanceled},attach:function(a,b){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(d,e){this.attach(e,d)},this).bind());return this}var c=this._htEventHandler[a];if(typeof c=="undefined"){c=this._htEventHandler[a]=[]}c.push(b);return this},detach:function(a,c){if(arguments.length==1){jindo.$H(arguments[0]).forEach(jindo.$Fn(function(f,g){this.detach(g,f)
},this).bind());return this}var e=this._htEventHandler[a];if(e){for(var b=0,d;(d=e[b]);b++){if(d===c){e=e.splice(b,1);break}}}return this},detachAll:function(a){var c=this._htEventHandler;if(arguments.length){if(typeof c[a]=="undefined"){return this}delete c[a];return this}for(var b in c){delete c[b]}return this}});jindo.Component.factory=function(f,d){var a=[],e;if(typeof d=="undefined"){d={}}for(var b=0,c;(c=f[b]);b++){e=new this(c,d);a[a.length]=e}return a};jindo.Component.getInstance=function(){if(typeof this._aInstance=="undefined"){this._aInstance=[]
}return this._aInstance};jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false},isActivating:function(){return this._bIsActivating},activate:function(){if(this.isActivating()){return this}this._bIsActivating=true;if(arguments.length>0){this._onActivate.apply(this,arguments)}else{this._onActivate()}return this},deactivate:function(){if(!this.isActivating()){return this}this._bIsActivating=false;if(arguments.length>0){this._onDeactivate.apply(this,arguments)}else{this._onDeactivate()
}return this}}).extend(jindo.Component);jindo.HTMLComponent=jindo.$Class({sTagName:"",$init:function(){},paint:function(){this._onPaint();return this}}).extend(jindo.UIComponent);jindo.HTMLComponent.paint=function(){var b=this.getInstance();for(var a=0,c;(c=b[a]);a++){c.paint()}};jindo.Formatter=jindo.$Class({_aMarks:["\u0000","\uFFFF"],_sPrevValue:null,_oTextRange:null,_bFakeFocus:false,$init:function(c,a){this._el=jindo.$(c);this.option({bPaintOnload:true,bActivateOnload:true,WatchInput:{nInterval:100,bPermanent:true,bActivateOnload:false}});
this.option(a||{});var b=this;this._wfRealBlur=jindo.$Fn(this._realBlur,this);this._wfRealFocus=jindo.$Fn(this._realFocus,this);this._oTextRange=new jindo.TextRange(c);this._oWatchInput=new jindo.WatchInput(c,this.option("WatchInput")).attach({change:function(d){setTimeout(function(){b.paint()},1)}});if(this.option("bPaintOnload")){setTimeout(function(){b.paint()},1)}if(this.option("bActivateOnload")){this.activate()}},getWatchInput:function(){return this._oWatchInput},_splice:function(a,d,b,c){return a.slice(0,d)+c+a.slice(d+b)
},setValue:function(a){this._el.value=a;this.paint();return this},paint:function(){var i=this._el,b=this._oTextRange,j=this._aMarks,k=i.value.toString(),c=b.hasFocus(),d,g;if(c){d=[-1,-1];try{d=b.getSelection()}catch(l){}k=this._splice(this._splice(k,d[1],0,j[1]),d[0],0,j[0])}g={elInput:i,sText:k,sStartMark:j[0],sEndMark:j[1]};if(this.fireEvent("beforeChange",g)){var a=g.sText;if(c){var h=a.indexOf(j[0]);if(h>-1){a=this._splice(a,h,1,"")}d=[h];d[1]=a.indexOf(j[1]);if(d[1]>-1){a=this._splice(a,d[1],1,"")
}var f=this;setTimeout(function(){f._bFakeFocus=true;i.blur()},1);setTimeout(function(){f._oWatchInput.setInputValue(a);i.focus();try{b.setSelection(d[0],d[1])}catch(e){}f.fireEvent("change",{elInput:i})},2);setTimeout(function(){f._bFakeFocus=false},20)}else{this._oWatchInput.setInputValue(a);this.fireEvent("change",{elInput:i})}}return this},_realBlur:function(){if(!this._bFakeFocus){this.getWatchInput().stop();this.fireEvent("blur",{elInput:this._el})}},_realFocus:function(){if(!this._bFakeFocus){this.getWatchInput().start(true);
this.fireEvent("focus",{elInput:this._el})}},_onActivate:function(){this._wfRealBlur.attach(this._el,"blur");this._wfRealFocus.attach(this._el,"focus")},_onDeactivate:function(){this._wfRealBlur.detach(this._el,"blur");this._wfRealFocus.detach(this._el,"focus")}}).extend(jindo.UIComponent);jindo.Dialog=jindo.$Class({$init:function(a){var b={sClassPrefix:"dialog-",LayerPosition:{sPosition:"inside-center",bAuto:true}};this.option(b);this.option(a||{});this._bIsEventAttached=false;this._bIsShown=false;
this._assignHTMLElements();this._initLayerPosition()},_assignHTMLElements:function(){this._elLayer=jindo.$('<div class="'+this.option("sClassPrefix")+'layer"></div>');this._welLayer=jindo.$Element(this._elLayer);this._wfClick=jindo.$Fn(this._onClick,this)},_initLayerPosition:function(){this._oLayerPosition=new jindo.LayerPosition(document.body,this._elLayer,this.option("LayerPosition"))},getLayer:function(){return this._elLayer},getLayerPosition:function(){return this._oLayerPosition},setLayerTemplate:function(a){this._sTemplate=a;
this._template=jindo.$Template(this._sTemplate)},getLayerTemplate:function(){return this._sTemplate},show:function(b,a){if(!this.isShown()){this.attach(a);document.body.appendChild(this._elLayer);this._welLayer.html(this._template.process(b));var c={elLayer:this._elLayer};if(this.fireEvent("beforeShow",c)){this._welLayer.show();this._attachEvents();this.getLayerPosition().setPosition();this._bIsShown=true;this.fireEvent("show",c)}}},hide:function(){if(this.isShown()){var a={elLayer:this._elLayer};
if(this.fireEvent("beforeHide",a)){this.detachAll("close").detachAll("confirm").detachAll("cancel");this._detachEvents();this._welLayer.hide();this._welLayer.leave();this._bIsShown=false;this.fireEvent("hide",a)}}},isShown:function(){return this._bIsShown},_isEventAttached:function(){return this._bIsEventAttached},_attachEvents:function(){if(!this._isEventAttached()){this._wfClick.attach(this._elLayer,"click");this._bIsEventAttached=true}return this},_detachEvents:function(){if(this._isEventAttached()){this._wfClick.detach(this._elLayer,"click");
this._bIsEventAttached=false}return this},_onClick:function(c){var d=this.option("sClassPrefix");var e,b,a;if((e=this._getClosest(("."+d+"close"),c.element))){if(this.fireEvent("close")){this.hide()}}else{if((b=this._getClosest(("."+d+"confirm"),c.element))){if(this.fireEvent("confirm")){this.hide()}}else{if((a=this._getClosest(("."+d+"cancel"),c.element))){if(this.fireEvent("cancel")){this.hide()}}}}},_getClosest:function(b,a){if(jindo.$$.test(a,b)){return a}return jindo.$$.getSingle("! "+b,a)}}).extend(jindo.Component);
jindo.Rolling=jindo.$Class({_oTransition:null,$init:function(a,b){this._el=jindo.$(a);this._elList=jindo.$$.test(this._el,"ul, ol")?this._el:jindo.$$.getSingle("> ul, > ol",a);this.option({nFPS:50,nDuration:800,sDirection:"horizontal",fEffect:jindo.Effect.linear});this.option(b||{});this._oKeys=this.option("sDirection")=="horizontal"?{offsetWidth:"offsetWidth",marginLeft:"marginLeft",marginRight:"marginRight",clientWidth:"clientWidth",scrollLeft:"scrollLeft"}:{offsetWidth:"offsetHeight",marginLeft:"marginTop",marginRight:"marginBottom",clientWidth:"clientHeight",scrollLeft:"scrollTop"};
this._initTransition()},_initTransition:function(){var a=this;this._oTransition=new jindo.Transition().fps(this.option("nFPS")).attach({end:function(b){a.fireEvent("afterMove",{nIndex:a.getIndex()})}})},getTransition:function(){return this._oTransition},getList:function(){return this._elList},getItems:function(){return jindo.$$("> li",this._elList)},_offsetSize:function(c){var a=jindo.$Element(c),e=this._oKeys,d=parseInt(a.css(e.marginLeft),10)||0,b=parseInt(a.css(e.marginRight),10)||0;return c[e.offsetWidth]+d+b
},getIndex:function(){if(this.isMoving()){return this._nMoveTo}var a=this._el,g=this._oKeys,f=a[g.scrollLeft],c=this.getItems(),j=0,b=0,h=99999999;for(var e=0;e<c.length;e++){var d=Math.abs(f-j);if(d<h){h=d;b=e}j+=this._offsetSize(c[e])}return b},_getPosition:function(g){var d=this._el,f=this._oKeys,b=this.getItems(),e=0,a=this._getSize();for(var c=0;c<g;c++){e+=this._offsetSize(b[c])}if(e+d[f.clientWidth]>a){e=a-d[f.clientWidth]}return e},_getSize:function(){var c=this.getItems(),b=0;for(var a=0;
a<c.length;a++){b+=this._offsetSize(c[a])}return(this._nSize=b)},_move:function(e){var a=this._el,d=this._oKeys,h=this.getItems(),b=this._getPosition(e),g=this._getSize();var c={element:a,nIndex:e,nScroll:b};if(this.fireEvent("beforeMove",c)&&a[d.scrollLeft]!=c.nScroll){var f={};f[d.scrollLeft]=this.option("fEffect")(c.nScroll);this._nMoveTo=e;this.getTransition().abort().start(this.option("nDuration"),c.element,f);return true}return false},moveTo:function(a){a=Math.min(a,this.getItems().length-1);
a=Math.max(a,0);return this._move(a)},moveLastTo:function(a){return this.moveTo(this.getItems().length-1-a)},moveBy:function(a){return this.moveTo(this.getIndex()+a)},isMoving:function(){return this._oTransition.isPlaying()},isOverflowed:function(){return this._getSize()>this._el[this._oKeys.clientWidth]},getDisplayedItemCount:function(){var a=0,c=this.getItems(),b=0;for(var d=0;d<c.length;d++){b+=this._offsetSize(c[d]);if(b<=this._el[this._oKeys.clientWidth]){a++}else{break}}return a}}).extend(jindo.Component);
jindo.ScrollBar=new jindo.$Class({_bMouseEnter:false,_bIsEventAttachedForCommon:false,_bIsEventAttachedForVertical:false,_bIsEventAttachedForHorizontal:false,$init:function(a,b){this.option({sClassPrefix:"scrollbar-",nDelta:16,sClassNameForRollover:"rollover",bActivateOnload:true});this.option(b||{});this._el=jindo.$(a);this._oTimer=new jindo.Timer();this._oTransition=new jindo.Transition().fps(30);this._wfOnMouseEnter=jindo.$Fn(this._onMouseEnter,this);this._wfOnMouseLeave=jindo.$Fn(this._onMouseLeave,this);
this._wfOnWheel=jindo.$Fn(this._onWheel,this);this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);this._assignHTMLElements();if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){var c=this._el,b=this.option("sClassPrefix");this._elBox=jindo.$$.getSingle("."+b+"box",c);this._elContent=jindo.$$.getSingle("."+b+"content",c);var f=jindo.$Element(this._elBox),e=jindo.$Element(this._elContent);this._oBoxSize={nWidth:f.width(),nHeight:f.height()};this._oContentSize={nWidth:e.width(),nHeight:e.height()};
this._oHorizontal={elScrollBar:jindo.$$.getSingle("."+b+"h",c)};var d=this._oHorizontal;if(d.elScrollBar){d.elTrack=jindo.$$.getSingle("."+b+"track",d.elScrollBar);d.elThumb=jindo.$$.getSingle("."+b+"thumb",d.elTrack);d.elThumbHead=jindo.$$.getSingle("."+b+"thumb-head",d.elThumb);d.elThumbBody=jindo.$$.getSingle("."+b+"thumb-body",d.elThumb);d.elThumbFoot=jindo.$$.getSingle("."+b+"thumb-foot",d.elThumb);d.elButtonLeft=jindo.$$.getSingle("."+b+"button-left",d.elScrollBar);d.elButtonRight=jindo.$$.getSingle("."+b+"button-right",d.elScrollBar)
}this._oVertical={elScrollBar:jindo.$$.getSingle("."+b+"v",c)};var a=this._oVertical;if(a.elScrollBar){a.elTrack=jindo.$$.getSingle("."+b+"track",a.elScrollBar);a.elThumb=jindo.$$.getSingle("."+b+"thumb",a.elTrack);a.elThumbHead=jindo.$$.getSingle("."+b+"thumb-head",a.elThumb);a.elThumbBody=jindo.$$.getSingle("."+b+"thumb-body",a.elThumb);a.elThumbFoot=jindo.$$.getSingle("."+b+"thumb-foot",a.elThumb);a.elButtonUp=jindo.$$.getSingle("."+b+"button-up",a.elScrollBar);a.elButtonDown=jindo.$$.getSingle("."+b+"button-down",a.elScrollBar)
}},getBox:function(){return this._elBox},getContent:function(){return this._elContent},getDefaultBoxSize:function(){return this._oBoxSize},getDefaultContentSize:function(){return this._oContentSize},getScrollBarHorizontal:function(){return this._oHorizontal},getScrollBarVertical:function(){return this._oVertical},getSliderHorizontal:function(){return this._oSliderHorizontal||null},getSliderVertical:function(){return this._oSliderVertical||null},getRolloverArea:function(){return this._oRolloverArea
},_attachEvent:function(h){var c=this.option("sClassPrefix"),g=this,d=this.getScrollBarHorizontal(),a=this.getScrollBarVertical();function f(j){if(j.elScrollBar){var i=g.option("sClassNameForRollover");jindo.$Element(j.elTrack).addClass(i);jindo.$Element(j.elThumb).addClass(i);if(j.elButtonLeft){jindo.$Element(j.elButtonLeft).addClass(i)}if(j.elButtonRight){jindo.$Element(j.elButtonRight).addClass(i)}if(j.elButtonUp){jindo.$Element(j.elButtonUp).addClass(i)}if(j.elButtonDown){jindo.$Element(j.elButtonDown).addClass(i)
}}}function e(){if(!g._bIsEventAttachedForHorizontal){f(d)}g._bIsEventAttachedForHorizontal=true}function b(){if(!g._bIsEventAttachedForVertical){f(a)}g._bIsEventAttachedForVertical=true}if(!this._bIsEventAttachedForCommon){this._initSliders();this._initRolloverArea();this._wfOnMouseEnter.attach(this._el,"mouseenter");this._wfOnMouseLeave.attach(this._el,"mouseleave");this._wfOnWheel.attach(document,"mousewheel");this._wfOnMouseUp.attach(document,"mouseup");this._bIsEventAttachedForCommon=true;jindo.$Element(this._el).removeClass(c+"noscript")
}if(!h){e();b()}if(h=="horizontal"){e()}if(h=="vertical"){b()}},_detachEvent:function(g){var b=this.option("sClassPrefix"),f=this,c=this.getScrollBarHorizontal(),h=this.getScrollBarVertical();function e(j){if(j.elScrollBar){var i=f.option("sClassNameForRollover");jindo.$Element(j.elTrack).removeClass(i);jindo.$Element(j.elThumb).removeClass(i);if(j.elButtonLeft){jindo.$Element(j.elButtonLeft).removeClass(i)}if(j.elButtonRight){jindo.$Element(j.elButtonRight).removeClass(i)}if(j.elButtonUp){jindo.$Element(j.elButtonUp).removeClass(i)
}if(j.elButtonDown){jindo.$Element(j.elButtonDown).removeClass(i)}}}function d(){if(f._bIsEventAttachedForHorizontal){e(c)}f._bIsEventAttachedForHorizontal=false}function a(){if(f._bIsEventAttachedForVertical){e(h)}f._bIsEventAttachedForVertical=false}if(!g){d();a()}else{if(g=="horizontal"){d()}else{if(g=="vertical"){a()}}}if(this._bIsEventAttachedForCommon&&!this._bIsEventAttachedForHorizontal&&!this._bIsEventAttachedForVertical){this._wfOnMouseEnter.detach(this._el,"mouseenter");this._wfOnMouseLeave.detach(this._el,"mouseleave");
this._wfOnWheel.detach(document,"mousewheel");this._wfOnMouseUp.detach(document,"mouseup");this._bMouseEnter=false;this._bIsEventAttachedForCommon=false;this.getRolloverArea().deactivate();jindo.$Element(this._el).addClass(b+"noscript")}},_activateH:function(){var a=this.getSliderHorizontal();if(a){a.activate();this.getBox().scrollLeft=0;this.setScrollLeft(0)}},_activateV:function(){var a=this.getSliderVertical();if(a){a.activate();this.getBox().scrollTop=0;this.setScrollTop(0)}},_onActivate:function(a){this._attachEvent(a||null);
if(!a){this._activateH();this._activateV();jindo.$Element(this._el).removeClass(this.option("sClassPrefix")+"noscript");return}if(a=="horizontal"){this._activateH();return}if(a=="vertical"){this._activateV();return}},_deactivateH:function(){var a=this.getSliderHorizontal();if(a){a.deactivate();this.getContent().style.left="0px";this.getBox().scrollLeft=0}},_deactivateV:function(){var a=this.getSliderVertical();if(a){a.deactivate();this.getContent().style.top="0px";this.getBox().scrollTop=0}},_onDeactivate:function(a){this._detachEvent(a||null);
if(!a){this._deactivateH();this._deactivateV();jindo.$Element(this._el).addClass(this.option("sClassPrefix")+"noscript");return}if(a=="horizontal"){this._deactivateH();return}if(a=="vertical"){this._deactivateV();return}},_initSliders:function(){var c=this,a=this.option("sClassPrefix"),b=this.getScrollBarHorizontal(),d=this.getScrollBarVertical();if(b.elScrollBar){this._nScrollWidth=jindo.$Element(this._elContent).width()-jindo.$Element(this._elBox).width();this._oSliderHorizontal=new jindo.Slider(b.elTrack,{sClassPrefix:a,bVertical:false,nMinValue:0,nMaxValue:this._nScrollWidth});
this._oSliderHorizontal._oTransition=new jindo.Transition().fps(30);this._oSliderHorizontal.attach({beforeChange:function(h){var g=jindo.$Element(this.getTrack()).width(),e=jindo.$Element(this.getThumb(h.nIndex)).width(),f=g-e;h.nPos=Math.min(h.nPos,f);h.nPos=Math.max(h.nPos,0);if(h.bJump){h.stop();this._oTransition.abort().start(200,this.getThumb(h.nIndex),{"@left":jindo.Effect.easeOut(h.nPos+"px")}).attach({playing:function(i){c.setScrollLeft(c._oSliderHorizontal._getValue(0,parseInt(i.sValue,10)))
}})}else{c.setScrollLeft(this._getValue(0,h.nPos))}}})}if(d.elScrollBar){this._nScrollHeight=jindo.$Element(this._elContent).height()-jindo.$Element(this._elBox).height();this._oSliderVertical=new jindo.Slider(d.elTrack,{sClassPrefix:a,bVertical:true,nMinValue:0,nMaxValue:this._nScrollHeight});this._oSliderVertical._oTransition=new jindo.Transition().fps(30);this._oSliderVertical.attach({beforeChange:function(g){var f=jindo.$Element(this.getTrack()).height(),h=jindo.$Element(this.getThumb(g.nIndex)).height(),e=f-h;
g.nPos=Math.min(g.nPos,e);g.nPos=Math.max(g.nPos,0);if(g.bJump){g.stop();this._oTransition.abort().start(200,this.getThumb(g.nIndex),{"@top":jindo.Effect.easeOut(g.nPos+"px")}).attach({playing:function(i){c.setScrollTop(c._oSliderVertical.values(0))}})}else{c.setScrollTop(this._getValue(0,g.nPos))}}})}},_initRolloverArea:function(){var b=this,a=this.option("sClassPrefix"),c=this.option("sClassNameForRollover");this._oRolloverArea=new jindo.RolloverArea(this._el,{sClassName:c,sClassPrefix:a}).attach({over:function(d){d.stop();
b._onRollover("over",d.element)},down:function(d){d.stop();b._onMouseDown(d.element);b._onRollover("down",d.element)},up:function(d){d.stop();b._onMouseUp(d.element);b._onRollover("up",d.element)},out:function(d){d.stop();b._onRollover("out",d.element)}})},reset:function(){var a=this.getSliderHorizontal(),b=this.getSliderVertical();if(a){this._nScrollWidth=jindo.$Element(this._elContent).width()-jindo.$Element(this._elBox).width();a.option("nMaxValue",this._nScrollWidth);this.setScrollLeft(0)}if(b){this._nScrollHeight=jindo.$Element(this._elContent).height()-jindo.$Element(this._elBox).height();
b.option("nMaxValue",this._nScrollHeight);this.setScrollTop(0)}this._elBox.scrollLeft=0;this._elBox.scrollTop=0},hasScrollBarHorizontal:function(){var b=this.option("sClassPrefix"),a=this.getScrollBarHorizontal();if(a.elScrollBar){var c=jindo.$Element(a.elScrollBar);return c.visible()||c.hasClass(b+"show")}return false},hasScrollBarVertical:function(){var b=this.option("sClassPrefix"),a=this.getScrollBarVertical();if(a.elScrollBar){var c=jindo.$Element(a.elScrollBar);return c.visible()||c.hasClass(b+"show")
}return false},setScrollTop:function(a){a=Math.min(a,this._nScrollHeight);a=Math.max(a,0);a=Math.round(a);var b={sDirection:"top",nPosition:a};jindo.$Element(this._elContent).css("top",(b.nPosition*-1)+"px");var c=this.getSliderVertical();if(c){c.values(0,b.nPosition,false)}this._fireScrollEvent(b)},setScrollLeft:function(a){a=Math.min(a,this._nScrollWidth);a=Math.max(a,0);a=Math.round(a);var c={sDirection:"left",nPosition:a};jindo.$Element(this._elContent).css("left",(c.nPosition*-1)+"px");var b=this.getSliderHorizontal();
if(b){b.values(0,c.nPosition,false)}this._fireScrollEvent(c)},setScrollTopBy:function(a){this.setScrollTop(this.getScrollTop()+a)},setScrollLeftBy:function(a){this.setScrollLeft(this.getScrollLeft()+a)},getScrollTop:function(a){return parseInt(jindo.$Element(this._elContent).css("top"),10)*-1},getScrollLeft:function(a){return parseInt(jindo.$Element(this._elContent).css("left"),10)*-1},_getElementType:function(a){var b=this.option("sClassPrefix");if(a.hasClass(b+"track")){return"track"}else{if(a.hasClass(b+"thumb")){return"thumb"
}else{if(a.hasClass(b+"button-up")){return"button-up"}else{if(a.hasClass(b+"button-up")){return"button-up"}else{if(a.hasClass(b+"button-down")){return"button-down"}else{if(a.hasClass(b+"button-left")){return"button-left"}else{if(a.hasClass(b+"button-right")){return"button-right"}else{return false}}}}}}}},_fireScrollEvent:function(a){this.fireEvent("scroll",a)},_onWheel:function(f){if(!this._bMouseEnter){return}f.stop(jindo.$Event.CANCEL_DEFAULT);var a=f.mouse().delta,d=a/Math.abs(a)*-1,c=Math.ceil(Math.abs(a))*d*this.option("nDelta"),e=this.hasScrollBarHorizontal(),b=this.hasScrollBarVertical();
if(!e&&!b){return}if(this.hasScrollBarVertical()&&this._bIsEventAttachedForVertical){this.setScrollTop(this.getScrollTop()+c);return}this.setScrollLeft(this.getScrollLeft()+c)},_onMouseDown:function(e){var d=jindo.$Element(e),c=this,b,a=this._getElementType(d);switch(a){case"button-up":b=function(f){c.setScrollTopBy(~~(f*-1))};break;case"button-down":b=function(f){c.setScrollTopBy(f)};break;case"button-left":b=function(f){c.setScrollLeftBy(~~(f*-1))};break;case"button-right":b=function(f){c.setScrollLeftBy(f)
};break;default:return}this._oTimer.start(function(){b(16);return true},100)},_onMouseUp:function(a){this._oTimer.abort()},_onMouseEnter:function(a){this._bMouseEnter=true},_onMouseLeave:function(a){this._bMouseEnter=false},_onRollover:function(a,d){var b=jindo.$Element(d),c=this.option("sClassPrefix"),e=this._getElementType(b);switch(a){case"over":b.addClass(c+e+"-over");break;case"down":b.addClass(c+e+"-hold");break;case"up":b.removeClass(c+e+"-hold");break;case"out":b.removeClass(c+e+"-over");
break}}}).extend(jindo.UIComponent);jindo.Tree=jindo.$Class({_bIsActivating:false,_sTemplate:null,_htNodeData:null,_el:null,_elSelectedNode:null,$init:function(d,a){this.option({sClassPrefix:"tree-",sEventSelect:"click",sEventExpand:"dblclick",bExpandOnSelect:true,bActivateOnload:true});this.option(a||{});var c=this.option("sClassPrefix");this.htClassName={sNode:c+"node",sLastNode:c+"last-node",sHasChild:c+"has-child",sButton:c+"button",sLabel:c+"label",sSelected:c+"selected",sCollapsed:c+"collapsed"};
this.setNodeTemplate('<li class="{=sNodeClass}{if bLastNode} {=sLastNodeClass}{/if}"><div{if bHasChild} class="{=sHasChildClass}"{/if}><button class="{=sButtonClass}">+</button><span class="{=sLabelClass}" unselectable="on">{=sText}</span></div></li>');this._htNodeData={};d=jindo.$(d);this._setRootList(d);this._wfSelectHandler=jindo.$Fn(this._onSelectEvent,this);this._wfExpandHandler=jindo.$Fn(this._onExpandEvent,this);this._makeNodeDataKeyFromHTML();this.paintAllNodes();var b=jindo.$$.getSingle("."+this.htClassName.sNode+" > ."+this.htClassName.sSelected,this.getRootList());
if(b){this._setSelectedNode(this.getNode(b))}if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){var a=this.getRootList();this._wfSelectHandler.attach(a,this.option("sEventSelect"));this._wfExpandHandler.attach(a,this.option("sEventExpand"))},_onDeactivate:function(){var a=this.getRootList();this._wfSelectHandler.detach(a,this.option("sEventSelect"));this._wfExpandHandler.detach(a,this.option("sEventExpand"))},_onSelectEvent:function(b){var d=b.element;var a=this.getNode(d);
if(!a){return}var c=jindo.$$.test(d,"."+this.htClassName.sButton)?d:jindo.$$.getSingle("! ."+this.htClassName.sButton,d);if(c){if(this.isCollapsed(a)){this.expandNode(a)}else{this.collapseNode(a)}return}var f=jindo.$$.test(d,"."+this.htClassName.sLabel)?d:jindo.$$.getSingle("! ."+this.htClassName.sLabel,d);if(f){var e=this.getPartsOfNode(a);if(e.elItem){if(this.fireEvent(b.type,{element:a,weEvent:b})){this.selectNode(a)}}}},_onExpandEvent:function(b){var c=b.element;var a=this.getNode(c);if(!a||!this.hasChild(a)){return
}var f=jindo.$$.test(c,"."+this.htClassName.sLabel)?c:jindo.$$.getSingle("! ."+this.htClassName.sLabel,c);if(f){var d={element:a,weEvent:b};var e=this.getPartsOfNode(a);if(e.elItem&&jindo.$Element(e.elItem).visible()){if(this.isCollapsed(a)){if(this.fireEvent(b.type,d)){this.expandNode(a)}}else{if(!this._bExpandOnSelect){if(this.fireEvent(b.type,d)){this.collapseNode(a)}}}}}},paintNode:function(d,b){if(typeof b=="undefined"){b=true}this._paintNode(d);if(b){var c=this.getChildNodes(d);for(var a=0;
a<c.length;a++){this.paintNode(c[a])}}return this},paintAllNodes:function(a){this.paintNode(a||this.getRootNode());return this},_paintNode:function(c){var a=this.getPartsOfNode(c);var f=this.getChildNodes(c);var g=this.getNodeData(c);var e=jindo.$Element(c);var d=jindo.$Element(a.elItem);delete g._aChildren;if(f.length>0){d.addClass(this.htClassName.sHasChild);g._aChildren=[];var b=this;jindo.$A(f).forEach(function(h,i){g._aChildren.push(b.getNodeData(h))})}else{d.removeClass(this.htClassName.sHasChild);
if(a.elChild){a.elChild.parentNode.removeChild(a.elChild)}}g.bLastNode=jindo.$$.getSingle("~ ."+this.htClassName.sNode,c)?false:true;if(g.bLastNode){e.addClass(this.htClassName.sLastNode)}else{e.removeClass(this.htClassName.sLastNode)}c.parentNode.style.zoom=1},getNodeTemplate:function(){return this._sTemplate},setNodeTemplate:function(a){this._sTemplate=a;return this},getChildListOfNode:function(a){return jindo.$$.getSingle("ul",a)},getRootList:function(){return this._el},_setRootList:function(a){this._el=a
},getNode:function(b){var a=jindo.$$.test(b,"."+this.htClassName.sNode)?b:jindo.$$.getSingle("! ."+this.htClassName.sNode,b);return a&&jindo.$Element(a).isChildOf(this.getRootList())?a:null},getPartsOfNode:function(a){var b=jindo.$$("> *",a);return{elItem:b[0],elChild:b[1]}},getNodeType:function(a){if(a===this.getRootNode()){return"root"}else{if(this.getChildNodes(a).length>0){return"internal"}else{return"leaf"}}},getRootNode:function(){if(this._elRootNode){return this._elRootNode}this._elRootNode=jindo.$$.getSingle("."+this.htClassName.sNode,this.getRootList());
return this._elRootNode},getAllNodes:function(){return jindo.$$("."+this.htClassName.sNode,this.getRootList())},getChildNodes:function(b){var a=this.getChildListOfNode(b);return a?jindo.$$("> ."+this.htClassName.sNode,a):[]},hasChild:function(b){var a=this.getPartsOfNode(b);return a.elChild&&a.elChild.getElementsByTagName("li")[0]?true:false},getParentNode:function(b){var a=this.getRootNode();if(b===a){return null}return this.getNode(b.parentNode)},getPreviousNode:function(a){var b=jindo.$$.getSingle("!~ ."+this.htClassName.sNode,a);
return b?this.getNode(b):null},getNextNode:function(a){var b=jindo.$$.getSingle("~ ."+this.htClassName.sNode,a);return b?this.getNode(b):null},getSelectedNode:function(){return this._elSelectedNode},_setSelectedNode:function(a){this._elSelectedNode=a},isCollapsed:function(a){return jindo.$Element(a).hasClass(this.htClassName.sCollapsed)},getNodeDepth:function(a){var b=-1;for(;a;a=a.parentNode){if(a==this.getRootList()){break}if(jindo.$$.test(a,"."+this.htClassName.sNode)){b++}}return b},setNodeData:function(d,b){var a=this._getNodeDataKey(d);
delete b._aChildren;delete b.sLabel;for(var c in b){this._htNodeData[a][c]=b[c]}return this},getNodeLabelElement:function(a){return jindo.$$.getSingle("."+this.htClassName.sLabel,a)},getNodeLabel:function(a){return jindo.$Element(this.getNodeLabelElement(a)).html()},setNodeLabel:function(b,c){var a=this._getNodeDataKey(b);this._htNodeData[a]["sLabel"]=c;jindo.$Element(this.getNodeLabelElement(b)).html(c);return this},_makeNodeDataKeyFromHTML:function(){var b=this.getAllNodes();for(var a=0;a<b.length;
a++){var c=b[a];this._makeNodeDataKey(c);this._makeNodeData(c)}},_makeNodeDataKey:function(c){var f=jindo.$Element(c);var g=this._getNodeDataKey(c);if(g){return false}var a=this.option("sClassPrefix");var b=("data-"+new Date().getTime()+parseInt(Math.random()*10000000,10)).toString();var e=a+b;f.addClass(e);var d=this._getNodeDataKey(c);this._htNodeData[d]={};return d},_makeNodeData:function(a){var b=this.getNodeData(a);b.element=a;b.sLabel=jindo.$Element(this.getNodeLabelElement(a)).text();b.bLastNode=jindo.$$.getSingle("~ ."+this.htClassName.sNode,a)?false:true
},_getNodeDataKey:function(a){var d=a.className;var c=this.option("sClassPrefix");var b=new RegExp("("+c+"data-[0-9]+)");if(b.test(d)){return RegExp.$1}return null},getNodeData:function(a){return(a)?this._htNodeData[this._getNodeDataKey(a)]:this._htNodeData},_clearNodeData:function(d){var c=this.getParentNode(d);var g=this.getNodeData(d);var f=this._getNodeDataKey(d);if(c){var e=this.getNodeData(c);if(e){var a=jindo.$A(e._aChildren).indexOf(g);e._aChildren.splice(a,1)}}var b=this;if(this.hasChild(d)){jindo.$A(this.getChildNodes(d)).forEach(function(h){b._clearNodeData(h)
})}delete this._htNodeData[f]},expandNode:function(c,f){if(!this.fireEvent("beforeExpand",{element:c})){return}var b=this.getPartsOfNode(c);var e=[];if(jindo.$$.test(b.elItem,"."+this.htClassName.sHasChild)){e.push(c)}if(f){e=e.concat(jindo.$$("."+this.htClassName.sHasChild,c))}for(var d=0,g;(g=e[d]);d++){var a=this.getNode(g);jindo.$Element(a).removeClass(this.htClassName.sCollapsed);this.fireEvent("expand",{element:a})}return this},collapseNode:function(c,f){if(!this.fireEvent("beforeCollapse",{element:c})){return
}var b=this.getPartsOfNode(c);var e=[];if(jindo.$$.test(b.elItem,"."+this.htClassName.sHasChild)){e.push(c)}if(f){e=e.concat(jindo.$$("."+this.htClassName.sHasChild,c))}for(var d=0,g;(g=e[d]);d++){var a=this.getNode(g);jindo.$Element(a).addClass(this.htClassName.sCollapsed);this.fireEvent("collapse",{element:a})}return this},selectNode:function(e){var b=this.getPartsOfNode(e);var a=this.getSelectedNode();var d=b.elItem;if(!this.fireEvent("beforeSelect",{element:e})){return false}if(a!=e){this.deselectNode();
jindo.$Element(d).addClass(this.htClassName.sSelected);this._setSelectedNode(e)}this.fireEvent("select",{element:e});if(this.option("bExpandOnSelect")&&a!=e&&this.isCollapsed(e)){var c=this;this._bExpandOnSelect=true;setTimeout(function(){c._bExpandOnSelect=false},500);this.expandNode(e)}return true},deselectNode:function(){var a=this.getSelectedNode();if(a){jindo.$Element(this.getPartsOfNode(a).elItem).removeClass(this.htClassName.sSelected)}this._setSelectedNode(null);return this},_createChild:function(a){var b=this.getChildListOfNode(a);
if(!b){b=jindo.$("<ul>");a.appendChild(b)}try{return b}finally{b=null}},removeNode:function(b){if(!b||b===this.getRootNode()){this.clearNode(b);return this}var a=this.getParentNode(b);this._clearNodeData(b);b.parentNode.removeChild(b);this.selectNode(a);this._paintNode(a);return this},clearNode:function(c){var a=this.getChildListOfNode(c);if(a){var b=a.getElementsByTagName("li");for(var d=0,e;(e=b[d]);d++){this._clearNodeData(e)}a.parentNode.removeChild(a);this._paintNode(c);return true}return false
},clearTree:function(){this.clearNode(this.getRootNode());return this},_moveNodes:function(e,b,a){for(var d=0,c;(c=b[d]);d++){a(c)}},appendNode:function(a,c){if(!(c instanceof Array)){return arguments.callee.call(this,a,[c])}var d=this;var b=this._createChild(a);this._moveNodes(a,c,function(f){var e=null;e=d.getParentNode(f);b.appendChild(f);if(e){d.paintNode(e,false);jindo.$A(d.getChildNodes(e)).forEach(function(g){d.paintNode(g,false)})}});this.paintNode(a,false);jindo.$A(this.getChildNodes(a)).forEach(function(e){d.paintNode(e,false)
});return this},insertNodeBefore:function(b,d){if(b==this.getRootNode()){return}if(!(d instanceof Array)){return arguments.callee.call(this,b,[d])}var a=this;var c=b.parentNode;this._moveNodes(b,d,function(f){var e=null;e=a.getNode(c);c.insertBefore(f,b);if(e){jindo.$A(a.getChildNodes(e)).forEach(function(g){a.paintNode(g,false)})}});return this},insertNodeAfter:function(e,c){if(e==this.getRootNode()){return}if(!(c instanceof Array)){return arguments.callee.call(this,e,[c])}var d=this;var b=e.parentNode;
var a=e;this._moveNodes(e,c,function(g){var f=null;f=d.getNode(b);b.insertBefore(g,a.nextSibling);a=g;if(f){jindo.$A(d.getChildNodes(f)).forEach(function(h){d.paintNode(h,false)})}});return this},_getCode:function(a){if(a instanceof Array){var g=[];var d=this.getNodeTemplate();for(var c=0;c<a.length;c++){var b=a[c];var e={sTemplate:d,htData:b};this.fireEvent("beforeProcessData",e);var h={sNodeClass:this.htClassName.sNode,bLastNode:(c==a.length-1)?true:false,sLastNodeClass:this.htClassName.sLastNode,bHasChild:(typeof b._aChildren!="undefined"&&b._aChildren.length>0)?true:false,sHasChildClass:this.htClassName.sHasChild,sCollapsedClass:this.htClassName.sCollapsed,sButtonClass:this.htClassName.sButton,sLabelClass:this.htClassName.sLabel,sText:b.sLabel};
var f=jindo.$Template(e.sTemplate).process(h);f=this._getChildCode(b._aChildren,f);g.push(f)}return g.join("\n")}},_getChildCode:function(b,c){var a=b?this._getCode(b):"";if(a){var d=false;c=c.replace(/(<ul(\s[^>]*)*>)(<\/ul>)/i,function(h,f,e,g){d=true;return f+a+g});if(!d){c=c.replace(/<\/li>/i,function(e){return"\n<ul>"+a+"</ul>\n"+e})}}return c},_setData:function(c,g){var a=jindo.$$("> ."+this.htClassName.sNode,c);for(var d=0;d<a.length;d++){var b=a[d];var f=g[d];var e=this._makeNodeDataKey(b);
this._htNodeData[e]=g[d];if(typeof f._aChildren!="undefined"){this._setData(this.getChildListOfNode(b),f._aChildren)}}},createNode:function(a){var c=jindo.$("<ul>");c.innerHTML=this._getCode(a);var b=jindo.$$("> ."+this.htClassName.sNode,c);this._setData(c,a);return b},getNodeRawData:function(a){return this.getNodeData(a)},getSelectCount:function(){return this}}).extend(jindo.UIComponent);jindo.TextRange=jindo.$Class({$init:function(a,b){this.option({bActivateOnload:true});this.option(b||{});this._el=jindo.$(a);
this._bFocused=false;this._wfFocus=jindo.$Fn(function(){this._bFocused=true},this);this._wfBlur=jindo.$Fn(function(){this._bFocused=false},this);if(this.option("bActivateOnload")){this.activate()}},_onActivate:function(){this._wfFocus.attach(this._el,"focus").attach(this._el,"keydown");this._wfBlur.attach(this._el,"blur")},_onDeactivate:function(){this._wfFocus.detach(this._el,"focus").detach(this._el,"keydown");this._wfBlur.detach(this._el,"blur")},hasFocus:function(){return this._bFocused},getSelection:function(){var a=this._el;
if(!this._bFocused){this._el.focus()}var c=[-1,-1];if(isNaN(this._el.selectionStart)){var d=document.selection.createRange().duplicate(),b=a.value.length,e=d.text.length;for(var f=0;f<b;f++){if(d.parentElement()!==a){break}d.moveStart("character",-1)}c[1]=d.text.length;c[0]=c[1]-e}else{c[0]=a.selectionStart;c[1]=a.selectionEnd}this.setSelection(c[0],c[1]);return c},setSelection:function(d,a){var c=this._el;if(typeof a=="undefined"){a=d}if(c.setSelectionRange){c.setSelectionRange(d,a)}else{if(c.createTextRange){var b=c.createTextRange();
b.collapse(true);b.moveStart("character",d);b.moveEnd("character",a-d);b.select()}}},copy:function(){if(!this._bFocused){this._el.focus()}var a=this.getSelection();return this._el.value.substring(a[0],a[1])},paste:function(f){if(!this._bFocused){this._el.focus()}var a=this._el,b=this.getSelection(),d=a.value,e=d.substr(0,b[0]),c=d.substr(b[1]);d=e+f+c;a.value=d;this.setSelection(b[0]+f.length)},cut:function(){var a=this.copy();this.paste("");return a}}).extend(jindo.UIComponent);jindo.WatchInput=jindo.$Class({_bTimerRunning:false,_bFocused:false,_sPrevValue:"",$init:function(b,c){var a={nInterval:100,bUseTimerOnIE:false,sKeyEvent:"keyup",bPermanent:false,bActivateOnload:true};
this.option(a);this.option(c||{});this._elInput=jindo.$(b);this._oTimer=new jindo.Timer();this._bIE=jindo.$Agent().navigator().ie;this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyEvent=jindo.$Fn(this._onKeyEvent,this);this._wfStartTimer=jindo.$Fn(this._startTimer,this);this._wfStopTimer=jindo.$Fn(this._stopTimer,this);if(this.option("bActivateOnload")){this.activate(true)}},getInput:function(){return this._elInput},setInputValue:function(a){this.getInput().value=a;
this.setCompareValue(a);return this},getCompareValue:function(){return this._sPrevValue},setCompareValue:function(a){this._sPrevValue=a;return this},fireChangeEvent:function(){var a=this.getInput(),b=a.value;this.setCompareValue(b);this.fireEvent("change",{elInput:a,sText:b});return this},start:function(a){return this.activate(a||false)},stop:function(){return this.deactivate()},_onActivate:function(b){this.setCompareValue("");var a=this.getInput();this._wfFocus.attach(a,"focus");if(this._bIE&&!this.option("bUseTimerOnIE")){this.fireEvent("start");
this._wfKeyEvent.attach(a,this.option("sKeyEvent"))}else{if(this._isTimerRunning()){return}this.fireEvent("start");if(this.option("bPermanent")){this._startTimer()}else{this._wfStartTimer.attach(a,"focus");this._wfStopTimer.attach(a,"blur")}}this._wfBlur.attach(a,"blur");if(b||false){this.compare()}},_onDeactivate:function(){var a=this.getInput();this._wfFocus.detach(a,"focus");this._wfKeyEvent.detach(a,this.option("sKeyEvent"));this._stopTimer();this._wfStartTimer.detach(a,"focus");this._wfStopTimer.detach(a,"blur");
this._wfBlur.detach(a,"blur");this.fireEvent("stop")},getInterval:function(){return this.option("nInterval")},setInterval:function(a){this.option("nInterval",a);return this},_isTimerRunning:function(){return this._bTimerRunning},_startTimer:function(){if(this._isTimerRunning()){return}this._bTimerRunning=true;this.fireEvent("timerStart");this.compare();var a=this;this._oTimer.start(function(){a.compare();return true},this.getInterval())},_stopTimer:function(){if(this._isTimerRunning()){this._oTimer.abort();
this._bTimerRunning=false;this.compare();this.fireEvent("timerStop")}},_onKeyEvent:function(){this.compare()},_onFocus:function(){this._bFocused=true;this.fireEvent("focus")},_onBlur:function(){this._bFocused=false;this.fireEvent("blur")},compare:function(){if(this.getInput().value!=this.getCompareValue()){this.fireChangeEvent()}return this}}).extend(jindo.UIComponent);jindo.Timer=jindo.$Class({$init:function(){this._nTimer=null;this._nLatest=null;this._nRemained=0;this._nDelay=null;this._fRun=null;
this._bIsRunning=false},start:function(b,a){this.abort();this._nRemained=0;this._nDelay=a;this._fRun=b;this._bIsRunning=true;this._nLatest=this._getTime();this.fireEvent("wait");this._excute(this._nDelay,false);return true},isRunning:function(){return this._bIsRunning},_getTime:function(){return new Date().getTime()},_clearTimer:function(){var a=false;if(this._nTimer){clearInterval(this._nTimer);this._bIsRunning=false;a=true}this._nTimer=null;return a},abort:function(){var a=this._clearTimer();if(a){this.fireEvent("abort");
this._fRun=null}return a},pause:function(){var a=this._getTime()-this._nLatest;this._nRemained=Math.max(this._nDelay-a,0);return this._clearTimer()},_excute:function(c,b){var a=this;this._clearTimer();this._bIsRunning=true;this._nTimer=setInterval(function(){if(a._nTimer){a.fireEvent("run");var d=a._fRun();a._nLatest=a._getTime();if(!d){clearInterval(a._nTimer);a._nTimer=null;a._bIsRunning=false;a.fireEvent("end");return}a.fireEvent("wait");if(b){a._excute(a._nDelay,false)}}},c)},resume:function(){if(!this._fRun||this.isRunning()){return false
}this._bIsRunning=true;this.fireEvent("wait");this._excute(this._nRemained,true);this._nRemained=0;return true}}).extend(jindo.Component);jindo.LayerPosition=jindo.$Class({$init:function(c,b,a){this.option({sPosition:"outside-bottom",sAlign:"left",sValign:"",nTop:0,nLeft:0,bAuto:false});this.option(a||{});this.setElement(c);if(b){this.setLayer(b)}if(c&&b){this.setPosition()}this._wfSetPosition=jindo.$Fn(function(){var d=this._elLayer;if(d&&this._welLayer.visible()){if(this.fireEvent("beforeAdjust",{elLayer:d,htCurrentPosition:this.getCurrentPosition(),htAdjustedPosition:this._adjustPosition(this.getCurrentPosition())})){this.setPosition();
this.fireEvent("adjust",{elLayer:d,htCurrentPosition:this.getCurrentPosition()})}}},this);if(this.option("bAuto")){this._wfSetPosition.attach(window,"scroll").attach(window,"resize")}},getElement:function(){return this._el},setElement:function(a){this._el=jindo.$(a);this._wel=jindo.$Element(a);return this},getLayer:function(){return this._elLayer},setLayer:function(a){this._elLayer=jindo.$(a);this._welLayer=jindo.$Element(a);document.body.appendChild(this._elLayer);return this},_isPosition:function(b,a){if(b.sPosition.indexOf(a)>-1){return true
}return false},_setLeftRight:function(i,b){var c=this.getElement(),e=this.getLayer(),g=c.offsetWidth,d=e.offsetWidth;if(c==document.body){g=jindo.$Document().clientSize().width}var a=this._isPosition(i,"left"),h=this._isPosition(i,"right"),f=this._isPosition(i,"inside");if(a){if(f){b.nLeft+=i.nLeft}else{b.nLeft-=d;b.nLeft-=i.nLeft}}else{if(h){b.nLeft+=g;if(f){b.nLeft-=d;b.nLeft-=i.nLeft}else{b.nLeft+=i.nLeft}}else{if(i.sAlign=="left"){b.nLeft+=i.nLeft}if(i.sAlign=="center"){b.nLeft+=(g-d)/2}if(i.sAlign=="right"){b.nLeft+=g-d;
b.nLeft-=i.nLeft}}}return b},_setVerticalAlign:function(c,d){var a=this.getElement(),f=this.getLayer(),e=a.offsetHeight,b=f.offsetHeight;if(a==document.body){e=jindo.$Document().clientSize().height}switch(c.sValign){case"top":d.nTop+=c.nTop;break;case"middle":d.nTop+=(e-b)/2;break;case"bottom":d.nTop+=e-b-c.nTop;break}return d},_adjustScrollPosition:function(a){if(this.getElement()==document.body){var b=jindo.$Document().scrollPosition();a.nTop+=b.top;a.nLeft+=b.left}return a},getPosition:function(r){if(typeof r!="object"){r=this.option()
}if(typeof r.nTop=="undefined"){r.nTop=0}if(typeof r.nLeft=="undefined"){r.nLeft=0}var a,f=this._isPosition(r,"center"),s=this._isPosition(r,"inside"),p=this._isPosition(r,"top"),l=this._isPosition(r,"bottom"),e=this._isPosition(r,"left"),m=this._isPosition(r,"right");if(e){a="left"}if(m){a="right"}if(p){a="top"}if(l){a="bottom"}if(f){a="center"}var b=this.getElement(),q=jindo.$Element(b),n=this.getLayer(),g=jindo.$Element(n),d=q.offset(),o=b.offsetWidth,i=b.offsetHeight,h,c=n.offsetWidth,k=n.offsetHeight,j={nTop:d.top,nLeft:d.left};
if(b==document.body){h=jindo.$Document().clientSize();o=h.width;i=h.height}c+=parseInt(g.css("marginLeft"),10)+parseInt(g.css("marginRight"),10)||0;k+=parseInt(g.css("marginTop"),10)+parseInt(g.css("marginBottom"),10)||0;switch(a){case"center":j.nTop+=(i-k)/2;j.nTop+=r.nTop;j.nLeft+=(o-c)/2;j.nLeft+=r.nLeft;break;case"top":if(s){j.nTop+=r.nTop}else{j.nTop-=r.nTop+k}j=this._setLeftRight(r,j);break;case"bottom":j.nTop+=i;if(s){j.nTop-=r.nTop+k}else{j.nTop+=r.nTop}j=this._setLeftRight(r,j);break;case"left":if(s){j.nLeft+=r.nLeft
}else{j.nLeft-=r.nLeft+c}j=this._setVerticalAlign(r,j);break;case"right":j.nLeft+=o;if(s){j.nLeft-=r.nLeft+c}else{j.nLeft+=r.nLeft}j=this._setVerticalAlign(r,j);break}j=this._adjustScrollPosition(j);return j},setPosition:function(a){var b=jindo.$Element(this.getLayer()),c=b.visible();if(!c){b.show()}b.css("left","-9999px").css("top","0px");if(typeof a=="undefined"){a=this.getPosition()}if(this.option("bAuto")){a=this._adjustPosition(a)}b.css("left",a.nLeft+"px").css("top",a.nTop+"px");if(!c){b.hide()
}return this},getCurrentPosition:function(){var a=jindo.$Element(this.getLayer());return{nTop:parseInt(a.css("top"),10),nLeft:parseInt(a.css("left"),10)}},_isFullyVisible:function(c){var e=this.getLayer(),i=jindo.$Element(e),g=jindo.$Document().scrollPosition(),h=g.top,b=g.left,a=jindo.$Document().clientSize(),d=e.offsetWidth+(parseInt(i.css("marginLeft"),10)+parseInt(i.css("marginRight"),10)||0),f=e.offsetHeight+(parseInt(i.css("marginTop"),10)+parseInt(i.css("marginBottom"),10)||0);if(c.nLeft>=0&&c.nTop>=0&&a.width>=c.nLeft-b+d&&a.height>=c.nTop-h+f){return true
}return false},_mirrorHorizontal:function(a){if(a.sAlign=="center"||a.sPosition=="inside-center"){return a}var b={};for(var c in a){b[c]=a[c]}if(this._isPosition(b,"right")){b.sPosition=b.sPosition.replace(/right/,"left")}else{if(this._isPosition(b,"left")){b.sPosition=b.sPosition.replace(/left/,"right")}else{if(b.sAlign=="right"){b.sAlign="left"}else{if(b.sAlign=="left"){b.sAlign="right"}}}}return b},_mirrorVertical:function(a){if(a.sValign=="middle"||a.sPosition=="inside-center"){return a}var b={};
for(var c in a){b[c]=a[c]}if(this._isPosition(b,"top")){b.sPosition=b.sPosition.replace(/top/,"bottom")}else{if(this._isPosition(b,"bottom")){b.sPosition=b.sPosition.replace(/bottom/,"top")}else{if(b.sValign=="top"){b.sValign="bottom"}else{if(b.sValign=="bottom"){b.sValign="top"}}}}return b},_adjustPosition:function(e){var d=this.option(),b=[];b.push(e);b.push(this.getPosition(this._mirrorHorizontal(d)));b.push(this.getPosition(this._mirrorVertical(d)));b.push(this.getPosition(this._mirrorVertical(this._mirrorHorizontal(d))));
for(var c=0,a;a=b[c];c++){if(this._isFullyVisible(a)){e=a;break}}return e}}).extend(jindo.Component);jindo.Foggy=jindo.$Class({_elFog:null,_bFogAppended:false,_oExcept:null,_bFogVisible:false,_oTransition:null,$init:function(a){this.option({sClassName:"fog",nShowDuration:200,nShowOpacity:0.5,nHideDuration:200,nHideOpacity:0,fShowEffect:jindo.Effect.linear,fHideEffect:jindo.Effect.linear,nFPS:15});this.option(a||{});this._elFog=jindo.$('<div class="'+this.option("sClassName")+'">');this._welFog=jindo.$Element(this._elFog);
document.body.insertBefore(this._elFog,document.body.firstChild);this._welFog.opacity(this.option("nHideOpacity"));this._welFog.hide();this._oExcept={};this._oTransition=new jindo.Transition().fps(this.option("nFPS"));this._fOnResize=jindo.$Fn(this._fitFogToDocument,this);this._fOnScroll=jindo.$Fn(this._fitFogToDocumentScrollSize,this)},_getScroll:function(a){return{top:window.pageYOffset||document[a._docKey].scrollTop,left:window.pageXOffset||document[a._docKey].scrollLeft}},_fitFogToDocument:function(){var b=jindo.$Document();
this._elFog.style.left=this._getScroll(b).left+"px";this._elFog.style.width="100%";var a=this;clearTimeout(this._nTimer);this._nTimer=null;this._nTimer=setTimeout(function(){var c=b.clientSize();a._elFog.style.top=a._getScroll(b).top+"px";a._elFog.style.height=c.height+"px";a._elFog.style.left=a._getScroll(b).left+"px"},100)},_fitFogToDocumentScrollSize:function(){var a=jindo.$Document().scrollSize();this._elFog.style.left="0";this._elFog.style.top="0";this._elFog.style.width=a.width+"px";this._elFog.style.height=a.height+"px"
},getFog:function(){return this._elFog},isShown:function(){return this._bFogVisible},show:function(c){if(!this._bFogVisible){if(this.fireEvent("beforeShow")){if(c){this._oExcept.element=c;var a=jindo.$Element(c).css("position");if(a=="static"){c.style.position="relative"}this._oExcept.position=c.style.position;this._oExcept.zIndex=c.style.zIndex;c.style.zIndex=32001}this._elFog.style.zIndex=32000;this._elFog.style.display="none";this._fitFogToDocument();this._fOnResize.attach(window,"resize");this._fOnScroll.attach(window,"scroll");
this._elFog.style.display="block";var b=this;this._oTransition.abort().start(this.option("nShowDuration"),this._elFog,{"@opacity":this.option("fShowEffect")(this.option("nShowOpacity"))}).start(function(){b._bFogVisible=true;b.fireEvent("show")})}}},hide:function(){if(this._bFogVisible){if(this.fireEvent("beforeHide")){var a=this;this._oTransition.abort().start(this.option("nHideDuration"),this._elFog,{"@opacity":this.option("fHideEffect")(this.option("nHideOpacity"))}).start(function(){a._elFog.style.display="none";
var b=a._oExcept.element;if(b){b.style.position=a._oExcept.position;b.style.zIndex=a._oExcept.zIndex}a._oExcept={};a._fOnResize.detach(window,"resize");a._fOnScroll.detach(window,"scroll");a._bFogVisible=false;a.fireEvent("hide")})}}}}).extend(jindo.Component);jindo.Effect=function(c){if(this instanceof arguments.callee){throw new Error("You can't create a instance of this")}var a=/^(\-?[0-9\.]+)(%|px|pt|em)?$/,b=/^rgb\(([0-9]+)\s?,\s?([0-9]+)\s?,\s?([0-9]+)\)$/i,d=/^#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,f=/^#([0-9A-F])([0-9A-F])([0-9A-F])$/i;
var e=function(g){var h=g,i;if(a.test(g)){h=parseFloat(g);i=RegExp.$2||""}else{if(b.test(g)){h=[parseInt(RegExp.$1,10),parseInt(RegExp.$2,10),parseInt(RegExp.$3,10)];i="color"}else{if(d.test(g=g.replace(f,"#$1$1$2$2$3$3"))){h=[parseInt(RegExp.$1,16),parseInt(RegExp.$2,16),parseInt(RegExp.$3,16)];i="color"}}}return{nValue:h,sUnit:i}};return function(g,h){var i;if(arguments.length>1){g=e(g);h=e(h);i=h.sUnit}else{h=e(g);g=null;i=h.sUnit}if(g&&h&&g.sUnit!=h.sUnit){throw new Error("unit error")}g=g&&g.nValue;
h=h&&h.nValue;var j=function(m){var k=c(m),o=function(q,p){return(p-q)*k+q+i};if(i=="color"){var l=Math.max(0,Math.min(255,parseInt(o(g[0],h[0]),10)))<<16;l|=Math.max(0,Math.min(255,parseInt(o(g[1],h[1]),10)))<<8;l|=Math.max(0,Math.min(255,parseInt(o(g[2],h[2]),10)));l=l.toString(16).toUpperCase();for(var n=0;6-l.length;n++){l="0"+l}return"#"+l}return o(g,h)};if(g===null){j.setStart=function(k){k=e(k);if(k.sUnit!=i){throw new Error("unit eror")}g=k.nValue}}return j}};jindo.Effect.linear=jindo.Effect(function(a){return a
});jindo.Effect.easeInSine=jindo.Effect(function(a){return(a==1)?1:-Math.cos(a*(Math.PI/2))+1});jindo.Effect.easeOutSine=jindo.Effect(function(a){return Math.sin(a*(Math.PI/2))});jindo.Effect.easeInOutSine=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeInSine(0,1)(2*a)*0.5:jindo.Effect.easeOutSine(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeOutInSine=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeOutSine(0,1)(2*a)*0.5:jindo.Effect.easeInSine(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeInQuad=jindo.Effect(function(a){return a*a
});jindo.Effect.easeOutQuad=jindo.Effect(function(a){return -(a*(a-2))});jindo.Effect.easeInOutQuad=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeInQuad(0,1)(2*a)*0.5:jindo.Effect.easeOutQuad(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeOutInQuad=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeOutQuad(0,1)(2*a)*0.5:jindo.Effect.easeInQuad(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeInCubic=jindo.Effect(function(a){return Math.pow(a,3)});jindo.Effect.easeOutCubic=jindo.Effect(function(a){return Math.pow((a-1),3)+1
});jindo.Effect.easeInOutCubic=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeIn(0,1)(2*a)*0.5:jindo.Effect.easeOut(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeOutInCubic=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeOut(0,1)(2*a)*0.5:jindo.Effect.easeIn(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeInQuart=jindo.Effect(function(a){return Math.pow(a,4)});jindo.Effect.easeOutQuart=jindo.Effect(function(a){return -(Math.pow(a-1,4)-1)});jindo.Effect.easeInOutQuart=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeInQuart(0,1)(2*a)*0.5:jindo.Effect.easeOutQuart(0,1)((2*a)-1)*0.5+0.5
});jindo.Effect.easeOutInQuart=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeOutQuart(0,1)(2*a)*0.5:jindo.Effect.easeInQuart(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeInQuint=jindo.Effect(function(a){return Math.pow(a,5)});jindo.Effect.easeOutQuint=jindo.Effect(function(a){return Math.pow(a-1,5)+1});jindo.Effect.easeInOutQuint=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeInQuint(0,1)(2*a)*0.5:jindo.Effect.easeOutQuint(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeOutInQuint=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeOutQuint(0,1)(2*a)*0.5:jindo.Effect.easeInQuint(0,1)((2*a)-1)*0.5+0.5
});jindo.Effect.easeInCircle=jindo.Effect(function(a){return -(Math.sqrt(1-(a*a))-1)});jindo.Effect.easeOutCircle=jindo.Effect(function(a){return Math.sqrt(1-(a-1)*(a-1))});jindo.Effect.easeInOutCircle=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeInCircle(0,1)(2*a)*0.5:jindo.Effect.easeOutCircle(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeOutInCircle=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeOutCircle(0,1)(2*a)*0.5:jindo.Effect.easeInCircle(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeInBack=jindo.Effect(function(a){var b=1.70158;
return(a==1)?1:(a/1)*(a/1)*((1+b)*a-b)});jindo.Effect.easeOutBack=jindo.Effect(function(a){var b=1.70158;return(a===0)?0:(a=a/1-1)*a*((b+1)*a+b)+1});jindo.Effect.easeInOutBack=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeInBack(0,1)(2*a)*0.5:jindo.Effect.easeOutBack(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeInElastic=jindo.Effect(function(c){var d=0,b=0,e;if(c===0){return 0}if((c/=1)==1){return 1}if(!d){d=0.3}if(!b||b<1){b=1;e=d/4}else{e=d/(2*Math.PI)*Math.asin(1/b)}return -(b*Math.pow(2,10*(c-=1))*Math.sin((c-1)*(2*Math.PI)/d))
});jindo.Effect.easeOutElastic=jindo.Effect(function(c){var d=0,b=0,e;if(c===0){return 0}if((c/=1)==1){return 1}if(!d){d=0.3}if(!b||b<1){b=1;e=d/4}else{e=d/(2*Math.PI)*Math.asin(1/b)}return(b*Math.pow(2,-10*c)*Math.sin((c-e)*(2*Math.PI)/d)+1)});jindo.Effect.easeInOutElastic=jindo.Effect(function(c){var d=0,b=0,e;if(c===0){return 0}if((c/=1/2)==2){return 1}if(!d){d=(0.3*1.5)}if(!b||b<1){b=1;e=d/4}else{e=d/(2*Math.PI)*Math.asin(1/b)}if(c<1){return -0.5*(b*Math.pow(2,10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/d))
}return b*Math.pow(2,-10*(c-=1))*Math.sin((c-e)*(2*Math.PI)/d)*0.5+1});jindo.Effect.easeOutBounce=jindo.Effect(function(a){if(a<(1/2.75)){return(7.5625*a*a)}else{if(a<(2/2.75)){return(7.5625*(a-=(1.5/2.75))*a+0.75)}else{if(a<(2.5/2.75)){return(7.5625*(a-=(2.25/2.75))*a+0.9375)}else{return(7.5625*(a-=(2.625/2.75))*a+0.984375)}}}});jindo.Effect.easeInBounce=jindo.Effect(function(a){return 1-jindo.Effect.easeOutBounce(0,1)(1-a)});jindo.Effect.easeInOutBounce=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeInBounce(0,1)(2*a)*0.5:jindo.Effect.easeOutBounce(0,1)((2*a)-1)*0.5+0.5
});jindo.Effect.easeInExpo=jindo.Effect(function(a){return(a===0)?0:Math.pow(2,10*(a-1))});jindo.Effect.easeOutExpo=jindo.Effect(function(a){return(a==1)?1:-Math.pow(2,-10*a/1)+1});jindo.Effect.easeInOutExpo=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeInExpo(0,1)(2*a)*0.5:jindo.Effect.easeOutExpo(0,1)((2*a)-1)*0.5+0.5});jindo.Effect.easeOutInExpo=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.easeOutExpo(0,1)(2*a)*0.5:jindo.Effect.easeInExpo(0,1)((2*a)-1)*0.5+0.5});jindo.Effect._cubicBezier=function(d,b,c,a){return function(h){var e=3*d,g=3*(c-d)-e,j=1-e-g,o=3*b,f=3*(a-b)-o,i=1-o-f;
function n(p){return((j*p+g)*p+e)*p}function m(p){return((i*p+f)*p+o)*p}function k(p){return(3*j*p+2*g)*p+e}function l(s,w){var v,u,r,q,t,p;for(r=s,p=0;p<8;p++){q=n(r)-s;if(Math.abs(q)<w){return r}t=k(r);if(Math.abs(t)<0.000001){break}r=r-q/t}v=0;u=1;r=s;if(r<v){return v}if(r>u){return u}while(v<u){q=n(r);if(Math.abs(q-s)<w){return r}if(s>q){v=r}else{u=r}r=(u-v)*0.5+v}return r}return m(l(h,1/200))}};jindo.Effect.cubicBezier=function(d,b,c,a){return jindo.Effect(jindo.Effect._cubicBezier(d,b,c,a))
};jindo.Effect.cubicEase=jindo.Effect.cubicBezier(0.25,0.1,0.25,1);jindo.Effect.cubicEaseIn=jindo.Effect.cubicBezier(0.42,0,1,1);jindo.Effect.cubicEaseOut=jindo.Effect.cubicBezier(0,0,0.58,1);jindo.Effect.cubicEaseInOut=jindo.Effect.cubicBezier(0.42,0,0.58,1);jindo.Effect.cubicEaseOutIn=jindo.Effect.cubicBezier(0,0.42,1,0.58);jindo.Effect.overphase=jindo.Effect(function(a){a/=0.652785;return(Math.sqrt((2-a)*a)+(0.1*a)).toFixed(5)});jindo.Effect.sinusoidal=jindo.Effect(function(a){return(-Math.cos(a*Math.PI)/2)+0.5
});jindo.Effect.mirror=jindo.Effect(function(a){return(a<0.5)?jindo.Effect.sinusoidal(0,1)(a*2):jindo.Effect.sinusoidal(0,1)(1-(a-0.5)*2)});jindo.Effect.pulse=function(a){return jindo.Effect(function(b){return(-Math.cos((b*(a-0.5)*2)*Math.PI)/2)+0.5})};jindo.Effect.wave=function(b,a){return jindo.Effect(function(c){return(a||1)*(Math.sin(b*(c*360)*Math.PI/180)).toFixed(5)})};jindo.Effect.easeIn=jindo.Effect.easeInCubic;jindo.Effect.easeOut=jindo.Effect.easeOutCubic;jindo.Effect.easeInOut=jindo.Effect.easeInOutCubic;
jindo.Effect.easeOutIn=jindo.Effect.easeOutInCubic;jindo.Effect.bounce=jindo.Effect.easeOutBounce;jindo.Effect.elastic=jindo.Effect.easeInElastic;jindo.Transition=jindo.$Class({_nFPS:30,_aTaskQueue:null,_oTimer:null,_bIsWaiting:true,_bIsPlaying:false,$init:function(a){this._aTaskQueue=[];this._oTimer=new jindo.Timer();this._oSleepTimer=new jindo.Timer();this.option({fEffect:jindo.Effect.linear,bCorrection:false});this.option(a||{})},fps:function(a){if(arguments.length>0){this._nFPS=a;return this}return this._nFPS
},isPlaying:function(){return this._bIsPlaying},abort:function(){this._aTaskQueue=[];this._oTimer.abort();this._oSleepTimer.abort();if(this._bIsPlaying){this.fireEvent("abort")}this._bIsWaiting=true;this._bIsPlaying=false;this._htTaskToDo=null;return this},start:function(a,c,b){if(arguments.length>0){this.queue.apply(this,arguments)}this._prepareNextTask();return this},queue:function(m,l){var g;if(typeof arguments[0]=="function"){g={sType:"function",fTask:arguments[0]}}else{var d=[];if(arguments[1] instanceof Array){d=arguments[1]
}else{var b=[];jindo.$A(arguments).forEach(function(a,i){if(i>0){b.push(a);if(i%2===0){d.push(b.concat());b=[]}}})}g={sType:"task",nDuration:m,aList:[]};for(var k=0,f=d.length;k<f;k++){var j=[],c=d[k][1],h;for(var e in c){h=c[e];if(/^(@|style\.)(\w+)/i.test(e)){j.push(["style",RegExp.$2,h])}else{j.push(["attr",e,h])}}g.aList.push({elTarget:d[k][0],aValue:j})}}this._queueTask(g);return this},pause:function(){if(this._oTimer.abort()){this.fireEvent("pause")}return this},resume:function(){if(this._htTaskToDo){if(this._bIsWaiting===false&&this._bIsPlaying===true){this.fireEvent("resume")
}this._doTask();this._bIsWaiting=false;this._bIsPlaying=true;var a=this;this._oTimer.start(function(){var b=!a._doTask();if(b){a._bIsWaiting=true;setTimeout(function(){a._prepareNextTask()},0)}return !b},this._htTaskToDo.nInterval)}return this},precede:function(a,c,b){this.start.apply(this,arguments);return this},sleep:function(b,a){if(typeof a=="undefined"){a=function(){}}this._queueTask({sType:"sleep",nDuration:b,fCallback:a});this._prepareNextTask();return this},_queueTask:function(a){this._aTaskQueue.push(a)
},_dequeueTask:function(){var n=this._aTaskQueue.shift();if(n){if(n.sType=="task"){var c=n.aList;for(var b=0,k=c.length;b<k;b++){var m=c[b].elTarget,e=jindo.$Element(m);for(var a=0,o=c[b].aValue,g=o.length;a<g;a++){var l=o[a][0],h=o[a][1],f=o[a][2];if(typeof f!="function"){var d=this.option("fEffect");if(f instanceof Array){f=d(f[0],f[1])}else{f=d(f)}o[a][2]=f}if(f.setStart){if(this._isHTMLElement(m)){switch(l){case"style":f.setStart(e.css(h));break;case"attr":f.setStart(e.$value()[h]);break}}else{f.setStart(m.getter(h))
}}}}}return n}else{return null}},_prepareNextTask:function(){if(this._bIsWaiting){var b=this._dequeueTask();if(b){switch(b.sType){case"task":if(!this._bIsPlaying){this.fireEvent("start")}var d=1000/this._nFPS,a=d/b.nDuration;this._htTaskToDo={aList:b.aList,nRatio:0,nInterval:d,nGap:a,nStep:0,nTotalStep:Math.ceil(b.nDuration/d)};this.resume();break;case"function":if(!this._bIsPlaying){this.fireEvent("start")}b.fTask();this._prepareNextTask();break;case"sleep":if(this._bIsPlaying){this.fireEvent("sleep",{nDuration:b.nDuration});
b.fCallback()}var c=this;this._oSleepTimer.start(function(){c.fireEvent("awake");c._prepareNextTask()},b.nDuration);break}}else{if(this._bIsPlaying){this._bIsPlaying=false;this.abort();this.fireEvent("end")}}}},_isHTMLElement:function(a){return("tagName" in a)},_doTask:function(){var r=this._htTaskToDo,s=parseFloat(r.nRatio.toFixed(5),1),g=r.nStep,q=r.nTotalStep,t=r.aList,m={},a=this.option("bCorrection");for(var p=0,c=t.length;p<c;p++){var o=t[p].elTarget,h=jindo.$Element(o);for(var n=0,d=t[p].aValue,u=d.length;
n<u;n++){var e=d[n][0],k=d[n][1],f=d[n][2](s);if(this._isHTMLElement(o)){if(a){var b=/^\-?[0-9\.]+(%|px|pt|em)?$/.test(f)&&RegExp.$1||"";if(b){var l=parseFloat(f);l+=m[k]||0;l=parseFloat(l.toFixed(5));if(p==c-1){f=Math.round(l)+b}else{m[k]=l-Math.floor(l);f=parseInt(l,10)+b}}}switch(e){case"style":h.css(k,f);break;case"attr":h.$value()[k]=f;break}}else{o.setter(k,f)}if(this._bIsPlaying){this.fireEvent("playing",{element:o,sKey:k,sValue:f,nStep:g,nTotalStep:q})}}}r.nRatio=Math.min(r.nRatio+r.nGap,1);
r.nStep+=1;return s!=1}}).extend(jindo.Component);(function(){var a=jindo.$Element.prototype.css;jindo.$Element.prototype.css=function(c,b){if(c=="opacity"){return typeof b!="undefined"?this.opacity(parseFloat(b)):this.opacity()}else{return b!="undefined"?a.call(this,c,b):a.call(this,c)}}})();jindo.DragArea=jindo.$Class({$init:function(a,b){this.option({sClassName:"draggable",bFlowOut:true,bSetCapture:true,nThreshold:0});this.option(b||{});this._el=a;this._bIE=jindo.$Agent().navigator().ie;this._htDragInfo={bPrepare:false};
this._bHandleDown=false;this._bIsDragging=false;this._wfOnMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfOnMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfOnMouseUp=jindo.$Fn(this._onMouseUp,this);this._wfOnDragStart=jindo.$Fn(this._onDragStart,this);this._wfOnSelectStart=jindo.$Fn(this._onSelectStart,this);this.activate()},_findDraggableElement:function(d){if(jindo.$$.test(d,"input[type=text], textarea, select")){return null}var b=this;var a="."+this.option("sClassName");var e=function(f){if(f===null){return false
}if(b._el===document||b._el===f){return true}return jindo.$Element(b._el).isParentOf(f)};var c=jindo.$$.test(d,a)?d:jindo.$$.getSingle("! "+a,d);if(!e(c)){c=null}return c},isDragging:function(){return this._bIsDragging&&!this._htDragInfo.bPrepare},stopDragging:function(){this._stopDragging(true);return this},_stopDragging:function(b){this._wfOnMouseMove.detach(document,"mousemove");this._wfOnMouseUp.detach(document,"mouseup");var c=this._htDragInfo;if(this.isDragging()){var a=jindo.$Element(c.elDrag);
this.fireEvent("dragEnd",{elArea:this._el,elHandle:c.elHandle,elDrag:c.elDrag,nX:parseInt(a.css("left"),10)||0,nY:parseInt(a.css("top"),10)||0,bInterupted:b})}this._bIsDragging=false;this._bForceDrag=false;c.bPrepare=false;if(this._bIE&&this._elSetCapture){this._elSetCapture.releaseCapture();this._elSetCapture=null}},_onActivate:function(){this._wfOnMouseDown.attach(this._el,"mousedown");this._wfOnDragStart.attach(this._el,"dragstart");this._wfOnSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wfOnMouseDown.detach(this._el,"mousedown");
this._wfOnDragStart.detach(this._el,"dragstart");this._wfOnSelectStart.detach(this._el,"selectstart")},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},isEventAttached:function(){return this.isActivating()},startDragging:function(a){var a=this._findDraggableElement(a);if(a){this._bForceDrag=true;this._htDragInfo={bPrepare:true,elHandle:a,elDrag:a};this._wfOnMouseMove.attach(document,"mousemove");this._wfOnMouseUp.attach(document,"mouseup");return true}return false
},_onMouseDown:function(c){if(!c.mouse().left||c.mouse().right){this._stopDragging(true);return}var a=this._findDraggableElement(c.element);if(a){var b=c.pos();this._htDragInfo={bPrepare:true,nButton:c._event.button,elHandle:a,elDrag:a,nPageX:b.pageX,nPageY:b.pageY};this._bHandleDown=true;if(this.fireEvent("handleDown",{elHandle:a,elDrag:a,weEvent:c})){this._wfOnMouseMove.attach(document,"mousemove")}this._wfOnMouseUp.attach(document,"mouseup");c.stop(jindo.$Event.CANCEL_DEFAULT)}},_onMouseMove:function(l){this._bIsDragging=true;
var b=this._htDragInfo,k,o,e=l.pos();if(b.bPrepare){var h=this.option("nThreshold");var m={};if(!this._bForceDrag&&h){m.nPageX=e.pageX-b.nPageX;m.nPageY=e.pageY-b.nPageY;var n=Math.sqrt(m.nPageX*m.nPageX+m.nPageY*m.nPageY);if(h>n){return}}if(this._bIE&&this.option("bSetCapture")){this._elSetCapture=(this._el===document)?document.body:this._findDraggableElement(l.element);if(this._elSetCapture){this._elSetCapture.setCapture(false)}}k={elArea:this._el,elHandle:b.elHandle,elDrag:b.elDrag,htDiff:m,weEvent:l};
if(this.fireEvent("dragStart",k)){var q=jindo.$Element(k.elDrag);b.bPrepare=false;b.elHandle=k.elHandle;b.elDrag=k.elDrag;b.nX=parseInt(q.css("left"),10)||0;b.nY=parseInt(q.css("top"),10)||0;var d=q.offset();b.nClientX=d.left+q.width()/2;b.nClientY=d.top+q.height()/2}else{this._bIsDragging=false;return}}var a={nX:e.pageX-b.nPageX,nY:e.pageY-b.nPageY};if(this._bForceDrag){a.nX=e.clientX-b.nClientX;a.nY=e.clientY-b.nClientY}k={elArea:this._el,elFlowOut:b.elDrag.parentNode,elHandle:b.elHandle,elDrag:b.elDrag,weEvent:l,nX:b.nX+a.nX,nY:b.nY+a.nY,nGapX:a.nX,nGapY:a.nY};
if(this.fireEvent("beforeDrag",k)){var j=b.elDrag;if(this.option("bFlowOut")===false){var g=k.elFlowOut,p=[j.offsetWidth,j.offsetHeight],i=0,c=0;if(g==document.body){g=null}if(g&&p[0]<=g.scrollWidth&&p[1]<=g.scrollHeight){o={nWidth:g.clientWidth,nHeight:g.clientHeight};i=g.scrollLeft;c=g.scrollTop}else{var f=jindo.$Document().clientSize();o={nWidth:f.width,nHeight:f.height}}if(k.nX!==null){k.nX=Math.max(k.nX,i);k.nX=Math.min(k.nX,o.nWidth-p[0]+i)}if(k.nY!==null){k.nY=Math.max(k.nY,c);k.nY=Math.min(k.nY,o.nHeight-p[1]+c)
}}if(k.nX!==null){j.style.left=k.nX+"px"}if(k.nY!==null){j.style.top=k.nY+"px"}this.fireEvent("drag",k)}},_onMouseUp:function(a){this._stopDragging(false);var b=this._htDragInfo;if(this._bHandleDown){this._bHandleDown=false;this.fireEvent("handleUp",{weEvent:a,elHandle:b.elHandle,elDrag:b.elDrag})}},_onDragStart:function(a){if(this._findDraggableElement(a.element)){a.stop(jindo.$Event.CANCEL_DEFAULT)}},_onSelectStart:function(a){if(this._bIsDragging||this._findDraggableElement(a.element)){a.stop(jindo.$Event.CANCEL_DEFAULT)
}}}).extend(jindo.UIComponent);jindo.RolloverArea=jindo.$Class({$init:function(a,b){this.option({sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:true,bActivateOnload:true,htStatus:{sOver:"over",sDown:"down"}});this.option(b||{});this._elArea=jindo.$(a);this._aOveredElements=[];this._aDownedElements=[];this._wfMouseOver=jindo.$Fn(this._onMouseOver,this);this._wfMouseOut=jindo.$Fn(this._onMouseOut,this);this._wfMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfMouseUp=jindo.$Fn(this._onMouseUp,this);
if(this.option("bActivateOnload")){this.activate()}},_addOvered:function(a){this._aOveredElements.push(a)},_removeOvered:function(a){this._aOveredElements.splice(jindo.$A(this._aOveredElements).indexOf(a),1)},_addStatus:function(b,a){jindo.$Element(b).addClass(this.option("sClassPrefix")+a)},_removeStatus:function(b,a){jindo.$Element(b).removeClass(this.option("sClassPrefix")+a)},_isInnerElement:function(a,b){return a===b?true:jindo.$Element(a).isParentOf(b)},_onActivate:function(){this._wfMouseOver.attach(this._elArea,"mouseover");
this._wfMouseOut.attach(this._elArea,"mouseout");if(this.option("bCheckMouseDown")){this._wfMouseDown.attach(this._elArea,"mousedown");this._wfMouseUp.attach(document,"mouseup")}},_onDeactivate:function(){this._wfMouseOver.detach(this._elArea,"mouseover");this._wfMouseOut.detach(this._elArea,"mouseout");this._wfMouseDown.detach(this._elArea,"mousedown");this._wfMouseUp.detach(document,"mouseup");this._aOveredElements.length=0;this._aDownedElements.length=0},_findRollover:function(b){var a=this.option("sClassName");
return jindo.$$.test(b,"."+a)?b:jindo.$$.getSingle("! ."+a,b)},_onMouseOver:function(c){var a=c.element,d=c.relatedElement,b;for(;a=this._findRollover(a);a=a.parentNode){if(d&&this._isInnerElement(a,d)){continue}this._addOvered(a);b={element:a,htStatus:this.option("htStatus"),weEvent:c};if(this.fireEvent("over",b)){this._addStatus(b.element,b.htStatus.sOver)}}},_onMouseOut:function(c){var a=c.element,d=c.relatedElement,b;for(;a=this._findRollover(a);a=a.parentNode){if(d&&this._isInnerElement(a,d)){continue
}this._removeOvered(a);b={element:a,htStatus:this.option("htStatus"),weEvent:c};if(this.fireEvent("out",b)){this._removeStatus(b.element,b.htStatus.sOver)}}},_onMouseDown:function(b){var c=b.element,a;while(c=this._findRollover(c)){a={element:c,htStatus:this.option("htStatus"),weEvent:b};this._aDownedElements.push(c);if(this.fireEvent("down",a)){this._addStatus(a.element,a.htStatus.sDown)}c=c.parentNode}},_onMouseUp:function(c){var e=c.element,f=[],a=this._aDownedElements,g,d,b;for(b=0;d=a[b];b++){f.push({element:d,htStatus:this.option("htStatus"),weEvent:c})
}for(;e=this._findRollover(e);e=e.parentNode){if(jindo.$A(a).indexOf(e)>-1){continue}f.push({element:e,htStatus:this.option("htStatus"),weEvent:c})}for(b=0;g=f[b];b++){if(this.fireEvent("up",g)){this._removeStatus(g.element,g.htStatus.sDown)}}this._aDownedElements=[]}}).extend(jindo.UIComponent);jindo.Calendar=jindo.$Class({$init:function(a,b){this._htToday=this.constructor.getDateHashTable(new Date());this._elLayer=jindo.$(a);this.htDefaultOption={sClassPrefix:"calendar-",nYear:this._htToday.nYear,nMonth:this._htToday.nMonth,nDate:this._htToday.nDate,sTitleFormat:"yyyy-mm",sYearTitleFormat:"yyyy",sMonthTitleFormat:"m",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],bDrawOnload:true};
this.option(this.htDefaultOption);this.option(b||{});this._assignHTMLElements();this.activate();this.setDate(this.option("nYear"),this.option("nMonth"),this.option("nDate"));if(this.option("bDrawOnload")){this.draw()}},getBaseElement:function(){return this._elLayer},getDate:function(){return this._htDate},getDateOfElement:function(b){var a=jindo.$A(this._aDateContainerElement).indexOf(b);if(a>-1){return this._aMetaData[a]}return null},getToday:function(){return this._htToday},setDate:function(c,a,b){this._htDate={nYear:c,nMonth:(a*1),nDate:(b*1)}
},getShownDate:function(){return this._getShownDate()},_getShownDate:function(){return this.htShownDate||this.getDate()},_setShownDate:function(a,b){this.htShownDate={nYear:a,nMonth:(b*1),nDate:1}},_assignHTMLElements:function(){var a=this.option("sClassPrefix"),c=this.getBaseElement();if((this.elBtnPrevYear=jindo.$$.getSingle(("."+a+"btn-prev-year"),c))){this.wfPrevYear=jindo.$Fn(function(d){d.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(-1,0,true)},this)}if((this.elBtnPrevMonth=jindo.$$.getSingle(("."+a+"btn-prev-mon"),c))){this.wfPrevMonth=jindo.$Fn(function(d){d.stop(jindo.$Event.CANCEL_DEFAULT);
this.draw(0,-1,true)},this)}if((this.elBtnNextMonth=jindo.$$.getSingle(("."+a+"btn-next-mon"),c))){this.wfNextMonth=jindo.$Fn(function(d){d.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(0,1,true)},this)}if((this.elBtnNextYear=jindo.$$.getSingle(("."+a+"btn-next-year"),c))){this.wfNextYear=jindo.$Fn(function(d){d.stop(jindo.$Event.CANCEL_DEFAULT);this.draw(1,0,true)},this)}this.elTitle=jindo.$$.getSingle(("."+a+"title"),c);this.elTitleYear=jindo.$$.getSingle(("."+a+"title-year"),c);this.elTitleMonth=jindo.$$.getSingle(("."+a+"title-month"),c);
var b=jindo.$$.getSingle("."+a+"week",c);this.elWeekTemplate=b.cloneNode(true);this.elWeekAppendTarget=b.parentNode},_setCalendarTitle:function(f,a,d){if(a<10){a=("0"+(a*1)).toString()}var b=this.elTitle,c=this.option("sTitleFormat"),e;if(typeof d!="undefined"){switch(d){case"year":b=this.elTitleYear;c=this.option("sYearTitleFormat");e=c.replace(/yyyy/g,f).replace(/y/g,(f).toString().substr(2,2));break;case"month":b=this.elTitleMonth;c=this.option("sMonthTitleFormat");e=c.replace(/mm/g,a).replace(/m/g,(a*1)).replace(/M/g,this.option("aMonthTitle")[a-1]);
break}}else{e=c.replace(/yyyy/g,f).replace(/y/g,(f).toString().substr(2,2)).replace(/mm/g,a).replace(/m/g,(a*1)).replace(/M/g,this.option("aMonthTitle")[a-1])}jindo.$Element(b).text(e)},draw:function(p,z,a){var n=this.option("sClassPrefix"),l=this.getDate(),j=this._getShownDate();if(j&&typeof a!="undefined"&&a){var s=this.constructor.getRelativeDate(p,z,0,j);p=s.nYear;z=s.nMonth}else{if(typeof p=="undefined"&&typeof z=="undefined"&&typeof a=="undefined"){p=l.nYear;z=l.nMonth}else{p=p||j.nYear;z=z||j.nMonth
}}if(this.fireEvent("beforeDraw",{nYear:p,nMonth:z})){if(this.elTitle){this._setCalendarTitle(p,z)}if(this.elTitleYear){this._setCalendarTitle(p,z,"year")}if(this.elTitleMonth){this._setCalendarTitle(p,z,"month")}this._clear(jindo.Calendar.getWeeks(p,z));this._setShownDate(p,z);var e=this.getToday(),k=this.constructor.getFirstDay(p,z),x=this.constructor.getLastDay(p,z),v=this.constructor.getLastDate(p,z),m=0,d=this.constructor.getRelativeDate(0,-1,0,{nYear:p,nMonth:z,nDate:1}),g=this.constructor.getRelativeDate(0,1,0,{nYear:p,nMonth:z,nDate:1}),r=this.constructor.getLastDate(d.nYear,d.nMonth),w=[],y,A,u,b,h,f,o,t,q;
var c=this.constructor.getWeeks(p,z);for(q=0;q<c;q++){t=this.elWeekTemplate.cloneNode(true);jindo.$Element(t).appendTo(this.elWeekAppendTarget);this._aWeekElement.push(t)}this._aDateElement=jindo.$$("."+n+"date",this.elWeekAppendTarget);this._aDateContainerElement=jindo.$$("."+n+"week > *",this.elWeekAppendTarget);if(k>0){for(q=r-k;q<r;q++){w.push(q+1)}}for(q=1;q<v+1;q++){w.push(q)}o=w.length-1;for(q=1;q<7-x;q++){w.push(q)}for(q=0;q<w.length;q++){y=false;A=false;u=jindo.$Element(this._aDateContainerElement[q]);
b=p;h=z;if(q<k){y=true;u.addClass(n+"prev-mon");b=d.nYear;h=d.nMonth}else{if(q>o){A=true;u.addClass(n+"next-mon");b=g.nYear;h=g.nMonth}else{b=p;h=z}}if(m===0){u.addClass(n+"sun")}if(m==6){u.addClass(n+"sat")}if(b==e.nYear&&(h*1)==e.nMonth&&w[q]==e.nDate){u.addClass(n+"today")}f={elDate:this._aDateElement[q],elDateContainer:u.$value(),nYear:b,nMonth:h,nDate:w[q],bPrevMonth:y,bNextMonth:A,sHTML:w[q]};jindo.$Element(f.elDate).html(f.sHTML.toString());this._aMetaData.push({nYear:b,nMonth:h,nDate:w[q]});
m=(m+1)%7;this.fireEvent("draw",f)}this.fireEvent("afterDraw",{nYear:p,nMonth:z})}},_clear:function(a){this._aMetaData=[];this._aWeekElement=[];jindo.$Element(this.elWeekAppendTarget).empty()},attachEvent:function(){this.activate()},detachEvent:function(){this.deactivate()},_onActivate:function(){if(this.elBtnPrevYear){this.wfPrevYear.attach(this.elBtnPrevYear,"click")}if(this.elBtnPrevMonth){this.wfPrevMonth.attach(this.elBtnPrevMonth,"click")}if(this.elBtnNextMonth){this.wfNextMonth.attach(this.elBtnNextMonth,"click")
}if(this.elBtnNextYear){this.wfNextYear.attach(this.elBtnNextYear,"click")}},_onDeactivate:function(){if(this.elBtnPrevYear){this.wfPrevYear.detach(this.elBtnPrevYear,"click")}if(this.elBtnPrevMonth){this.wfPrevMonth.detach(this.elBtnPrevMonth,"click")}if(this.elBtnNextMonth){this.wfNextMonth.detach(this.elBtnNextMonth,"click")}if(this.elBtnNextYear){this.wfNextYear.detach(this.elBtnNextYear,"click")}}}).extend(jindo.UIComponent);jindo.Calendar.getDateObject=function(a){if(arguments.length==3){return new Date(arguments[0],arguments[1]-1,arguments[2])
}return new Date(a.nYear,a.nMonth-1,a.nDate)};jindo.Calendar.getDateHashTable=function(a){if(arguments.length==3){return{nYear:arguments[0],nMonth:arguments[1],nDate:arguments[2]}}if(arguments.length<=1){a=a||new Date()}return{nYear:a.getFullYear(),nMonth:a.getMonth()+1,nDate:a.getDate()}};jindo.Calendar.getTime=function(a){return this.getDateObject(a).getTime()};jindo.Calendar.getFirstDay=function(a,b){return new Date(a,b-1,1).getDay()};jindo.Calendar.getLastDay=function(a,b){return new Date(a,b,0).getDay()
};jindo.Calendar.getLastDate=function(a,b){return new Date(a,b,0).getDate()};jindo.Calendar.getWeeks=function(c,a){var b=this.getFirstDay(c,a),d=this.getLastDate(c,a);return Math.ceil((b+d)/7)};jindo.Calendar.getRelativeDate=function(a,b,d,c){return this.getDateHashTable(new Date(c.nYear+a,c.nMonth+b-1,c.nDate+d))};jindo.Calendar.isValidDate=function(c,a,b){if(a<=12&&b<=this.getLastDate(c,a)){return true}else{return false}};jindo.Calendar.isPast=function(a,b){if(this.getTime(a)<this.getTime(b)){return true
}return false};jindo.Calendar.isFuture=function(a,b){if(this.getTime(a)>this.getTime(b)){return true}return false};jindo.Calendar.isSameDate=function(a,b){if(this.getTime(a)==this.getTime(b)){return true}return false};jindo.Calendar.isBetween=function(b,a,c){if(this.isFuture(b,c)||this.isPast(b,a)){return false}else{return true}};jindo.LayerManager=jindo.$Class({_bIsActivating:false,_bIsHiding:false,_bIsShowing:false,_aLink:null,$init:function(a,b){this.option({sCheckEvent:"click",nCheckDelay:100,nShowDelay:0,nHideDelay:100});
this.option(b||{});this.setLayer(a);this._aLink=[];this._oShowTimer=new jindo.Timer();this._oHideTimer=new jindo.Timer();this._oEventTimer=new jindo.Timer();this._wfOnEvent=jindo.$Fn(this._onEvent,this);this.getVisible();this.activate()},_onActivate:function(){this._wfOnEvent.attach(document,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfOnEvent.detach(document,this.option("sCheckEvent"))},getVisible:function(){return this._wel.visible()},_check:function(e){var c=jindo.$Element(e);
for(var d=0,b,a;b=this._aLink[d];d++){a=jindo.$Element(b);if(a){b=a.$value();if(b&&(e==b||c.isChildOf(b))){return true}}}return false},_find:function(a){for(var c=0,b;(b=this._aLink[c]);c++){if(b==a){return c}}return -1},getLayer:function(){return this._el},setLayer:function(a){this._el=jindo.$(a);this._wel=jindo.$Element(a);return this},getLinks:function(){return this._aLink},setLinks:function(b){this._aLink=jindo.$A(b).unique().$value();return this},link:function(c){if(arguments.length>1){for(var a=0,b=arguments.length;
a<b;a++){this.link(arguments[a])}return this}if(this._find(c)!=-1){return this}this._aLink.push(c);return this},unlink:function(a){if(arguments.length>1){for(var b=0,d=arguments.length;b<d;b++){this.unlink(arguments[b])}return this}var c=this._find(a);if(c>-1){this._aLink.splice(c,1)}return this},_fireEventBeforeShow:function(){return this.fireEvent("beforeShow",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventShow:function(){this._bIsShowing=false;this.fireEvent("show",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})
},_fireEventBeforeHide:function(){return this.fireEvent("beforeHide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_fireEventHide:function(){this._bIsHiding=false;this.fireEvent("hide",{elLayer:this.getLayer(),aLinkedElement:this.getLinks()})},_show:function(b,a){this._oEventTimer.abort();this._bIsShowing=true;this._bIsHiding=false;if(a>0){this._oShowTimer.start(b,a)}else{this._oHideTimer.abort();b()}},_hide:function(b,a){this._bIsShowing=false;this._bIsHiding=true;if(a>0){this._oHideTimer.start(b,a)
}else{this._oShowTimer.abort();b()}},show:function(a){if(typeof a=="undefined"){a=this.option("nShowDelay")}var b=this;this._show(function(){if(!b.getVisible()){if(b._fireEventBeforeShow()){b._wel.show();b._fireEventShow()}}},a);return this},hide:function(a){if(typeof a=="undefined"){a=this.option("nHideDelay")}var b=this;this._hide(function(){if(b.getVisible()){if(b._fireEventBeforeHide()){b._wel.hide();b._fireEventHide()}}},a);return this},toggle:function(a){if(!this.getVisible()||this._bIsHiding){this.show(a||this.option("nShowDelay"))
}else{this.hide(a||this.option("nHideDelay"))}return this},_onEvent:function(c){var a=c.element,b=this;this._oEventTimer.start(function(){if(!b._bIsHiding&&b.getVisible()){if(b._check(a)){if(!b._bIsShowing){b.fireEvent("ignore",{sCheckEvent:b.option("sCheckEvent")});b._oHideTimer.abort();b._bIsHiding=false}}else{if(typeof a.tagName!="undefined"){b.hide()}}}},this.option("nCheckDelay"))}}).extend(jindo.UIComponent);jindo.Slider=jindo.$Class({_elTrack:null,_aThumbs:null,_aPoses:null,_htSwap:null,$init:function(b,a){this.option({sClassPrefix:"slider-",bVertical:false,bJump:true,bDragOnTrack:true,fAdjustValue:null,nMinValue:0,nMaxValue:1,bActivateOnload:true});
this.option(a||{});if(!this.option("bVertical")){this._htSwap={y:"nY",x:"nX",clientX:"clientX",pageX:"pageX",offsetWidth:"offsetWidth",left:"left"}}else{this._htSwap={y:"nX",x:"nY",clientX:"clientY",pageX:"pageY",offsetWidth:"offsetHeight",left:"top"}}this._elTrack=jindo.$(b);this._aThumbs=jindo.$$("."+this.option("sClassPrefix")+"thumb",this._elTrack);this._sRand="S"+parseInt(Math.random()*100000000,10);jindo.$ElementList(this._aThumbs).addClass(this._sRand);this._aPoses=this.positions();this._onTrackMouseDownFn=jindo.$Fn(this._onTrackMouseDown,this);
this._initDragArea();if(this.option("bActivateOnload")){this.activate()}},getTrack:function(){return this._elTrack},getThumb:function(a){return this._aThumbs[a]},_initDragArea:function(){var a=this;var b=this._htSwap;this._oDragArea=new jindo.DragArea(this._elTrack,{sClassName:this._sRand,bFlowOut:false}).attach({beforeDrag:function(c){var e=a._getThumbIndex(c.elHandle);var d={nIndex:e,nPos:c[b.x],bJump:false};if(!a.fireEvent("beforeChange",d)){c.stop();return false}c[b.x]=a._getAdjustedPos(e,d.nPos);
c[b.y]=null},drag:function(c){var e=a._getThumbIndex(c.elHandle);var d=c[b.x];if(d!=a._aPoses[e]){a._aPoses[e]=d;a._fireChangeEvent(e)}}})},getDragArea:function(){return this._oDragArea},_fireChangeEvent:function(a){var b=this._getPosition(a);this.fireEvent("change",{nIndex:a,nPos:b,nValue:this._getValue(a,b)})},_onActivate:function(){this.getDragArea().activate();this._onTrackMouseDownFn.attach(this._elTrack,"mousedown")},_onDeactivate:function(){this.getDragArea().deactivate();this._onTrackMouseDownFn.detach(this._elTrack,"mousedown")
},_onTrackMouseDown:function(k){if(!this.option("bJump")){return}k.stop(jindo.$Event.CANCEL_DEFAULT);var h=0;var b=this._htSwap;var j=k.element;var m="."+this.option("sClassPrefix")+"thumb";var f=jindo.$$.test(j,m)||jindo.$$.getSingle("! "+m,j);if(f){return}var g=k.pos()[b.pageX];g-=jindo.$Element(this._elTrack).offset()[b.left];var d=9999999;for(var a=0,e;(e=this._aThumbs[a]);a++){var c=parseInt(jindo.$Element(e).css(b.left),10)||0;c+=parseInt(e[b.offsetWidth]/2,10);var l=Math.abs(g-c);if(l<d){d=l;
h=a}}g-=parseInt(this._aThumbs[h][b.offsetWidth]/2,10);this.positions(h,g);if(this.option("bDragOnTrack")){this.getDragArea().startDragging(this._aThumbs[h])}},_getTrackInfo:function(g){var b=this._htSwap;var e=this._aThumbs[g];var a=e[b.offsetWidth];var d=this._elTrack[b.offsetWidth];var h=d-a;var c=this.option("nMaxValue");var f=this.option("nMinValue");return{maxPos:h,max:c,min:f}},_getValue:function(c,e){if(typeof e=="undefined"){e=this._getPosition(c)}var b=this._getTrackInfo(c);var d=Math.min(Math.max(e*(b.max-b.min)/b.maxPos+b.min,b.min),b.max);
var a=this.option("fAdjustValue");if(a){d=a.call(this,d)}return d},_getAdjustedPos:function(b,e){var c=e;var a=this._getTrackInfo(b);var g=this.option("fAdjustValue");if(g){var d=Math.min(Math.max(c*(a.max-a.min)/a.maxPos+a.min,a.min),a.max);var f=g.call(this,d);if(d!=f){c=a.maxPos*(f-a.min)/(a.max-a.min)}}c=Math.max(c,0);c=Math.min(c,a.maxPos);return c},_getThumbIndex:function(a){for(var c=0,b=this._aThumbs.length;c<b;c++){if(this._aThumbs[c]==a){return c}}return -1},_getPosition:function(a){var b=jindo.$Element(this._aThumbs[a]).css(this._htSwap.left);
return(b=="auto")?0:parseInt(b,10)},_setPosition:function(a,b){this._aPoses[a]=b;jindo.$Element(this._aThumbs[a]).css(this._htSwap.left,b+"px")},positions:function(a,d,e){if(typeof e=="undefined"){e=true}switch(arguments.length){case 0:var g=[];jindo.$A(this._aThumbs).forEach(function(i,h){g[h]=this._getPosition(h)},this);return g;case 1:return this._getPosition(a);default:if(e){var f={nIndex:a,nPos:d,bJump:true};if(this.fireEvent("beforeChange",f)){var c=this._getAdjustedPos(a,f.nPos);var b=(c!=this._aPoses[a]);
this._setPosition(a,c);if(b){this._fireChangeEvent(a)}}return this}this._setPosition(a,this._getAdjustedPos(a,d));return this}},values:function(d,f,g){if(typeof g=="undefined"){g=true}switch(arguments.length){case 0:var c=[];for(var e=0,b=this._aThumbs.length;e<b;e++){c[e]=this._getValue(e)}return c;case 1:return this._getValue(d,this.positions(d));default:var a=this._getTrackInfo(d);this.positions(d,(f-a.min)*a.maxPos/(a.max-a.min),g);return this}}}).extend(jindo.UIComponent);jindo.RolloverClick=jindo.$Class({$init:function(c,a){this.option({bActivateOnload:true,sCheckEvent:"click",bCheckDblClick:false,RolloverArea:{sClassName:"rollover",sClassPrefix:"rollover-",bCheckMouseDown:false,bActivateOnload:false,htStatus:{sOver:"over",sDown:"down"}}});
this.option(a||{});var b=this;this._oRolloverArea=new jindo.RolloverArea(c,this.option("RolloverArea")).attach({over:function(d){if(!b.fireEvent("over",d)){d.stop()}},out:function(d){if(!b.fireEvent("out",d)){d.stop()}}});this._wfClick=jindo.$Fn(this._onClick,this);this._wfDblClick=jindo.$Fn(this._onClick,this);if(this.option("bActivateOnload")){this.activate()}},_onClick:function(b){var c=b.element,a="click";if(b.type=="dblclick"){a=b.type}while(c=this._oRolloverArea._findRollover(c)){this.fireEvent(a,{element:c,htStatus:this._oRolloverArea.option("htStatus"),weEvent:b});
c=c.parentNode}},_onActivate:function(){this._wfClick.attach(this._oRolloverArea._elArea,this.option("sCheckEvent"));if(this.option("bCheckDblClick")){this._wfDblClick.attach(this._oRolloverArea._elArea,"dblclick")}this._oRolloverArea.activate()},_onDeactivate:function(){this._wfClick.detach(this._oRolloverArea._elArea,this.option("sCheckEvent"));this._wfDblClick.detach(this._oRolloverArea._elArea,"dblclick");this._oRolloverArea.deactivate()}}).extend(jindo.UIComponent);jindo.NumberFormatter=jindo.$Class({$init:function(a,b){this.option({nDecimalPoint:0});
this.option(b||{});this.attach("beforeChange",function(c){var f=c.sText;var d="";var e=this.option("nDecimalPoint");if(e===0){f=f.replace(new RegExp("[^0-9"+c.sStartMark+c.sEndMark+"]","g"),"");f=f.replace(/^0+/,"");f=f.replace(new RegExp("^0*"+c.sStartMark+"0*"+c.sEndMark+"0*"),c.startMark+c.endMark)}else{f=f.replace(new RegExp("[^0-9."+c.sStartMark+c.sEndMark+"]","g"),"");f=f.replace(/\.{2,}/g,".");f=f.replace(/^\.+/,"");f=f.replace(/(\.[^.]*?)(\.)/g,function(){return arguments[1]});f=f.replace(/^0+/,"");
f=f.replace(new RegExp("^0*"+c.sStartMark+"0*"+c.sEndMark+"0*"),c.startMark+c.endMark);f=f.replace(new RegExp("^0([^."+c.sStartMark+c.sEndMark+"]+?)","g"),function(){return arguments[1]})}d=this._convertCurrency(f);if(e>0){d=this._limitDecimalPoint(d,e)}c.sText=d})},getValue:function(){return this._el.value.replace(new RegExp("[,"+this._aMarks[0]+this._aMarks[1]+"]+?","g"),"")},_convertCurrency:function(a){var f=0,d="",g=a.indexOf("."),c=a.length;if(g>-1){c=g-1}for(var b=a.length;b>=0;b--){var e=a.charAt(b);
if(b>c){d=e+d;continue}if(/[0-9]/.test(e)){if(f>=3){d=","+d;f=0}f++;d=e+d}else{if(e==this._aMarks[0]||e==this._aMarks[1]){d=e+d}}}return d},_limitDecimalPoint:function(d,h){var f="",j=d.indexOf("."),b=d.length;if(j>-1){b=j-1}j=d.indexOf(".");if(j>-1&&h>0){var a=0;for(var g=0;g<d.length;g++){var e=d.charAt(g),c=/[0-9]/.test(e);if(c){if(a==h){continue}if(g>j){a++}}f+=e}}else{f=d}return f}}).extend(jindo.Formatter);jindo.InlineTextEdit=jindo.$Class({_bIsEditing:false,$init:function(a){var b={elInput:jindo.$('<input type="text">'),bHandleBlur:true,bHandleKeyDown:true};
this.option(b);this.option(a||{});this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyDown=jindo.$Fn(this._onKeyDown,this)},getTextInput:function(){return this._getTextInput().$value()},_getTextInput:function(){if(this._welInput){return this._welInput}else{return(this._welInput=jindo.$Element(this.option("elInput")))}},_resize:function(b,a){var d=jindo.$Element(b);var c=jindo.$Element(a);c.width(d.width()).height(d.height())},isEditing:function(){return this._bIsEditing},edit:function(d,a){var c=jindo.$Element(d),e=this._getTextInput(),b=e.$value();
this._welHidden=c;c.after(b);this._resize(a||d,b);c.hide();b.value=c.text();b.focus();this._bIsEditing=true;if(this.option("bHandleBlur")){this._wfBlur.attach(b,"blur")}if(this.option("bHandleKeyDown")){this._wfKeyDown.attach(b,"keydown")}return this},apply:function(){if(this.isEditing()){var b=this._getTextInput(),c=b.$value(),d=c.value,a={sText:d,elInput:c,elText:this._welHidden.$value()};b.leave();if(this._welHidden.text()!=d&&this.fireEvent("beforeChange",a)){this._welHidden.text(a.sText).show();
this._bIsEditing=false;this.fireEvent("change",a)}else{this._welHidden.show()}this._wfBlur.detach(c,"blur").detach(c,"keydown")}return this},cancel:function(){if(this.isEditing()){var b=this._getTextInput(),a=b.$value();b.leave();this._welHidden.show();this._bIsEditing=false;this._wfBlur.detach(a,"blur").detach(a,"keydown")}return this},_onBlur:function(a){this.apply()},_onKeyDown:function(a){switch(a.key().keyCode){case 27:this.cancel();break;case 13:if(this.getTextInput().tagName.toLowerCase()=="input"){this.apply()
}break}}}).extend(jindo.Component);jindo.BrowseButton=jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"browse-"});this.option(b||{});this._el=jindo.$(a);this._assignHTMLElement();this._attachEvents()},_assignHTMLElement:function(){var a=this.option("sClassPrefix");this._elBox=jindo.$$.getSingle("."+a+"box",this._el);this._elFileSelect=jindo.$$.getSingle("."+a+"file-input",this._el);this._elBrowseButton=jindo.$$.getSingle("."+a+"button",this._el);this._elFileSelect.style.cssText="top:-.5em !important; height:500px !important;";
jindo.$Element(this._elBrowseButton).addClass(a+"applied")},_adjustFileSelectPos:function(a){this.getFileSelect().style.right=jindo.$Element(this.getBox()).offset().left-a+"px"},_attachEvents:function(){var g=this.getBrowseButton(),b=jindo.$Element(g),f=this.getBox(),d=this.getFileSelect(),a=jindo.$Fn(function(h){b.addClass(this.option("sClassPrefix")+"over");this.fireEvent("over");this._adjustFileSelectPos(h.pos().pageX)},this),c=jindo.$Fn(function(h){b.removeClass(this.option("sClassPrefix")+"over");
d.style.right="0px";this.fireEvent("out")},this),e=jindo.$Fn(function(h){this._adjustFileSelectPos(h.pos().pageX)},this);jindo.$Fn(function(h){this.fireEvent("sourceChange")},this).attach(this.getFileSelect(),"change");a.attach(f,"mouseover");e.attach(f,"mousemove");c.attach(f,"mouseout")},getBox:function(){return this._elBox},getFileSelect:function(){return this._elFileSelect},getBrowseButton:function(){return this._elBrowseButton}}).extend(jindo.Component);jindo.FileUploader=jindo.$Class({_bIsActivating:false,_aHiddenInput:[],$init:function(b,c){var a={sUrl:"",sCallback:"",htData:{},sFiletype:"*",sMsgNotAllowedExt:"업로드가 허용되지 않는 파일형식입니다",bAutoUpload:false,bActivateOnload:true};
this.option(a);this.option(c||{});this._el=jindo.$(b);this._wel=jindo.$Element(this._el);this._elForm=this._el.form;this._aHiddenInput=[];this.constructor._oCallback={};this._wfChange=jindo.$Fn(this._onFileSelectChange,this);if(this.option("bActivateOnload")){this.activate()}},_appendIframe:function(){var a="tmpFrame_"+this._makeUniqueId();this._welIframe=jindo.$Element(jindo.$('<iframe name="'+a+'" src="'+this.option("sCallback")+'?blank">')).css({position:"absolute",width:"1px",height:"1px",left:"-100px",top:"-100px"});
document.body.appendChild(this._welIframe.$value())},_removeIframe:function(){this._welIframe.leave()},getBaseElement:function(){return this.getFileSelect()},getFileSelect:function(){return this._el},getFormElement:function(){return this._elForm},upload:function(){this._appendIframe();var d=this.getFormElement();var g=jindo.$Element(d);var e=this._welIframe.attr("name");var b=e+"_func";var a=this.option("sUrl");g.attr({target:e,action:a});this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback",value:this.option("sCallback")}));
this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:"callback_func",value:b}));for(var c in this.option("htData")){this._aHiddenInput.push(this._createElement("input",{type:"hidden",name:c,value:this.option("htData")[c]}))}for(var f=0;f<this._aHiddenInput.length;f++){d.appendChild(this._aHiddenInput[f])}this.constructor._oCallback[b+"_success"]=jindo.$Fn(function(h){this.fireEvent("success",{htResult:h});delete this.constructor._oCallback[h.callback_func+"_success"];delete this.constructor._oCallback[h.callback_func+"_error"];
for(var i=0;i<this._aHiddenInput.length;i++){jindo.$Element(this._aHiddenInput[i]).leave()}this._aHiddenInput.length=0;this._removeIframe()},this).bind();this.constructor._oCallback[b+"_error"]=jindo.$Fn(function(h){this.fireEvent("error",{htResult:h});delete this.constructor._oCallback[h.callback_func+"_success"];delete this.constructor._oCallback[h.callback_func+"_error"];for(var i=0;i<this._aHiddenInput.length;i++){jindo.$Element(this._aHiddenInput[i]).leave()}this._aHiddenInput.length=0;this._removeIframe()
},this).bind();d.submit()},reset:function(){var a=$("<form>");this._wel.wrap(a);a.reset();jindo.$Element(a).replace(this._el);return this},_onActivate:function(){this._el.value="";this._wfChange.attach(this._el,"change")},_onDeactivate:function(){this._wfChange.detach(this._el,"change")},_makeUniqueId:function(){return new Date().getMilliseconds()+Math.floor(Math.random()*100000)},_createElement:function(e,d){var a=jindo.$("<"+e+">");var c=jindo.$Element(a);for(var b in d){c.attr(b,d[b])}return a
},_checkExtension:function(a){var c=this.option("sFiletype").split(";");for(var d=0,b;d<c.length;d++){b=(c[d]=="*.*")?"*":c[d];b=b.replace(/^\s+|\s+$/,"");b=b.replace(/\./g,"\\.");b=b.replace(/\*/g,"[^\\/]+");if((new RegExp(b+"$","gi")).test(a)){return true}}return false},_onFileSelectChange:function(d){var b=d.element.value,c=this._checkExtension(b),a={sValue:b,bAllowed:c,sMsgNotAllowedExt:this.option("sMsgNotAllowedExt")};if(b.length&&this.fireEvent("select",a)){if(c){if(this.option("bAutoUpload")){this.upload()
}}else{alert(a.sMsgNotAllowedExt)}}}}).extend(jindo.UIComponent);jindo.Clipboard=jindo.$Class({_aElement:null,_aData:null,_elOvered:null,_bFailed:true,$init:function(c){this._sFlashURL=c;var b=jindo.Clipboard;var a=this._sUnique="S"+new Date().getTime()+parseInt(Math.random()*1000000000,10);if(typeof b._callbacks=="undefined"){b._callbacks={}}b._callbacks[this._sUnique]={click:jindo.$Fn(this._onFlashClick,this).bind(),mouseover:jindo.$Fn(this._onFlashMouseOver,this).bind(),mouseout:jindo.$Fn(this._onFlashMouseOut,this).bind(),mousedown:jindo.$Fn(this._onFlashMouseDown,this).bind(),mouseup:jindo.$Fn(this._onFlashMouseUp,this).bind(),load:jindo.$Fn(this._onFlashLoad,this).bind()};
this._aElement=[];this._aData=[];this._initFlash();this._wfHandler=jindo.$Fn(function(f){this._initFlash();var d=f.element;var e=jindo.$Element(d).offset();this._setFlashPosSize(e.left,e.top,d.offsetWidth,d.offsetHeight);this._setClipboard(d,this._getData(d));this._elOvered=d},this)},_initFlash:function(){if(this._elDummy){return}var b=this._elDummy=jindo.$("<div>");var a=this._sUnique;b.style.cssText="position:absolute !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:visible !important; z-index:32000 !important;";
document.body.insertBefore(b,document.body.firstChild);var c=nhn.FlashObject.generateTag(this._sFlashURL,"CLIPBOARD"+a,1,1,{flashVars:{sUniq:a},wmode:"transparent"});c=c.replace(/style="position:relative !important;"/gi,'style="position:absolute !important; left:0 !important; top:0 !important; border:0 !important; padding:0 !important; margin:0 !important; overflow:visible !important;"');b.innerHTML=c;jindo.$Fn(this._checkFailed,this).attach(b,"click")},_getFlash:function(){return nhn.FlashObject.find("CLIPBOARD"+this._sUnique)
},_setFlashPosSize:function(b,a,f,e){var c=this._elDummy;c.style.left=b+"px";c.style.top=a+"px";var d=this._getFlash();d.width=f;d.height=e;d.style.width=f+"px";d.style.height=e+"px"},setData:function(b,d){var b=jindo.$(b);var c=jindo.$A(this._aElement).indexOf(b);var a=c!=-1;if(a&&(!d||typeof d=="undefined")){this._wfHandler.detach(b,"mousemove");this._aElement.splice(c,1);this._aData.splice(c,1);this._setFlashPosSize(0,0,1,1);return}if(!a){this._wfHandler.attach(b,"mousemove");this._aElement.push(b);
this._aData.push(d)}else{this._aData[c]=d}this._setClipboard(b,d)},_getData:function(b){var a=jindo.$A(this._aElement).indexOf(b);return this._aData[a]},_setClipboard:function(a,f){var d=this._getFlash();var g=(jindo.$Element(a).css("cursor")||"").toUpperCase();var b=g=="POINTER"||g=="HAND";try{d.setClipboardData(f);d.setClipboardOptions({cursor:b?"pointer":"default"});this._sAppliedData=f;this._bFailed=false}catch(c){this._bFailed=true}},_checkFailed:function(){if(this._bFailed){this.fireEvent("failure",{element:this._elOvered,data:this._lastestData})
}},_onFlashClick:function(a){this.fireEvent("copy",{element:this._elOvered,data:a})},_onFlashMouseOver:function(){this.fireEvent("over",{element:this._elOvered})},_onFlashMouseOut:function(){this.fireEvent("out",{element:this._elOvered})},_onFlashMouseDown:function(){this.fireEvent("down",{element:this._elOvered})},_onFlashMouseUp:function(){this.fireEvent("up",{element:this._elOvered})},_onFlashLoad:function(){this.fireEvent("load")}}).extend(jindo.Component);jindo.DataBridge=jindo.$Class({_htEvent:{},$static:{log:function(a,b){if(a&&b){this.getComponentInstance(a)._onLog(b)
}else{alert("Parameter is wrong!!")}},onReceive:function(b,a,c){if(b&&a&&c){this.getComponentInstance(b)._onReceiveData(a,c)}else{alert("Parameter is wrong!!")}},getComponentInstance:function(b){var a=this.getInstance();for(var c=0;c<a.length;c++){if(b==a[c].getFlashObjectId()){return a[c]}}}},$init:function(a){this.option({sSwfPath:"data_bridge.swf",nRetryLimit:3});this.option(a);this._attachEvent();this._createFlashObject()},_attachEvent:function(){this._htEvent.beforeunload=jindo.$Fn(this.destroy,this).attach(window,"beforeunload")
},_createFlashObject:function(){this._sFlashId="data_bridge_"+(new Date()).getMilliseconds()+Math.floor(Math.random()*100000);var b=jindo.$Element('<div style="position:absolute;top:-1000px;left:0px">');var a="serviceId="+this.option("sServiceId")+"&logHandler=jindo.DataBridge.log&onReceiveHandler=jindo.DataBridge.onReceive&flashId="+this._sFlashId+"&retryLimit="+this.option("nRetryLimit");b.appendTo(document.body).html('<object tabindex="-1" id="'+this._sFlashId+'" width="1" height="1" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"><param name="flashvars" value="'+a+'"><param name="movie" value="'+this.option("sSwfPath")+'"><param name = "allowScriptAccess" value = "always" /><embed tabindex="-1" name="'+this._sFlashId+'" src="'+this.option("sSwfPath")+'" flashvars="'+a+'" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" width="1" height="1" allowScriptAccess="always" swLiveConnect="true"></embed></object>')
},_getFlashObject:function(){return document[this._sFlashId]||jindo.$(this._sFlashId)},getFlashObjectId:function(){return this._sFlashId},getClientId:function(){return this.option("sServiceId")+"_"+this._sFlashId},send:function(b){if(b){try{this._getFlashObject().send(b)}catch(a){alert("Flash object is not ready!!")}}else{alert("vData parameter is null!!")}return this},_onReceiveData:function(b,a){this.fireEvent("receive",{sSenderId:b,vData:a})},_onLog:function(a){this.fireEvent("log",{sMessage:a})
},_close:function(){this._getFlashObject().close()},_detachEvent:function(){this._htEvent.beforeunload.detach(window,"beforeunload")},getLocalData:function(){},setLocalData:function(){},resetLocalData:function(){},destroy:function(){this._close();this._detachEvent();this._htEvent={};jindo.$Element(this._getFlashObject()).leave()}}).extend(jindo.Component);jindo.AjaxHistory=jindo.$Class({_htEventHandler:{},_htHistoryData:{},_oAgent:null,_welIFrame:null,_nIntervalId:0,_sCheckType:"",_sComponentId:"",$static:{checkIFrameChange:function(b){var a=jindo.$S(b.search.substring(1)).parseString();
this.getInstance()[0]._checkLocationChange(encodeURIComponent(a.hash))}},$init:function(a){this._oAgent=jindo.$Agent().navigator();this._sComponentId="AjaxHistory"+(new Date()).getTime();this.option({sIFrameUrl:"history.html",nCheckInterval:100});this.option(a||{})},initialize:function(){var a=this._getLocationHash();if((this._oAgent.ie&&this._oAgent.version>=8&&jindo.$Document().renderingMode()=="Standards")||(this._oAgent.firefox&&this._oAgent.version>=3.6)||(this._oAgent.chrome&&this._oAgent.version>3)||(this._oAgent.safari&&this._oAgent.version>=5)||(this._oAgent.opera&&this._oAgent.version>=10.6)){this._htEventHandler.hashchange=jindo.$Fn(this._checkLocationChange,this).attach(window,"hashchange");
this._sCheckType="hashchangeevent"}else{if(this._oAgent.ie){this._welIFrame=jindo.$Element("<IFRAME>");this._welIFrame.hide();this._welIFrame.appendTo(document.body);this._sCheckType="iframe"}else{this._nIntervalId=setInterval(jindo.$Fn(this._checkLocationChange,this).bind(),this.option("nCheckInterval"));this._sCheckType="setinterval"}}if(a){if(this._sCheckType=="iframe"){this._welIFrame.$value().src=this.option("sIFrameUrl")+"?hash="+a}else{this._htHistoryData=this._getDecodedData(a);this.fireEvent("change",{htHistoryData:this._htHistoryData})
}}else{this.fireEvent("load")}return this},getComponentId:function(){return this._sComponentId},_getLocationHash:function(){return this._oAgent.firefox?encodeURIComponent(location.hash.substring(1)):location.hash.substring(1)},_setLocationHash:function(a){location.hash=a},addHistory:function(b){if(b&&typeof(b)=="object"&&$H(b).length()>0){this._htHistoryData=jindo.$Json(jindo.$Json(b).toString()).toObject();var a=this._getEncodedData(b);if(this._getLocationHash()!=a){this._setLocationHash(a);if(this._sCheckType=="iframe"){this._welIFrame.$value().src=this.option("sIFrameUrl")+"?hash="+a
}return true}else{return false}}else{return false}},_checkLocationChange:function(a){a=(a&&typeof(a)=="string")?a:this._getLocationHash();var b=this._getDecodedData(a);if(!this._compareData(this._htHistoryData,b)){this._htHistoryData=b;if(this._sCheckType=="iframe"){this._setLocationHash(a)}this.fireEvent("change",{htHistoryData:this._htHistoryData})}},_getEncodedData:function(a){if(a){if(typeof(JSON)=="object"&&typeof(JSON.stringify)=="function"){return encodeURIComponent(JSON.stringify(a))}else{return encodeURIComponent(jindo.$Json(a).toString())
}}else{return""}},_getDecodedData:function(a){try{if(a){var b=decodeURIComponent(a);if(typeof(JSON)=="object"&&typeof(JSON.parse)=="function"){return JSON.parse(b)}else{return jindo.$Json(b).toObject()}}}catch(c){}return{}},_compareData:function(a,c){if(a&&c){if(jindo.$H(a).length()==jindo.$H(c).length()){for(var b in a){if(typeof(a[b])=="object"){if(!arguments.callee(a[b],c[b])){return false}}else{if(a[b]!=c[b]){return false}}}return true}else{return false}}else{return false}},destroy:function(){if(this._sCheckType=="hashchangeevent"){this._htEventHandler.hashchange.detach(window,"hashchange")
}else{if(this._sCheckType=="iframe"){this._welIFrame.leave()}else{clearInterval(this._nIntervalId)}}this._htEventHandler=null;this._htHistoryData=null;this._oAgent=null;this._welIFrame=null;this._nIntervalId=null;this._sCheckType=null;this._sComponentId=null}}).extend(jindo.Component);jindo.Cache=jindo.$Class({$init:function(a){this._htCacheData={};this._htExpireTime={};this._waKeyList=jindo.$A();this.option({nCacheLimit:50,nExpireTime:0});this.option(a)},add:function(b,a,c){if(b&&a){this._checkCacheExpire();
this._checkCacheLimit();var d=this._makeKey(b);if(d){this._htCacheData[d]=a;this._htExpireTime[d]=this._getExpireTime(c);this._waKeyList.push(d);return true}}return false},remove:function(b){if(b){var a=this._makeKey(b);if(this._htCacheData[a]){this._waKeyList=this._waKeyList.refuse(a);delete this._htExpireTime[a];delete this._htCacheData[a];return true}}return false},clear:function(){this._htCacheData={};this._htExpireTime={};this._waKeyList=jindo.$A()},get:function(b){if(b){var a=this._makeKey(b);
if(this.check(b)){return this._htCacheData[a]}}return null},check:function(b){if(b){var a=this._makeKey(b);if(this._htCacheData[a]&&this._checkCacheExpire(a)){return true}}return false},_checkCacheLimit:function(){if(this._waKeyList.length()==this.option("nCacheLimit")){this.remove(this._waKeyList.get(0))}},_checkCacheExpire:function(a){if(a){var d=this._getTime();if(this._htExpireTime[a]===0||d<this._htExpireTime[a]){return true}else{this.remove(jindo.$S(a).parseString());return false}}else{for(var c=0,b=this._waKeyList.length();
c<b;c++){return this._checkCacheExpire(this._waKeyList.get(c))}}},_getExpireTime:function(a){if(a){return this._getTime()+(a*1000)}else{if(this.option("nExpireTime")){return this._getTime()+(this.option("nExpireTime")*1000)}else{return 0}}},_makeKey:function(a){if(a){if(typeof(a)=="string"){return a}else{return jindo.$H(a).toQueryString()}}else{return""}},_getTime:function(){return +new Date()},destroy:function(){this._waKeyList=null;this._htCacheData=null;this._htExpireTime=null}}).extend(jindo.Component);
jindo.ModalDialog=jindo.$Class({$init:function(a){var b={Foggy:{nShowDuration:150,nShowOpacity:0.8,nHideDuration:150,nHideOpacity:0,sEffect:"linear",nFPS:30}};this.option(b);this.option(a||{});this._initFoggy()},_initFoggy:function(){var a=this;this._oFoggy=new jindo.Foggy(this.option("Foggy")).attach({show:function(b){a.fireEvent("show",{elLayer:a._elLayer})},hide:function(){a.detachAll("close").detachAll("confirm").detachAll("cancel");a._detachEvents();a._welLayer.hide();a._welLayer.leave();a._bIsShown=false;
a.fireEvent("hide",{elLayer:a._elLayer})}});this._oFoggy.getFog().className=this.option("sClassPrefix")+"fog"},getFoggy:function(){return this._oFoggy},show:function(b,a){if(this.isShown()){return}this.attach(a);document.body.appendChild(this._elLayer);this._welLayer.html(this._template.process(b));var c={elLayer:this._elLayer};if(this.fireEvent("beforeShow",c)){this._welLayer.show();this._attachEvents();this.getLayerPosition().setPosition();this._bIsShown=true;this._oFoggy.show(this._elLayer)}else{return
}},hide:function(){if(this.fireEvent("beforeHide",{elLayer:this._elLayer})){this._oFoggy.hide()}}}).extend(jindo.Dialog);jindo.DropArea=jindo.$Class({$init:function(d,a){this._el=jindo.$(d);this._wel=jindo.$Element(this._el);this.option({sClassName:"droppable",oDragInstance:null});this.option(a||{});this._waOveredDroppableElement=jindo.$A([]);this._elHandle=null;this._elDragging=null;this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseOver=jindo.$Fn(this._onMouseOver,this);this._wfMouseOut=jindo.$Fn(this._onMouseOut,this);
var b=this.option("oDragInstance");if(b){var c=this;b.attach({handleDown:function(e){c._elHandle=e.elHandle;c._waOveredDroppableElement.empty()},dragStart:function(e){c._reCalculate();c.fireEvent(e.sType,e);c._wfMouseMove.attach(document,"mousemove");c._wfMouseOver.attach(c._el,"mouseover");c._wfMouseOut.attach(c._el,"mouseout")},drag:function(e){c._elDragging=e.elDrag},dragEnd:function(g){var f={};for(var e in g){f[e]=g[e]}f.aDrop=c.getOveredLists().concat();c._clearOveredDroppableElement(g.weEvent,g.bInterupted);
c.fireEvent(g.sType,f);c._wfMouseMove.detach(document,"mousemove");c._wfMouseOver.detach(c._el,"mouseover");c._wfMouseOut.detach(c._el,"mouseout")},handleUp:function(e){c._elDragging=null;c._elHandle=null}})}},_addOveredDroppableElement:function(a){if(this._waOveredDroppableElement.indexOf(a)==-1){this._waOveredDroppableElement.push(a);this.fireEvent("over",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:a})}},_fireMoveEvent:function(c,d,a,b){var f=(a.pageX-d.nLeft)/(d.nRight-d.nLeft);var e=(a.pageY-d.nTop)/(d.nBottom-d.nTop);
this.fireEvent("move",{weEvent:b,elHandle:this._elHandle,elDrag:this._elDragging,elDrop:c,nRatioX:f,nRatioY:e})},_removeOveredDroppableElement:function(b){var a=this._waOveredDroppableElement.indexOf(b);if(a!=-1){this._waOveredDroppableElement.splice(a,1);this.fireEvent("out",{elHandle:this._elHandle,elDrag:this._elDragging,elDrop:b})}},_clearOveredDroppableElement:function(a,c){if(c){this._waOveredDroppableElement.empty();return}for(var b;(b=this._waOveredDroppableElement.$value()[0]);){this._waOveredDroppableElement.splice(0,1);
this.fireEvent("drop",{weEvent:a,elHandle:this._elHandle,elDrag:this._elDragging,elDrop:b})}},getOveredLists:function(){return this._waOveredDroppableElement?this._waOveredDroppableElement.$value():[]},_isChildOfDropArea:function(a){if(this._el===document||this._el===a){return true}return this._wel.isParentOf(a)},_findDroppableElement:function(c){var a="."+this.option("sClassName");var b=jindo.$$.test(c,a)?c:jindo.$$.getSingle("! "+a,c);if(!this._isChildOfDropArea(c)){b=null}return b},_onMouseMove:function(h){var f=this.option("oDragInstance");
if(f&&f.isDragging()){var c=h.pos();if(h.element==this._elDragging||jindo.$Element(this._elDragging).isParentOf(h.element)){var d=this._aItem;var j=this._aItemRect;for(var l=0,e,g;((e=j[l])&&(g=d[l]));l++){if(e.nLeft<=c.pageX&&c.pageX<=e.nRight&&e.nTop<=c.pageY&&c.pageY<=e.nBottom){this._addOveredDroppableElement(g);this._fireMoveEvent(g,e,c,h)}else{this._removeOveredDroppableElement(g)}}}else{var b=this._findDroppableElement(h.element);if(!b){return}this._addOveredDroppableElement(b);var a=jindo.$Element(b).offset();
var k={nLeft:a.left,nTop:a.top,nRight:a.left+b.offsetWidth,nBottom:a.top+b.offsetHeight};if(k.nLeft<=c.pageX&&c.pageX<=k.nRight&&k.nTop<=c.pageY&&c.pageY<=k.nBottom){this._fireMoveEvent(b,k,c,h)}}}},_onMouseOver:function(b){var a=this._findDroppableElement(b.element);if(a){this._addOveredDroppableElement(a)}},_onMouseOut:function(b){var a=this._findDroppableElement(b.element);if(a&&b.relatedElement&&!jindo.$Element(b.relatedElement).isChildOf(b.element)){this._removeOveredDroppableElement(a)}},_getRectInfo:function(a){var b=jindo.$Element(a).offset();
return{nLeft:b.left,nTop:b.top,nRight:b.left+a.offsetWidth,nBottom:b.top+a.offsetHeight}},_reCalculate:function(){var b=jindo.$$("."+this.option("sClassName"),this._el);if(this._el.tagName&&jindo.$$.test(this._el,"."+this.option("sClassName"))){b.push(this._el)}this._aItem=b;this._aItemRect=[];for(var c=0,a;(a=b[c]);c++){this._aItemRect.push(this._getRectInfo(a))}}}).extend(jindo.Component);jindo.LayerEffect=jindo.$Class({$init:function(b){this.setLayer(b);var a=this;this._htTransitionGetterSetter={getter:function(c){return jindo.$Element(a._el)[c]()
},setter:function(d,c){jindo.$Element(a._el)[d](parseFloat(c))}}},getLayer:function(){return this._el},setLayer:function(c){this._el=jindo.$(c);this._wel=jindo.$Element(c);var d=this._el.cloneNode(true);var b=jindo.$Element(d);b.opacity(0);this._wel.after(b);b.show();this._sLayerCSSPosition=b.css("position");var a=b.offset();b.css({position:"absolute",top:"0px",left:"0px"});var e=b.offset();this._sLayerCSSLeft=a.left-e.left+"px";this._sLayerCSSTop=a.top-e.top+"px";this._sLayerBGColor=b.css("backgroundColor");
this._nLayerWidth=b.width();this._nLayerHeight=b.height();b.width(this._nLayerWidth);b.height(this._nLayerHeight);this._sLayerCSSWidth=b.css("width");this._sLayerCSSHeight=b.css("height");this._sLayerCSSOverflowX=this._wel.css("overflowX");this._sLayerCSSOverflowY=this._wel.css("overflowY");this._sLayerCSSFontSize=this._wel.css("fontSize");this._sLayerCSSFontSizeUnit=this._sLayerCSSFontSize.match(/^\-?[0-9\.]+(%|px|pt|em)?$/i)[1];b.css({overflow:"hidden",width:0,height:0});this._nSlideMinWidth=b.width()+1;
this._nSlideMinHeight=b.height()+1;b.leave();return this},_transform:function(){this._wel.css({overflowX:"hidden",overflowY:"hidden"})},_restore:function(){this._wel.css({position:this._sLayerCSSPosition,overflowX:this._sLayerCSSOverflowX,overflowY:this._sLayerCSSOverflowY})},_fireEventBefore:function(a){if(a){this._transform()}return this.fireEvent("before",{elLayer:this.getLayer()})},_fireEventAppear:function(){this.fireEvent("appear",{elLayer:this.getLayer()})},_fireEventEnd:function(){this._restore();
this.fireEvent("end",{elLayer:this.getLayer()})},_getTransition:function(){return(this._oTransition)?this._oTransition:this._oTransition=new jindo.Transition({bCorrection:true})},_afterHide:function(){this._wel.hide().opacity(1);this._wel.css({top:this._sLayerCSSTop,left:this._sLayerCSSLeft,width:this._sLayerCSSWidth,height:this._sLayerCSSHeight,fontSize:this._sLayerCSSFontSize})},_onShowTransitionEnd:function(a){this._getTransition().detach("end",arguments.callee);this._fireEventEnd()},_onHideTransitionEnd:function(a){this._getTransition().detach("end",arguments.callee);
this._afterHide();this._fireEventEnd()},_getOption:function(a,b){for(var c in b){a[c]=b[c]}return a},fadeIn:function(b){b=this._getOption({nFPS:30,nDuration:500},b||{});var a=this._wel.visible()&&this._wel.opacity()>0;if(a){b.nDuration*=((1-this._wel.opacity())/1)}else{this._wel.opacity(0);this._wel.show()}if(b.nDuration>0){this._fireEventBefore(true);var d=this,c=this._getTransition().fps(b.nFPS).abort().detachAll();c.attach({playing:function(e){if(e.nStep===1){this.detach("playing",arguments.callee);
if(!a){d._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(b.nDuration,this._wel.$value(),{"@opacity":jindo.Effect.linear(1)});if(b.fCallback){c.queue(jindo.$Fn(b.fCallback,this).bind(this))}c.start()}return this},fadeOut:function(a){a=this._getOption({nFPS:30,nDuration:500},a||{});var c=this._wel.visible()&&this._wel.opacity()>0;if(c){this._fireEventBefore();a.nDuration*=(this._wel.opacity()/1);var b=this._getTransition().fps(a.nFPS).abort().detachAll();b.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(a.nDuration,this._wel.$value(),{"@opacity":jindo.Effect.linear(0)});
if(a.fCallback){b.queue(jindo.$Fn(a.fCallback,this).bind(this))}b.start()}return this},slideDown:function(b){b=this._getOption({nFPS:30,nDuration:500},b||{});var a=this._wel.visible();if(Math.ceil(this._wel.height())<this._nLayerHeight){if(this._fireEventBefore(true)){if(!a){this._wel.css("height",0).show().height(this._nSlideMinHeight)}else{b.nDuration=Math.ceil(b.nDuration*((this._nLayerHeight-this._wel.height())/(this._nLayerHeight-this._nSlideMinHeight)))}var d=this,c=this._getTransition().fps(b.nFPS).abort().detachAll();
c.attach({playing:function(e){if(e.nStep===1){this.detach("playing",arguments.callee);if(!a){d._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(b.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nLayerHeight)});if(b.fCallback){c.queue(jindo.$Fn(b.fCallback,this).bind(this))}c.start()}}return this},slideUp:function(a){a=this._getOption({nFPS:30,nDuration:500},a||{});var c=this._wel.visible();if(c){if(this._fireEventBefore(true)){a.nDuration=Math.ceil(a.nDuration*(this._wel.height()/this._nLayerHeight));
var b=this._getTransition().fps(a.nFPS).abort().detachAll();b.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(a.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nSlideMinHeight)});if(a.fCallback){b.queue(jindo.$Fn(a.fCallback,this).bind(this))}b.start()}}return this},grow:function(b){b=this._getOption({nFPS:30,nDuration:500},b||{});var a=this._wel.visible();if(Math.ceil(this._wel.height())<this._nLayerHeight){if(this._fireEventBefore(true)){if(!a){this._wel.css({width:0,height:0}).show().width(this._nSlideMinWidth).height(this._nSlideMinHeight)
}else{b.nDuration=Math.ceil(b.nDuration*((this._nLayerHeight-this._wel.height())/(this._nLayerHeight-this._nSlideMinHeight)))}var d=this,c=this._getTransition().fps(b.nFPS).abort().detachAll();c.attach({playing:function(e){if(e.nStep===1){this.detach("playing",arguments.callee);if(!a){d._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(b.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth),height:jindo.Effect.cubicEaseOut(this._nLayerHeight)});
if(b.fCallback){c.queue(jindo.$Fn(b.fCallback,this).bind(this))}c.start()}}return this},shrink:function(a){a=this._getOption({nFPS:30,nDuration:500},a||{});var c=this._wel.visible();if(c){if(this._fireEventBefore(true)){a.nDuration=Math.ceil(a.nDuration*(this._wel.height()/this._nLayerHeight));var b=this._getTransition().fps(a.nFPS).abort().detachAll();b.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(a.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nSlideMinWidth),height:jindo.Effect.cubicEaseOut(this._nSlideMinHeight)});
if(a.fCallback){b.queue(jindo.$Fn(a.fCallback,this).bind(this))}b.start()}}return this},unfold:function(c){c=this._getOption({nFPS:30,nDuration:500,nWidth:this._nSlideMinWidth,nHeight:this._nSlideMinHeight},c||{});var a=this._wel.visible(),d,b;if(!a){this._wel.css({width:0,height:0}).show().width(Math.max(c.nWidth,this._nSlideMinWidth)).height(Math.max(c.nHeight,this._nSlideMinHeight));d=c.nDuration/2;b=d}else{d=(c.nDuration/2)*(this._nLayerWidth-this._wel.width())/this._nLayerWidth;b=(c.nDuration/2)*(this._nLayerHeight-this._wel.height())/this._nLayerHeight
}if(b>0){var f=this;if(this._fireEventBefore(true)){var e=this._getTransition().fps(c.nFPS).abort().detachAll();e.attach({playing:function(g){if(g.nStep===1){this.detach("playing",arguments.callee);if(!a){f._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(d,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth)}).queue(b,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nLayerHeight)});if(c.fCallback){e.queue(jindo.$Fn(c.fCallback,this).bind(this))
}e.start()}}return this},fold:function(e){e=this._getOption({nFPS:30,nDuration:500,nWidth:this._nSlideMinWidth,nHeight:this._nSlideMinHeight},e||{});var c=this._wel.visible(),a,d;if(c){d=(e.nDuration/2)*this._wel.height()/this._nLayerHeight;a=(e.nDuration/2)*this._wel.width()/this._nLayerWidth;if(a>0){if(this._fireEventBefore(true)){var b=this._getTransition().fps(e.nFPS).abort().detachAll();b.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(d,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(Math.max(e.nHeight,this._nSlideMinHeight))}).queue(a,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(Math.max(e.nWidth,this._nSlideMinWidth))});
if(e.fCallback){b.queue(jindo.$Fn(e.fCallback,this).bind(this))}b.start()}}}return this},pullUp:function(b){b=this._getOption({nFPS:30,nDuration:500},b||{});var a=this._wel.visible();if(Math.ceil(this._wel.height())<this._nLayerHeight){if(this._fireEventBefore(true)){this._wel.css("position","absolute");if(!a){this._wel.css({height:0,top:parseInt(this._sLayerCSSTop,10)+this._nLayerHeight-this._nSlideMinHeight+"px"}).show().height(this._nSlideMinHeight)}else{b.nDuration=Math.ceil(b.nDuration*((this._nLayerHeight-this._wel.height())/(this._nLayerHeight-this._nSlideMinHeight)))
}var d=this,c=this._getTransition().fps(b.nFPS).abort().detachAll();c.attach({playing:function(e){if(e.nStep===1){this.detach("playing",arguments.callee);if(!a){d._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).attach({playing:function(e){d._wel.css("top",parseInt(d._sLayerCSSTop,10)+d._nLayerHeight-d._wel.height()+"px")}}).queue(b.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nLayerHeight)});if(b.fCallback){c.queue(jindo.$Fn(b.fCallback,this).bind(this))
}c.start()}}return this},pushDown:function(b){b=this._getOption({nFPS:30,nDuration:500},b||{});var a=this._wel.visible();if(a){if(this._fireEventBefore(true)){this._wel.css("position","absolute");b.nDuration=Math.ceil(b.nDuration*(this._wel.height()/this._nLayerHeight));var d=this,c=this._getTransition().fps(b.nFPS).abort().detachAll();c.attach({playing:function(e){d._wel.css("top",parseInt(d._sLayerCSSTop,10)+d._nLayerHeight-d._wel.height()+"px")},end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(b.nDuration,this._htTransitionGetterSetter,{height:jindo.Effect.cubicEaseOut(this._nSlideMinHeight)});
if(b.fCallback){c.queue(jindo.$Fn(b.fCallback,this).bind(this))}c.start()}}return this},condense:function(a){a=this._getOption({nFPS:30,nDuration:500,nScale:2},a||{});var d=this._wel.visible()&&this._wel.opacity()>0;if(d){a.nDuration*=((1-this._wel.opacity())/1)}else{this._wel.opacity(0);this._wel.show();this._wel.css({left:(parseInt(this._sLayerCSSLeft,10)-(this._nLayerWidth/2))+"px",top:(parseInt(this._sLayerCSSTop,10)-(this._nLayerHeight/2))+"px",width:(parseInt(this._sLayerCSSWidth,10)*a.nScale)+"px",height:(parseInt(this._sLayerCSSHeight,10)*a.nScale)+"px",fontSize:(parseInt(this._sLayerCSSFontSize,10)*a.nScale)+this._sLayerCSSFontSizeUnit})
}if(a.nDuration>0){if(this._fireEventBefore(true)){this._wel.css("position","absolute");var c=this,e=c.getLayer();var b=this._getTransition().fps(a.nFPS).abort().detachAll();b.attach({playing:function(f){if(f.nStep===1){this.detach("playing",arguments.callee);if(!d){c._fireEventAppear()}}},end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this)}).queue(a.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth),height:jindo.Effect.cubicEaseOut(this._nLayerHeight)},e,{"@left":jindo.Effect.cubicEaseOut(this._sLayerCSSLeft),"@top":jindo.Effect.cubicEaseOut(this._sLayerCSSTop),"@fontSize":jindo.Effect.cubicEaseOut(this._sLayerCSSFontSize),"@opacity":jindo.Effect.linear(1)});
if(a.fCallback){b.queue(jindo.$Fn(a.fCallback,this).bind(this))}b.start()}}return this},expand:function(b){b=this._getOption({nFPS:30,nDuration:500,nScale:2},b||{});if(this._wel.visible()&&this._wel.opacity()>0){if(this._fireEventBefore(true)){b.nDuration*=((this._wel.opacity())/1);this._wel.css("position","absolute");if(this._wel.css("left")=="auto"){this._wel.css("left",this._sLayerCSSLeft)}if(this._wel.css("top")=="auto"){this._wel.css("top",this._sLayerCSSTop)}var a=this._getTransition().fps(b.nFPS).abort().detachAll();
a.attach({end:jindo.$Fn(this._onHideTransitionEnd,this).bind(this)}).queue(b.nDuration,this._htTransitionGetterSetter,{width:jindo.Effect.cubicEaseOut(this._nLayerWidth*b.nScale),height:jindo.Effect.cubicEaseOut(this._nLayerHeight*b.nScale)},this.getLayer(),{"@left":jindo.Effect.cubicEaseOut((parseInt(this._sLayerCSSLeft,10)-(parseInt(this._sLayerCSSWidth,10))/2+"px")),"@top":jindo.Effect.cubicEaseOut((parseInt(this._sLayerCSSTop,10)-(parseInt(this._sLayerCSSHeight,10))/2+"px")),"@fontSize":jindo.Effect.cubicEaseOut(parseInt(this._sLayerCSSFontSize,10)+this._sLayerCSSFontSizeUnit,parseInt(this._sLayerCSSFontSize,10)*2+this._sLayerCSSFontSizeUnit),"@opacity":jindo.Effect.linear(0)});
if(b.fCallback){a.queue(jindo.$Fn(b.fCallback,this).bind(this))}a.start()}}return this},shake:function(a){a=this._getOption({nFPS:30,nDuration:500,nWidth:20,nCount:3},a||{});if(this._wel.visible()){if(this._fireEventBefore()){this._wel.css("position","absolute");var c=this,b=this._getTransition().fps(a.nFPS).abort().detachAll();b.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){c._wel.css("left",this._sLayerCSSLeft)}}).queue(a.nDuration,this.getLayer(),{"@left":jindo.Effect.wave(a.nCount)(this._sLayerCSSLeft,a.nWidth+"px")});
if(a.fCallback){b.queue(jindo.$Fn(a.fCallback,this).bind(this))}b.start()}}return this},blink:function(a){a=this._getOption({nFPS:30,nDuration:500,nOpacity:0,nCount:1},a||{});if(this._wel.visible()){if(this._fireEventBefore()){var c=this,b=this._getTransition().fps(a.nFPS).abort().detachAll();b.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){c._wel.opacity(1)}}).queue(a.nDuration,this.getLayer(),{"@opacity":jindo.Effect.wave(a.nCount)(1,a.nOpacity)});if(a.fCallback){b.queue(jindo.$Fn(a.fCallback,this).bind(this))
}b.start()}}return this},flicker:function(b){b=this._getOption({nFPS:30,nDuration:500,sBackgroundColor:"#ffff00"},b||{});var a=(this._sLayerBGColor=="transparent"||this._sLayerBGColor=="rgba(0, 0, 0, 0)")?"#ffffff":this._sLayerBGColor;if(this._wel.visible()){if(this._fireEventBefore()){var d=this,c=this._getTransition().fps(b.nFPS).abort().detachAll();c.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){d._wel.css("backgroundColor",d._sLayerBGColor)}}).queue(b.nDuration,this.getLayer(),{"@backgroundColor":jindo.Effect.cubicEaseIn(b.sBackgroundColor,a)}).queue(function(){d._wel.css("backgroundColor",d._sLayerBGColor)
});if(b.fCallback){c.queue(jindo.$Fn(b.fCallback,this).bind(this))}c.start()}}return this},bounce:function(a){a=this._getOption({nFPS:30,nDuration:500,nHeight:50},a||{});if(this._wel.visible()){if(this._fireEventBefore()){this._wel.css("position","absolute");var c=this,b=this._getTransition().fps(a.nFPS).abort().detachAll();b.attach({end:jindo.$Fn(this._onShowTransitionEnd,this).bind(this),abort:function(){c._wel.css("top",c._sLayerCSSTop)}}).queue(a.nDuration/5,this.getLayer(),{"@top":jindo.Effect.easeOut(this._sLayerCSSTop,(parseInt(this._sLayerCSSTop,10)-a.nHeight)+"px")}).queue(a.nDuration/5*4,this.getLayer(),{"@top":jindo.Effect.bounce(this._sLayerCSSTop)});
if(a.fCallback){b.queue(jindo.$Fn(a.fCallback,this).bind(this))}b.start()}}return this}}).extend(jindo.Component);jindo.LazyLoading={_bIE:jindo.$Agent().navigator().ie,_waLoading:jindo.$A([]),_waLoaded:jindo.$A([]),_whtScript:jindo.$H({}),_whtCallback:jindo.$H({})};jindo.LazyLoading.load=function(b,d,c){if(typeof d!="function"){d=function(){}}this._queueCallback(b,d);if(this._checkIsLoading(b)){return false}if(this._checkAlreadyLoaded(b)){this._doCallback(b);return true}this._waLoading.push(b);var f=this;
var e=document.getElementsByTagName("head")[0];var a=document.createElement("script");a.type="text/javascript";a.charset=c||"utf-8";a.src=b;this._whtScript.add(b,a);if(this._bIE){a.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){f._waLoaded.push(b);f._waLoading=f._waLoading.refuse(b);f._doCallback(b);this.onreadystatechange=null}}}else{a.onload=function(){f._waLoaded.push(b);f._waLoading=f._waLoading.refuse(b);f._doCallback(b)}}e.appendChild(a);return true
};jindo.LazyLoading._queueCallback=function(c,a){var b=this._whtCallback.$(c);if(b){b.push(a)}else{this._whtCallback.$(c,[a])}};jindo.LazyLoading._doCallback=function(a){var b=this._whtCallback.$(a).concat();for(var c=0;c<b.length;c++){this._whtCallback.$(a).splice(c,1);b[c]()}};jindo.LazyLoading.abort=function(b){if(this._checkIsLoading(b)){var a=this.getScriptElement(b);this._waLoading=this._waLoading.refuse(b);if(this._bIE){a.onreadystatechange=null}else{a.onload=null}jindo.$Element(a).leave();
this._whtScript.remove(b);this._whtCallback.remove(b);return true}else{return false}};jindo.LazyLoading._checkAlreadyLoaded=function(a){return this._waLoaded.has(a)};jindo.LazyLoading._checkIsLoading=function(a){return this._waLoading.has(a)};jindo.LazyLoading.getLoaded=function(){return this._waLoaded.$value()};jindo.LazyLoading.getLoading=function(){return this._waLoading.$value()};jindo.LazyLoading.getScriptElement=function(a){return this._whtScript.$(a)||null};jindo.MouseGesture=jindo.$Class({_elCanvas:null,_oDC:null,_htEventHandler:{},_aPointList:[],_nPointCount:0,_sDrawingType:"",_bMobileSafari:false,$init:function(b){this.option({sLineColor:"#FF0000",nLineThickness:5,nFilteringDistance:10,elTargetWindow:window});
this.option(b);var a=window.navigator.userAgent.toLowerCase();this._bMobileSafari=(/mobile/.test(a)&&/safari/.test(a))||/iphone/.test(a);this._htEventHandler.mouse_down=jindo.$Fn(this._onMouseDown,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchstart":"mousedown",true);this._createCanvas()},_createCanvas:function(){if(jindo.$Agent().navigator().ie){if(!this.option("elTargetWindow").document.namespaces.vml_nhn){this.option("elTargetWindow").document.namespaces.add("vml_nhn","urn:schemas-microsoft-com:vml")
}var a=this.option("elTargetWindow").document.createStyleSheet();a.cssText="vml_nhn\\:shape, vml_nhn\\:stroke {behavior:url(#default#VML); display:inline-block; position:absolute;width:1px;height:1px;};";this._elCanvas=jindo.$("<div>");this._sDrawingType="vml"}else{this._elCanvas=jindo.$("<canvas>");this._oDC=this._elCanvas.getContext("2d");this._sDrawingType="canvas";this._oDC.globalCompositeOperation="destination-over"}jindo.$Element(this._elCanvas).css({position:"absolute",top:"0px",left:"0px"}).hide().appendTo(this.option("elTargetWindow").document.body)
},_showCanvas:function(){var a=jindo.$Document(this.option("elTargetWindow").document).clientSize();var b=jindo.$Document(this.option("elTargetWindow").document).scrollPosition();if(this._sDrawingType=="canvas"){this._elCanvas.width=a.width;this._elCanvas.height=a.height}jindo.$Element(this._elCanvas).css({top:b.top+"px",width:a.width+"px",height:a.height+"px",zIndex:999999}).show()},_hideCanvas:function(){if(this._elCanvas){if(this._sDrawingType=="vml"){this._elCanvas.innerHTML=""}else{if(this._sDrawingType=="canvas"){this._oDC.beginPath();
this._oDC.clearRect(0,0,this._elCanvas.offsetWidth,this._elCanvas.offsetHeight);this._oDC.closePath()}}jindo.$Element(this._elCanvas).hide()}},_drawLine:function(b,c){if(this._sDrawingType=="vml"){var d=" m "+(b.nX*1-5)+","+(b.nY*1-5)+" l "+(c.nX*1-5)+","+(c.nY*1-5);var a='<vml_nhn:shape coordsize="1 1" strokeweight="'+this.option("nLineThickness")+'pt" strokecolor="'+this.option("sLineColor")+'" path="'+d+'"><vml_nhn:stroke endcap="round" /></vml_nhn:shape>';this._elCanvas.insertAdjacentHTML("BeforeEnd",a)
}else{if(this._sDrawingType=="canvas"){this._oDC.save();this._oDC.beginPath();this._oDC.lineCap="round";this._oDC.lineWidth=this.option("nLineThickness")+2;this._oDC.strokeStyle=this.option("sLineColor");this._oDC.moveTo(b.nX,b.nY);this._oDC.lineTo(c.nX,c.nY);this._oDC.stroke();this._oDC.closePath();this._oDC.restore()}}},_addPointList:function(c){var a;if(this._bMobileSafari){a={pageX:c._event.targetTouches[0].clientX,pageY:c._event.targetTouches[0].clientY}}else{a=c.pos()}var b={nX:a.clientX,nY:a.clientY};
this._aPointList.push(b);this._nPointCount++;return b},_onMouseDown:function(a){if(a.mouse().right||this._bMobileSafari){a.stop();this._addPointList(a);this._htEventHandler.mouse_move=jindo.$Fn(this._onMouseMove,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchmove":"mousemove");this._htEventHandler.mouse_up=jindo.$Fn(this._onMouseUp,this).attach(this.option("elTargetWindow").document,this._bMobileSafari?"touchend":"mouseup");if(this._sDrawingType=="vml"){this.option("elTargetWindow").document.body.setCapture()
}}},_onMouseMove:function(b){var a=this._addPointList(b);if(this._nPointCount===2){this._showCanvas()}if(this._nPointCount%2){this._drawLine({nX:this._aPointList[this._nPointCount-3]["nX"],nY:this._aPointList[this._nPointCount-3]["nY"]},a)}},_recognitionGesture:function(){var g,e,h,f,j,b,c,n;var k=[],d=[];var m=Math.tan(22.5*Math.PI/180);var l=Math.tan(67.5*Math.PI/180);for(var a=1;a<this._aPointList.length;a++){g=this._aPointList[a]["nX"];e=this._aPointList[a]["nY"];h=this._aPointList[a-1]["nX"];
f=this._aPointList[a-1]["nY"];n=Math.sqrt(Math.pow(e-f,2)+Math.pow(g-h,2));if(n>this.option("nFilteringDistance")){j=-(e-f)/(g-h);b=Math.abs(j);if(b>=l){if(e<f){c=8}else{c=4}}else{if(b<m){if(g<h){c=6}else{c=2}}else{if(b>=m&&b<l){if(j>0){c=1}else{c=3}if(g<h){c+=4}}}}k.push(c)}}for(a=1;a<k.length;a++){if(d.length===0){d.push(k[a])}else{if(d[d.length-1]!=k[a]){d.push(k[a])}}}return{aCodeList:d,sCode:d.join("")}},_onMouseUp:function(b){if(b.mouse().right||this._bMobileSafari){b.stop();if(this._htEventHandler.mouse_move){this._htEventHandler.mouse_move.detach(this.option("elTargetWindow").document,this._bMobileSafari?"touchmove":"mousemove")
}if(this._htEventHandler.mouse_up){this._htEventHandler.mouse_up.detach(this.option("elTargetWindow").document,this._bMobileSafari?"touchend":"mouseup")}if(this._aPointList.length&&!this._bMobileSafari){this._htEventHandler.setted_context_menu=this.option("elTargetWindow").document.oncontextmenu;this.option("elTargetWindow").document.oncontextmenu=function(){return false};setTimeout(jindo.$Fn(function(){this.option("elTargetWindow").document.oncontextmenu=this._htEventHandler.setted_context_menu},this).bind(),1)
}if(this._sDrawingType=="vml"){this.option("elTargetWindow").document.body.releaseCapture()}var a=this._recognitionGesture();if(a.sCode){this.fireEvent("gesture",a)}this._nPointCount=0;this._aPointList=[];this._hideCanvas()}},destroy:function(){jindo.$Element(this._elCanvas).leave();this._elCanvas=null;this._oDC=null;this._htEventHandler=null;this._nPointcount=null;this._aPointList=null;this._sDrawingType=null;this._bMobileSafari=null}}).extend(jindo.Component);jindo.CircularRolling=jindo.$Class({$init:function(){this.refresh()
},refresh:function(){this.getTransition().abort();this._el[this._oKeys.scrollLeft]=0;this._nDuplicateCount=0;this._nItemCount=this.getItems().length;this._nDisplayedCount=this.getDisplayedItemCount();if(this.isOverflowed()){this._nDuplicateCount=(this._nDisplayedCount<=(this._nItemCount/2))?1:2;this._duplicate(this._nDuplicateCount)}return this},_duplicate:function(g){var d=this._elList,f=jindo.$("<ul>"),b=d.innerHTML,a;for(var e=0;e<g;e++){f.innerHTML=b;a=jindo.$$("> li",f);for(var c=0;c<a.length;
c++){d.appendChild(a[c])}}},_setStartPosition:function(a,c){var e=this._oKeys;var b=a%(this._nItemCount)||0;if(c<0){var d=this._nDuplicateCount;if(b+this._nDisplayedCount>this._nItemCount){d-=1}b+=this._nItemCount*d}this._el[e.scrollLeft]=this._getPosition(b)},moveBy:function(b){if(this.isMoving()){return false}if(Math.abs(b)>this._nDisplayedCount){if(b>0){b=this._nDisplayedCount}else{b=-this._nDisplayedCount}}this._setStartPosition(this.getIndex(),b);var a=this.getIndex()+b;if(!this._move(a)){return false
}return true}}).extend(jindo.Rolling);jindo.SelectArea=jindo.$Class({_waToggleCandidate:null,_waSelected:null,_aSizeInfo:null,$init:function(b,c){this._el=jindo.$(b);this._wel=jindo.$Element(this._el);var a={bActivateOnload:true,sClassName:"selectable",htStatus:{sSelected:"selected"},bMultiSelection:true,bDragSelect:true,nThreshold:5,bDeselectAllOutside:true,bRemainOne:false,bToggleSelected:false};this.option(a);this.option(c||{});this._waToggleCandidate=jindo.$A([]);this._waSelected=jindo.$A([]);
this._sCtrl=(jindo.$Agent().os().mac)?"meta":"ctrl";this._welRectIndicator=null;this._wfDragStart=jindo.$Fn(this._onDragSelectStart,this);this._wfSelectStart=jindo.$Fn(this._onDragSelectStart,this);this._wfMouseDown=jindo.$Fn(this._onMouseDown,this);this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseUp=jindo.$Fn(this._onMouseUp,this);this._wfMouseUpWithinSelected=jindo.$Fn(this._onMouseUpWithinSelected,this);this._wfCompute=jindo.$Fn(this._computeSizeAndPos,this);if(this.option("bActivateOnload")){this.activate()
}},getSelectableElement:function(){return jindo.$$("."+this.option("sClassName"),this._el)},isSelectable:function(a){return jindo.$Element(a).isChildOf(this._el)&&jindo.$$.test(a,"."+this.option("sClassName"))},getIndex:function(a){return jindo.$A(this.getSelectableElement()).indexOf(a)},select:function(h,j,d){h=this._convertArray(h);if(typeof j=="undefined"){j=false}if(typeof d=="undefined"){d=true}if(!j||!this.option("bMultiSelection")){this.deselectAll(false)}var e=this._convertArray(this.getSelected()).concat();
var k=this.option("htStatus");for(var f=0;f<h.length;f++){var c=h[f];var b=jindo.$Element(c);var g;if(this.isSelectable(c)&&!this.isSelected(c)&&this.fireEvent("beforeSelect",g)){g={elSelectable:c,nIndex:this.getIndex(c),bSelectedAgain:(h.length===1&&this._vLastSelected===h[0])};b.addClass(k.sSelected);this._waSelected.push(c);this.fireEvent("select",g)}}if(d){this._fireChangeEvent(e)}return this},deselect:function(b,f){b=this._convertArray(b);if(typeof f=="undefined"){f=true}var d=this._convertArray(this.getSelected()).concat();
var j=this.option("htStatus");for(var h=0;h<b.length;h++){var e=b[h];var g=jindo.$Element(e);var c={elSelectable:e,nIndex:this.getIndex(e)};if(this.isSelectable(e)&&this.isSelected(e)&&this.fireEvent("beforeDeselect",c)){g.removeClass(j.sSelected);this._waSelected=this._waSelected.refuse(e);this.fireEvent("deselect",c)}}if(f){this._fireChangeEvent(d)}return this},deselectAll:function(a){if(typeof a=="undefined"){a=true}this.deselect(this.getSelectableElement(),a);return this},toggle:function(b,e){b=this._convertArray(b);
if(typeof e=="undefined"){e=true}for(var c=0;c<b.length;c++){var d=b[c];if(!this.isSelected(d)){this.select(d,true,e)}else{this.deselect(d,e)}}return this},getSelected:function(){if(this._waSelected.length()>0){return(this._waSelected.length()===1)?this._waSelected.get(0):this._waSelected.$value()}return null},isSelected:function(a){return this._waSelected.has(a)},_getSelectableUntil:function(a){var f=a;var b=this._elStartPoint;if(b&&this.isSelected(b)){var d=jindo.$A(this.getSelectableElement());
var c=d.indexOf(b);var e=d.indexOf(a);f=d.slice(Math.min(c,e),Math.min(c,e)+Math.abs(c-e)+1).$value()}return f},_findSelectableElement:function(b){var a=this.option("sClassName");return(jindo.$$.test(b,"."+a))?b:jindo.$$.getSingle("! ."+a,b)},_isChanged:function(b){var e=jindo.$A(b),c=this._convertArray(this.getSelected());if(b.length!=c.length){return true}for(var d=0;d<c.length;d++){if(!e.has(c[d])){return true}}return false},_fireChangeEvent:function(a){if(this._isChanged(a)){this.fireEvent("change")
}},_convertArray:function(b){if(!(b instanceof Array)){if(b){b=[b]}else{b=[]}}return b},_onMouseDown:function(e){var c=e.key();var d=this._findSelectableElement(e.element);var a=this._convertArray(this.getSelected()).concat();this._vLastSelected=this.getSelected();this._waSelectable=jindo.$A(this.getSelectableElement());this._waLastSelected=jindo.$A(this._convertArray(this._vLastSelected));if(d){var g=jindo.$A(this._convertArray(this._vLastSelected)).has(d);if(this.fireEvent("selectStart",{vLastSelected:this._vLastSelected,elSelectable:d,bWithinSelected:g,weEvent:e})){if(g&&!c.shift&&!c[this._sCtrl]){this._elWaitMouseUp=d;
this._wfMouseUpWithinSelected.attach(this._elWaitMouseUp,"mouseup")}else{var f=false;if(this.option("bMultiSelection")){if(c.shift){if(c[this._sCtrl]){f=true}var b=this._getSelectableUntil(d);if(b==d){this._elStartPoint=d}this.select(b,f,false)}else{this._elStartPoint=d;if(c[this._sCtrl]){this.toggle(d,false)}else{this.select(d,f,false)}}}else{if(!this.option("bRemainOne")&&this.option("bToggleSelected")&&this.getSelected()==d){this.deselect(d,false)}else{this.select(d,f,false)}}this._fireChangeEvent(a);
this.fireEvent("selectEnd",{vSelected:this.getSelected()})}}}else{this._wfMouseUp.attach(document,"mouseup");this._wfCompute.attach(window,"resize").attach(this._el,"scroll");if(this.option("bMultiSelection")&&this.option("bDragSelect")){this._bOverThreshold=null;this._htDragStartPos=e.pos();this._htDragStartPos.scrollTop=this._el.scrollTop;this._htDragStartPos.scrollLeft=this._el.scrollLeft;this._wfMouseMove.attach(document,"mousemove")}}},_onDragSelectStart:function(a){a.stop(jindo.$Event.STOP_DEFAULT)
},_getRectangleElement:function(){if(!this._welRectIndicator&&this.option("bMultiSelection")&&this.option("bDragSelect")){this._welRectIndicator=jindo.$Element(jindo.$('<div style="position:absolute;left:-10px;top:-10px;width:1px;height:1px;margin:0;padding:0;border:1px dotted black;z-index:99999;">'));this._welRectIndicator.appendTo(this._el)}return this._welRectIndicator},getRectangleElement:function(){return this._getRectangleElement().$value()},_computeSizeAndPos:function(){var a=this._aSizeInfo=[];
jindo.$A(this.getSelectableElement()).forEach(function(b){a.push([b,b.offsetLeft,b.offsetTop,b.offsetLeft+b.offsetWidth,b.offsetTop+b.offsetHeight])})},_onMouseMove:function(i){this._htDragEndPos=i.pos();var g=this._getRectangleElement(),a=g.$value();var h=this._htDragEndPos.pageX-this._htDragStartPos.pageX;var f=this._htDragEndPos.pageY-this._htDragStartPos.pageY;var e=this._htDragStartPos.layerX;var c=this._htDragStartPos.layerY;var d=this.option("nThreshold");if(d&&!this._bOverThreshold){var j=Math.sqrt(h*h+f*f);
if(d>j){return}this.fireEvent("dragStart");this._bOverThreshold=true;this._computeSizeAndPos();this._nRectX=e;this._nRectY=c;this._nDragDirectionX=1;this._nDragDirectionY=1;g.offset(c,e);if(!i.key()[this._sCtrl]){this.deselectAll(false)}}var k=h;var b=f;this._placeRect(e,c,k,b);this._setToggleCandidate(this._getSelectableByRect([a,a.offsetLeft,a.offsetTop,a.offsetLeft+a.offsetWidth,a.offsetTop+a.offsetHeight]))},_placeRect:function(a,e,c,b){var d=this._getRectangleElement();d.show();this._nDragDirectionX=(a>this._nRectX)?1:-1;
this._nDragDirectionY=(e>this._nRectY)?1:-1;c-=((this._el.scrollLeft-this._htDragStartPos.scrollLeft)*this._nDragDirectionX);b-=((this._el.scrollTop-this._htDragStartPos.scrollTop)*this._nDragDirectionY);d.width(Math.max(Math.abs(c),2)).height(Math.max(Math.abs(b),2));a+=Math.min(c,0);e+=Math.min(b,0);d.css("left",a+"px").css("top",e+"px")},_getSelectableByRect:function(b){var a=[];jindo.$A(this._aSizeInfo).forEach(function(c){if(c[1]<b[3]&&c[3]>b[1]&&c[2]<b[4]&&c[4]>b[2]){a.push(c[0]);jindo.$A.Continue()
}});return a},_setToggleCandidate:function(b){b=this._convertArray(b);var d=false;if(this._waToggleCandidate.length()!=b.length){d=true}var c=this.option("htStatus");var f=jindo.$A(b);var e=jindo.$A([]);this._waToggleCandidate.forEach(function(g,a){if(!f.has(g)){e.push(g);d=true}});if(d){e.forEach(function(a){this._waToggleCandidate=this._waToggleCandidate.refuse(a);jindo.$Element(a).toggleClass(c.sSelected)},this);f.forEach(function(a){if(this.isSelected(a)){jindo.$Element(a).removeClass(c.sSelected)
}else{jindo.$Element(a).addClass(c.sSelected)}},this);this._waToggleCandidate=jindo.$A(this._waToggleCandidate.$value().concat(b)).unique();this.fireEvent("dragSelecting",{aSelectable:this._waToggleCandidate.$value()})}},_onMouseUp:function(b){var a=(!this.isDragging()&&!b.key()[this._sCtrl]&&(!this.option("bRemainOne")&&this.option("bDeselectAllOutside"))),d=this._waToggleCandidate.length(),c=this._convertArray(this.getSelected()).concat();if(a){this.deselectAll(false)}if(d){this._elStartPoint=this._waToggleCandidate.$value()[0];
this.toggle(this._waToggleCandidate.$value())}this._fireChangeEvent(c);this._stopDragging()},stopSelecting:function(){this._wfMouseUpWithinSelected.detach(this._elWaitMouseUp,"mouseup");return this},isDragging:function(){return this._bOverThreshold},_restore:function(){jindo.$ElementList(this._waToggleCandidate.$value()).removeClass(this.option("htStatus").sSelected);this.deselectAll(false);if(this._waLastSelected.$value().length){this.select(this._waLastSelected.$value(),false,false)}},_stopDragging:function(){this._waToggleCandidate.empty();
this._htDragStartPos=null;this._htDragEndPos=null;this._wfMouseMove.detach(document,"mousemove");this._wfMouseUp.detach(document,"mouseup");this._wfCompute.detach(window,"resize").detach(this._el,"scroll");if(this.isDragging()){this._bOverThreshold=null;this._getRectangleElement().hide();this.fireEvent("dragEnd")}},stopDragging:function(){if(this.isDragging()){this._restore();this._stopDragging()}return this},_onMouseUpWithinSelected:function(b){this.stopSelecting();var a=this._findSelectableElement(b.element);
if(a&&a==b.currentElement){this.deselectAll(false);this.select(a,false,true)}},_onActivate:function(){this._sMozUserSelect=this._wel.css("MozUserSelect");this._wel.css("MozUserSelect","none");this._wfMouseDown.attach(this._el,"mousedown");this._wfDragStart.attach(this._el,"dragstart");this._wfSelectStart.attach(this._el,"selectstart")},_onDeactivate:function(){this._wel.css("MozUserSelect",this._sMozUserSelect);this._wfMouseDown.detach(this._el,"mousedown");this._wfDragStart.detach(this._el,"dragstart");
this._wfSelectStart.detach(this._el,"selectstart")}}).extend(jindo.UIComponent);jindo.MultipleAjaxRequest=jindo.$Class({_bIsRequesting:false,$init:function(a){var b={sMode:"parallel"};this.option(b);this.option(a)},isRequesting:function(){return this._bIsRequesting},request:function(a,b){if(this.isRequesting()){return false}if(!(a instanceof Array)){a=[a]}if(typeof b=="undefined"){b={}}this._htMetaData=b;switch(this.option("sMode")){case"parallel":this._parallelRequest(a);break;case"serial":this._serialRequest(a);
break;default:return false}return true},_fireEventStart:function(){this._bIsRequesting=true;if(this.fireEvent("start",{aAjax:this._aAjax,htMetaData:this._htMetaData})){return true}else{this.abort();return false}},_fireEventBeforeEachRequest:function(a){if(this.fireEvent("beforeEachRequest",{oAjax:this._aAjax[a],nIndex:a})){return true}else{this.abort();return false}},_fireEventAfterEachResponse:function(a){if(this.fireEvent("afterEachResponse",{oAjax:this._aAjax[a],nIndex:a})){return true}else{this.abort();
return false}},_parallelRequest:function(b){this._aAjaxData=b;this._aAjax=[];this._aStatus=[];this._aStatus.length=b.length;this._aResponse=[];if(this._fireEventStart()){var a=this;jindo.$A(this._aAjaxData).forEach(function(c,e){var d=function(g){g._constructor=a._aAjax[e];var f=a._findAjaxObjectIndexOfResponse(g._constructor);a._aResponse[f]=g;a._aStatus[f]=true;if(a._fireEventAfterEachResponse(f)){if(a._hasCompletedGotResponsesOfParallelResponses()){a._complete()}}};a._aAjax.push(jindo.$Ajax(c.sUrl,c.htOption));
c.htOption.onload=d;c.htOption.onerror=d;c.htOption.ontimeout=d;a._aAjax[e].option(c.htOption);if(a._fireEventBeforeEachRequest(e)){a._aAjax[e].request(c.htParameter)}else{jindo.$A.Break()}})}},_findAjaxObjectIndexOfResponse:function(a){return jindo.$A(this._aAjax).indexOf(a)},_hasCompletedGotResponsesOfParallelResponses:function(){var a=true;jindo.$A(this._aStatus).forEach(function(b){if(!b){a=false;jindo.$A.Break()}});return a},_serialRequest:function(b){this._aAjaxData=b;this._aAjax=[];this._aStatus=[];
this._aStatus.length=b.length;this._aResponse=[];var a=this;jindo.$A(this._aAjaxData).forEach(function(d,c){var e=function(f){f._constructor=a._aAjax[c];a._aResponse.push(f);a._serialRequestNext()};a._aAjax.push(jindo.$Ajax(d.sUrl,d.htOption));d.htOption.onload=e;d.htOption.onerror=e;d.htOption.ontimeout=e;a._aAjax[c].option(d.htOption)});if(this._fireEventStart()){if(this._fireEventBeforeEachRequest(0)){this._aAjax[0].request(this._aAjaxData[0].htParameter);this._aStatus[0]=true}}},_serialRequestNext:function(){var a=-1;
for(var b=0;b<this._aStatus.length;b++){if(!this._aStatus[b]){this._aStatus[b]=true;a=b;break}}if(a>0){if(this._fireEventAfterEachResponse(a-1)){if(this._fireEventBeforeEachRequest(a)){this._aAjax[a].request(this._aAjaxData[a].htParameter)}}}else{if(a==-1){if(this._fireEventAfterEachResponse(this._aStatus.length-1)){this._complete()}}}},_reset:function(){this._aAjaxData.length=0;this._aAjax.length=0;this._aStatus.length=0;this._aResponse.length=0;this._htMetaData=null;delete this._aAjaxData;delete this._aAjax;
delete this._aStatus;delete this._aResponse;delete this._htMetaData;this._bIsRequesting=false},abort:function(){jindo.$A(this._aAjax).forEach(function(a){a.abort()});this._reset()},_complete:function(){var c=this._aResponse.concat(),a={},b;for(b in this._htMetaData){a[b]=this._htMetaData[b]}this._reset();this.fireEvent("complete",{aResponse:c,htMetaData:a})}}).extend(jindo.Component);jindo.Accordion=jindo.$Class({$init:function(a,b){this._el=jindo.$(a);this.option({sClassPrefix:"accordion-",sDirection:"vertical",sExpandEvent:"click",nDefaultIndex:null,bToggle:false,nDuration:300,nFPS:30,fExpandEffect:jindo.Effect.cubicEaseOut,fContractEffect:jindo.Effect.cubicEaseIn,nExpandDelay:0,nContractDelay:0,bActivateOnload:true});
this.option(b||{});this._nExpanded=null;this._oTimer=new jindo.Timer();this._oTransition=new jindo.Transition({bCorrection:true}).fps(this.option("nFPS"));this._wfOnMouseOver=jindo.$Fn(this._onMouseOver,this);this._wfOnMouseOut=jindo.$Fn(this._onMouseOut,this);this._wfOnExpandEvent=jindo.$Fn(this._onExpandEvent,this);if(this.option("bActivateOnload")){this.activate()}},getBaseElement:function(){return this._el},_onActivate:function(){this._wfOnExpandEvent.attach(this._el,this.option("sExpandEvent"));
this._wfOnMouseOver.attach(this._el,"mouseover");this._wfOnMouseOut.attach(this._el,"mouseout");var a=this.option("nDefaultIndex");if(typeof a=="number"){this.expand(a)}},_onDeactivate:function(){this._wfOnExpandEvent.detach(this._el,this.option("sExpandEvent"));this._wfOnMouseOver.detach(this._el,"mouseover");this._wfOnMouseOut.detach(this._el,"mouseout")},_getBlock:function(b){var a=this.option("sClassPrefix");return(jindo.$Element(b).hasClass(a+"block"))?b:jindo.$$.getSingle("! ."+a+"block",b)
},_onMouseOver:function(d){var e=d.element,a=this._getBlock(e),b=(a)?jindo.$A(this.getAllBlocks()).indexOf(a):null;if(typeof b=="number"){var c=this.getHandler(b);if(c===a||e===c||jindo.$Element(e).isChildOf(c)){this.fireEvent(d.type,{nIndex:b,elBlock:a,elHandler:c,weEvent:d})}}},_onExpandEvent:function(d){var e=d.element,a=this._getBlock(e),b=(a)?jindo.$A(this.getAllBlocks()).indexOf(a):null;if(typeof b=="number"){var c=this.getHandler(b);if(c===a||e===c||jindo.$Element(e).isChildOf(c)){if(this.option("bToggle")&&this.getExpanded()===b){this.contractAll()
}else{this.expand(b)}}}},_onMouseOut:function(d){var a=d.element,b=this._getBlock(a),c=(b)?jindo.$Element(b).parent().indexOf(b):null;if(b&&typeof c=="number"){this.fireEvent(d.type,{nIndex:c,elBlock:b,elHandler:this.getHandler(c),weEvent:d})}},_getHeadSize:function(b){var a=this.getHead(b);a.style.zoom=1;return{width:jindo.$Element(a).width(),height:jindo.$Element(a).height()}},_getBodySize:function(b){var a=this.getBody(b);a.style.zoom=1;return{width:jindo.$Element(a).width(),height:jindo.$Element(a).height()}
},getTransition:function(){return this._oTransition},expand:function(d){var b=this.getAllBlocks(),e=this;d=Math.max(0,Math.min(b.length,d));if(this.getExpanded()===d){return this}var f={nIndex:d,elBlock:b[d],elHandler:this.getHandler(d)};if(this.fireEvent("beforeExpand",f)){var a=e.option("fExpandEffect"),c=[this.option("nDuration")];jindo.$A(b).forEach(function(j,h,k){var g=e._getHeadSize(h),i=e._getBodySize(h);switch(e.option("sDirection")){case"vertical":if(h==d){c.push(k[h],{"@height":a(i.height+g.height+"px")})
}else{c.push(k[h],{"@height":a(g.height+"px")})}break;case"horizontal":if(h==d){c.push(k[h],{"@width":a(i.width+g.width+"px")})}else{c.push(k[h],{"@width":a(g.width+"px")})}break}});this._oTimer.abort();this._oTimer.start(function(){e._setExpanded(d);e._oTransition.abort().queue.apply(e._oTransition,c).start(function(){e.fireEvent("expand",f)})},this.option("nExpandDelay"))}return this},expandAll:function(){return this},contractAll:function(){var b=this,c=b.option("fContractEffect"),a=[this.option("nDuration")];
jindo.$A(this.getAllBlocks()).forEach(function(e,d,f){var g=b._getHeadSize(d);switch(b.option("sDirection")){case"vertical":a.push(f[d],{"@height":c(g.height+"px")});break;case"horizontal":a.push(f[d],{"@width":c(g.width+"px")});break}});if(this.fireEvent("beforeContract")){this._oTimer.start(function(){b._setExpanded(null);b._oTransition.abort().queue.apply(b._oTransition,a).start(function(){b.fireEvent("contract")})},this.option("nContractDelay"))}return this},_setExpanded:function(a){this._nExpanded=a
},getExpanded:function(){return this._nExpanded},getBlock:function(a){return this.getAllBlocks()[a]},getAllBlocks:function(){return jindo.$$("."+this.option("sClassPrefix")+"block",this._el)},getHead:function(a){return jindo.$$.getSingle("dt",this.getBlock(a))},getBody:function(a){return jindo.$$.getSingle("dd",this.getBlock(a))},getHandler:function(b){var a=this.getHead(b);return jindo.$$.getSingle("."+this.option("sClassPrefix")+"handler",a)||a}}).extend(jindo.UIComponent);jindo.DatePicker=jindo.$Class({_aDatePickerSet:[],_htSelectedDatePickerSet:null,$init:function(b,a){var c=new Date();
this.htDefaultOption={bUseLayerPosition:true,Calendar:{sClassPrefix:"calendar-",nYear:c.getFullYear(),nMonth:c.getMonth()+1,nDate:c.getDate(),sTitleFormat:"yyyy-mm",aMonthTitle:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"]},LayerManager:{sCheckEvent:"click",nShowDelay:0,nHideDelay:0},LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0,bAuto:false}};this.option(this.htDefaultOption);this.option(a);this._elCalendarLayer=jindo.$(b);this._initCalendar();
this._initLayerManager();this._initLayerPosition();this._wfFocusInput=jindo.$Fn(this._onFocusInput,this);this._wfClickLinkedElement=jindo.$Fn(this._onClickLinkedElement,this);this._wfMouseOverDate=jindo.$Fn(this._onMouseOverDate,this);this._wfMouseOutDate=jindo.$Fn(this._onMouseOutDate,this);this._wfClickDate=jindo.$Fn(this._onClickDate,this);this.activate()},addDatePickerSet:function(e){var a=this.option(),d=this.getCalendar().option(),c={nYear:d.nYear,nMonth:d.nMonth,nDate:d.nDate,bDefaultSet:true,bReadOnly:true,sDateFormat:"yyyy-mm-dd",htSelectableDateFrom:{nYear:1900,nMonth:1,nDate:1},htSelectableDateTo:{nYear:2100,nMonth:12,nDate:31}};
if(typeof e.htOption!="undefined"){for(var b in e.htOption){if(typeof c[b]!="undefined"){c[b]=e.htOption[b]}}}e.htOption=c;this._aDatePickerSet.push(e);var f=this.getLayerManager();if(typeof e.elInput!="undefined"){f.link(e.elInput);if(e.htOption.bReadOnly){e.elInput.readOnly=true}this._wfFocusInput.attach(e.elInput,"focus");this._wfClickLinkedElement.attach(e.elInput,"click")}if(typeof e.elButton!="undefined"){f.link(e.elButton);this._wfClickLinkedElement.attach(e.elButton,"click")}if(e.htOption.bDefaultSet){this._setDate(e,e.htOption)
}return this},removeDatePickerSet:function(a){var f=-1;for(var b=0,e=this._aDatePickerSet.length;b<e;b++){if(this._aDatePickerSet[b].elInput==a.elInput||this._aDatePickerSet[b].elButton==a.elButton){f=b;break}}var c=this._aDatePickerSet[f];var d=this.getLayerManager();if(typeof c.elButton!="undefined"){d.unlink(c.elButton);this._wfClickLinkedElement.detach(c.elButton,"click")}if(typeof c.elInput!="undefined"){this._wfFocusInput.detach(c.elInput,"focus");this._wfClickLinkedElement.detach(c.elInput,"click");
c.elInput.readOnly=false}if(c==this._htSelectedDatePickerSet){this._htSelectedDatePickerSet=null}this._aDatePickerSet.splice(b,1);return this},getDatePickerSet:function(a){if(typeof a=="undefined"){return this._aDatePickerSet}for(var c=0,b=this._aDatePickerSet.length;c<b;c++){if(this._aDatePickerSet[c].elInput==a||this._aDatePickerSet[c].elButton==a){return this._aDatePickerSet[c]}}return false},getCalendarLayer:function(){return this._elCalendarLayer},_initCalendar:function(){var a=this;this._oCalendar=new jindo.Calendar(this.getCalendarLayer(),this.option("Calendar")).attach({beforeDraw:function(b){if(!a.fireEvent("beforeDraw",b)){b.stop()
}},draw:function(b){var c=this.option("sClassPrefix");var d=a._htSelectedDatePickerSet;if(a.isSelectable(d,b)){b.bSelectable=true;if(jindo.Calendar.isSameDate(b,d)){jindo.$Element(b.elDateContainer).addClass(c+"selected")}}else{b.bSelectable=false;jindo.$Element(b.elDateContainer).addClass(this.option("sClassPrefix")+"unselectable")}if(!a.fireEvent("draw",b)){b.stop()}},afterDraw:function(b){a.fireEvent("afterDraw",b)}})},getCalendar:function(){return this._oCalendar},_initLayerManager:function(){var b=this;
var a=this.getCalendarLayer();this._oLayerManager=new jindo.LayerManager(a,this.option("LayerManager")).attach({hide:function(c){b._htSelectedDatePickerSet=null}}).link(a)},getLayerManager:function(){return this._oLayerManager},_initLayerPosition:function(){if(this.option("bUseLayerPosition")){this._oLayerPosition=new jindo.LayerPosition(null,this.getCalendarLayer(),this.option("LayerPosition"))}},getLayerPosition:function(){return this._oLayerPosition},getInput:function(a){if(typeof a!="undefined"){return a.elInput||null
}if(this._htSelectedDatePickerSet){return this._htSelectedDatePickerSet.elInput||null}return null},setInput:function(b,a){this._setDate(b,a)},getDate:function(a){return{nYear:a.nYear,nMonth:a.nMonth,nDate:a.nDate}},_setDate:function(b,a){b.nYear=a.nYear*1;b.nMonth=a.nMonth*1;b.nDate=a.nDate*1;if(typeof b.elInput!="undefined"){b.elInput.value=this._getDateFormat(b,a)}},isSelectable:function(b,a){return jindo.Calendar.isBetween(a,b.htOption.htSelectableDateFrom,b.htOption.htSelectableDateTo)},setDate:function(a,c){if(this.isSelectable(a,c)){var d=this._getDateFormat(a,c);
var b={sText:d,nYear:c.nYear,nMonth:c.nMonth,nDate:c.nDate};if(this.fireEvent("beforeSelect",b)){this._setDate(a,c);this.getLayerManager().hide();this.fireEvent("select",b)}return true}return false},_getDateFormat:function(d,f){var a=f.nYear;var c=f.nMonth;var e=f.nDate;if(c<10){c=("0"+(c*1)).toString()}if(e<10){e=("0"+(e*1)).toString()}var b=d.htOption.sDateFormat;b=b.replace(/yyyy/g,a).replace(/y/g,(a).toString().substr(2,2)).replace(/mm/g,c).replace(/m/g,(c*1)).replace(/M/g,this.getCalendar().option("aMonthTitle")[c-1]).replace(/dd/g,e).replace(/d/g,(e*1));
return b},_linkOnly:function(a){var b=this.getLayerManager();b.setLinks([this.getCalendarLayer()]);if(typeof a.elInput!="undefined"){b.link(a.elInput)}if(typeof a.elButton!="undefined"){b.link(a.elButton)}},_onActivate:function(){var a=this.getCalendarLayer();this._wfMouseOverDate.attach(a,"mouseover");this._wfMouseOutDate.attach(a,"mouseout");this._wfClickDate.attach(a,"click");this.getLayerManager().activate();this.getCalendar().activate()},_onDeactivate:function(){var a=this.getCalendarLayer();
this._wfMouseOverDate.detach(a,"mouseover");this._wfMouseOutDate.detach(a,"mouseout");this._wfClickDate.detach(a,"click").detach(a,"mouseover").detach(a,"mouseout");this.getLayerManager().deactivate();this.getCalendar().deactivate()},attachEvent:function(){return this.activate()},detachEvent:function(){return this.deactivate()},addButton:function(){return this},_onFocusInput:function(a){this.fireEvent("focus",{element:a.element})},_onClickLinkedElement:function(d){d.stop(jindo.$Event.CANCEL_DEFAULT);
if(this.fireEvent("click",{element:d.element})){var b=this.getDatePickerSet(d.currentElement);if(b){this._htSelectedDatePickerSet=b;this._linkOnly(b);if(!b.nYear){b.nYear=b.htOption.nYear}if(!b.nMonth){b.nMonth=b.htOption.nMonth}if(!b.nDate){b.nDate=b.htOption.nDate}var c=b.nYear;var a=b.nMonth;this.getCalendar().draw(c,a);this.getLayerManager().show();if(this.option("bUseLayerPosition")){if(typeof b.elLayerPosition!="undefined"){this.getLayerPosition().setElement(b.elLayerPosition).setPosition()
}else{this.getLayerPosition().setElement(b.elInput).setPosition()}}}}},_getTargetDateElement:function(c){var b=this.getCalendar().option("sClassPrefix");var a=(jindo.$Element(c).hasClass(b+"date"))?c:jindo.$$.getSingle("."+b+"date",c);if(a&&(a==c||a.length==1)){return a}return null},_getTargetDateContainerElement:function(b){var a=this.getCalendar().option("sClassPrefix");var c=jindo.$$.getSingle("! ."+a+"week",b);if(c){var d=b;while(!jindo.$Element(d.parentNode).hasClass(a+"week")){d=d.parentNode
}if(jindo.$Element(d).hasClass(a+"unselectable")){return null}return d}else{return null}},_setSelectedAgain:function(){if(this._elSelected){var a=this.getCalendar().option("sClassPrefix");jindo.$Element(this._elSelected).addClass(a+"selected");this._elSelected=null}},_setAsideSelected:function(){if(!this._elSelected){var a=this.getCalendar().option("sClassPrefix");this._elSelected=jindo.$$.getSingle("."+a+"selected",this.elWeekAppendTarget);if(this._elSelected){jindo.$Element(this._elSelected).removeClass(a+"selected")
}}},_onMouseOverDate:function(d){var e=this.getCalendar().option("sClassPrefix");var c=this._getTargetDateContainerElement(d.element);if(c){var b=this.getCalendar().getDateOfElement(c);var a={element:d.element,nYear:b.nYear,nMonth:b.nMonth,nDate:b.nDate,bSelectable:false};if(this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,b)){this._setAsideSelected();jindo.$Element(c).addClass(e+"over");a.bSelectable=true}this.fireEvent("mouseover",a)}},_onMouseOutDate:function(d){var e=this.getCalendar().option("sClassPrefix");
var c=this._getTargetDateContainerElement(d.element);if(c){var b=this.getCalendar().getDateOfElement(c);var a={element:d.element,nYear:b.nYear,nMonth:b.nMonth,nDate:b.nDate,bSelectable:false};if(this._htSelectedDatePickerSet&&this.isSelectable(this._htSelectedDatePickerSet,b)){jindo.$Element(c).removeClass(e+"over");a.bSelectable=true;this._setSelectedAgain()}this.fireEvent("mouseout",a)}else{this._setSelectedAgain()}},_onClickDate:function(d){d.stop(jindo.$Event.CANCEL_DEFAULT);var e=d.element;var a=this._getTargetDateElement(e);
if(a){var c=this._getTargetDateContainerElement(a);if(c){var b=this.getCalendar().getDateOfElement(c);if(this.isSelectable(this._htSelectedDatePickerSet,b)){this.setDate(this._htSelectedDatePickerSet,b)}}}}}).extend(jindo.UIComponent);jindo.DefaultTextValue=jindo.$Class({$init:function(a,b){this.option({sValue:"",bActivateOnload:true});this.option(b||{});this._elBaseTarget=jindo.$(a);this._wfOnFocusAndBlur=jindo.$Fn(this._onFocusAndBlur,this);if(this.option("bActivateOnload")){this.activate()}},getBaseElement:function(){return this._elBaseTarget
},setDefault:function(){this.getBaseElement().value=this.option("sValue");return this},setDefaultValue:function(b){var a=this.option("sValue");this.option("sValue",b);if(this.getBaseElement().value==a){this.setDefault()}return this},getDefaultValue:function(){return this.option("sValue")},paint:function(){return this},_onActivate:function(){var a=this.getBaseElement();if(a.value==""){this.setDefault()}this._wfOnFocusAndBlur.attach(a,"focus").attach(a,"blur")},_onDeactivate:function(){var a=this.getBaseElement();
this._wfOnFocusAndBlur.detach(a,"focus").detach(a,"blur")},_onFocusAndBlur:function(b){var c=this._elBaseTarget;var a=c.value;switch(b.type){case"focus":if(a==this.getDefaultValue()){c.value="";c.select()}break;case"blur":if(jindo.$S(a).trim().$value()==""){this.setDefault()}break}}}).extend(jindo.UIComponent);jindo.FloatingLayer=jindo.$Class({$init:function(a,b){this._el=jindo.$(a);this._wel=jindo.$Element(a);this.option({nDelay:0,nDuration:500,fEffect:jindo.Effect.easeOut,bActivateOnload:true});
this.option(b||{});this._htPos=this._getPosition();this._oTransition=new jindo.Transition().fps(60);this._oTimer=new jindo.Timer();this._wfScroll=jindo.$Fn(this._onScroll,this);if(this.option("bActivateOnload")){this.activate()}},getTransition:function(){return this._oTransition},getTimer:function(){return this._oTimer},_onActivate:function(){var a=this;setTimeout(function(){a._onScroll()},0);this._wfScroll.attach(window,"scroll").attach(window,"resize")},_onDeactivate:function(){this._wfScroll.detach(window,"scroll").detach(window,"resize")
},_getPosition:function(){var b=this._el;var a=this._wel;var e=b.style.left;var i=b.style.right;var f=b.style.top;var d=b.style.bottom;var c={sAlignX:e?"left":(i?"right":null),sAlignY:f?"top":(d?"bottom":null)};var g=a.offset();var h=jindo.$Document().clientSize();switch(c.sAlignX){case"left":c.nX=g.left;break;case"right":c.nX=Math.max(h.width-g.left-a.width(),parseFloat(i));break}switch(c.sAlignY){case"top":c.nY=g.top;break;case"bottom":c.nY=Math.max(h.height-g.top-a.height(),parseFloat(d));break
}return c},_onScroll:function(){var a=this;this._oTimer.start(function(){a._paint()},this.option("nDelay"))},_paint:function(){var h=document.documentElement||document;var a=document.body;var m=this._el;var k=this._wel;var b=this._htPos;var d={};var f=jindo.$Element(m).offset();var g,e;var j={nX:null,nY:null};if(b.sAlignX){switch(b.sAlignX){case"left":d.x=h.scrollLeft||a.scrollLeft;g=f.left-d.x;break;case"right":d.x=(h.scrollLeft||a.scrollLeft)+jindo.$Document().clientSize().width;g=d.x-(f.left+k.width());
break}j.nX=parseFloat(k.css(b.sAlignX))+(b.nX-g)}if(b.sAlignY){switch(b.sAlignY){case"top":d.y=h.scrollTop||a.scrollTop;e=f.top-d.y;break;case"bottom":d.y=(h.scrollTop||a.scrollTop)+jindo.$Document().clientSize().height;e=d.y-(f.top+k.height());break}j.nY=parseFloat(k.css(b.sAlignY))+(b.nY-e)}this.fireEvent("beforeMove",j);var l={};var c=this.option("fEffect");if(j.nX!==null){l["@"+b.sAlignX]=c(j.nX+"px")}if(j.nY!==null){l["@"+b.sAlignY]=c(j.nY+"px")}var i=this;this._oTransition.abort().start(this.option("nDuration"),m,l).start(function(){i.fireEvent("move")
})}}).extend(jindo.UIComponent);jindo.NumericStepper=jindo.$Class({_bIsOnFocus:false,$init:function(a,b){this._el=jindo.$(a);this.option({sClassPrefix:"ns-",bActivateOnload:true,bUseMouseWheel:false,nStep:1,nDecimalPoint:0,nMin:-Infinity,nMax:Infinity,nDefaultValue:0,bInputReadOnly:true});this.option(b||{});this._assignHTMLElements();this._wfPlusClick=jindo.$Fn(this._onPlusClick,this);this._wfMinusClick=jindo.$Fn(this._onMinusClick,this);this._wfWheel=jindo.$Fn(this._onWheel,this);this._wfFocus=jindo.$Fn(this._onFocus,this);
this._wfBlur=jindo.$Fn(this._onBlur,this);if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){var a=this.option("sClassPrefix");this._elInput=jindo.$$.getSingle("."+a+"input",this._el);this._elPlusButton=jindo.$$.getSingle("."+a+"plus",this._el);this._elMinusButton=jindo.$$.getSingle("."+a+"minus",this._el)},reset:function(){this._elInput.value=this.option("nDefaultValue").toFixed(this.option("nDecimalPoint"))},getValue:function(){return parseFloat(this._elInput.value)
},setValue:function(b){if(isNaN(b)){this._elInput.value=this.option("nDefaultValue");return}b=b.toFixed(this.option("nDecimalPoint"));var c=this.option("nMin"),d=this.option("nMax"),a={nValue:b,nMin:c,nMax:d};if(b>d||b<c){this.fireEvent("overLimit",a);this._elInput.value=Math.max(c,Math.min(d,b));return}if(!this.fireEvent("beforeChange",a)){return}this._elInput.value=a.nValue;this.fireEvent("change",a)},getBaseElement:function(){return this._el},getInputElement:function(){return this._elInput},getPlusElement:function(){return this._elPlusButton
},getMinusElement:function(){return this._elMinusButton},isFocused:function(){return this._bIsOnFocus},_onActivate:function(){var a=this.getInputElement();this._wfPlusClick.attach(this.getPlusElement(),"click");this._wfMinusClick.attach(this.getMinusElement(),"click");this._wfFocus.attach(a,"focus");this._wfBlur.attach(a,"blur");if(this.option("bUseMouseWheel")){this._wfWheel.attach(a,"mousewheel")}this._elInput.readOnly=this.option("bInputReadOnly");this.reset()},_onDeactivate:function(){var a=this.getInputElement();
this._wfPlusClick.detach(this.getPlusElement(),"click");this._wfMinusClick.detach(this.getMinusElement(),"click");this._wfFocus.detach(a,"focus");this._wfBlur.detach(a,"blur");this._wfWheel.detach(a,"mousewheel")},_onMinusClick:function(a){this.setValue(this.getValue()-this.option("nStep"))},_onPlusClick:function(a){this.setValue(this.getValue()+this.option("nStep"))},_onWheel:function(a){if(this.isFocused()){a.stop(jindo.$Event.CANCEL_DEFAULT);if(a.mouse().delta>0){this._onPlusClick()}else{this._onMinusClick()
}}},_onFocus:function(a){this._bIsOnFocus=true},_onBlur:function(a){this._bIsOnFocus=false;this.setValue(this.getValue());this._elInput.readOnly=this.option("bInputReadOnly")}}).extend(jindo.UIComponent);jindo.Pagination=jindo.$Class({$init:function(a,b){this._elPageList=jindo.$(a);this._welPageList=jindo.$Element(this._elPageList);this._waPage=jindo.$A([]);this._fClickPage=jindo.$Fn(this._onClickPageList,this);this.option({bActivateOnload:true,nItem:10,nItemPerPage:10,nPagePerPageList:10,nPage:1,sMoveUnit:"pagelist",bAlignCenter:false,sInsertTextNode:"",sClassFirst:"first-child",sClassLast:"last-child",sPageTemplate:"<a href='#'>{=page}</a>",sCurrentPageTemplate:"<strong>{=page}</strong>",elFirstPageLinkOn:jindo.$$.getSingle("a.pre_end",this._elPageList),elPrevPageLinkOn:jindo.$$.getSingle("a.pre",this._elPageList),elNextPageLinkOn:jindo.$$.getSingle("a.next",this._elPageList),elLastPageLinkOn:jindo.$$.getSingle("a.next_end",this._elPageList),elFirstPageLinkOff:jindo.$$.getSingle("span.pre_end",this._elPageList),elPrevPageLinkOff:jindo.$$.getSingle("span.pre",this._elPageList),elNextPageLinkOff:jindo.$$.getSingle("span.next",this._elPageList),elLastPageLinkOff:jindo.$$.getSingle("span.next_end",this._elPageList)});
this.option(b||{});if(this.option("bActivateOnload")){this.activate()}},getBaseElement:function(){return this._elPageList},getItemCount:function(){return this.option("nItem")},setItemCount:function(a){this.option({nItem:a})},getItemPerPage:function(){return this.option("nItemPerPage")},setItemPerPage:function(a){this.option("nItemPerPage",a)},getCurrentPage:function(){return this._nCurrentPage},getFirstItemOfPage:function(a){return this.getItemPerPage()*(a-1)+1},getPageOfItem:function(a){return Math.ceil(a/this.getItemPerPage())
},_getLastPage:function(){return Math.ceil(this.getItemCount()/this.getItemPerPage())},_getRelativePage:function(a){var d=null;if(this.option("sMoveUnit")=="page"){switch(a){case"pre":d=this.getCurrentPage()-1;break;case"next":d=this.getCurrentPage()+1;break}}else{var c=this._getPageList(this.getCurrentPage());switch(a){case"pre_end":d=1;break;case"pre":var b=(c-1)*this.option("nPagePerPageList");d=b;break;case"next":var e=(c)*this.option("nPagePerPageList")+1;d=e;break;case"next_end":d=this._getLastPage();
break}}return d},_getPageList:function(a){if(this.option("bAlignCenter")){var b=Math.floor(this.option("nPagePerPageList")/2);var c=a-b;c=Math.max(c,1);c=Math.min(c,this._getLastPage());return c}return Math.ceil(a/this.option("nPagePerPageList"))},_isIn:function(a,b){if(!b){return false}return(a===b)?true:jindo.$Element(a).isChildOf(b)},_getPageElement:function(a){for(var d=0,b=this._waPage.$value().length;d<b;d++){var c=this._waPage.get(d);if(this._isIn(a,c)){return c}}return null},_onClickPageList:function(d){d.stop(jindo.$Event.CANCEL_DEFAULT);
var c=null,a=this.option(),e=d.element;if(this._isIn(e,a.elFirstPageLinkOn)){c=this._getRelativePage("pre_end")}else{if(this._isIn(e,a.elPrevPageLinkOn)){c=this._getRelativePage("pre")}else{if(this._isIn(e,a.elNextPageLinkOn)){c=this._getRelativePage("next")}else{if(this._isIn(e,a.elLastPageLinkOn)){c=this._getRelativePage("next_end")}else{var b=this._getPageElement(e);if(b){c=parseInt(jindo.$Element(b).text(),10)}else{return}}}}}this.movePageTo(c)},_convertToAvailPage:function(a){var b=this._getLastPage();
a=Math.max(a,1);a=Math.min(a,b);return a},movePageTo:function(a,b){if(typeof b=="undefined"){b=true}a=this._convertToAvailPage(a);this._nCurrentPage=a;if(b){if(!this.fireEvent("beforeMove",{nPage:a})){return}}this._paginate(a);if(b){this.fireEvent("move",{nPage:a})}},reset:function(a){if(typeof a=="undefined"){a=this.option("nItem")}this.setItemCount(a);this.movePageTo(1,false)},_onActivate:function(){this._fClickPage.attach(this._elPageList,"click");this.setItemCount(this.option("nItem"));this.movePageTo(this.option("nPage"),false);
this._welPageList.addClass("loaded")},_onDeactivate:function(){this._fClickPage.detach(this._elPageList,"click");this._welPageList.removeClass("loaded")},_addTextNode:function(){var a=this.option("sInsertTextNode");this._elPageList.appendChild(document.createTextNode(a))},_paginate:function(e){this._empty();this._addTextNode();var q=this.option(),b=q.elFirstPageLinkOn,o=q.elPrevPageLinkOn,k=q.elNextPageLinkOn,p=q.elLastPageLinkOn,f=q.elFirstPageLinkOff,m=q.elPrevPageLinkOff,j=q.elNextPageLinkOff,n=q.elLastPageLinkOff,h=this._getLastPage(),l=this._getPageList(e),r=this._getPageList(h);
if(h===0){this._welPageList.addClass("no-result")}else{if(h==1){this._welPageList.addClass("only-one")}else{this._welPageList.removeClass("only-one").removeClass("no-result")}}var t,a;if(q.bAlignCenter){var c=Math.floor(q.nPagePerPageList/2);t=e-c;t=Math.max(t,1);a=t+q.nPagePerPageList-1;if(a>h){t=h-q.nPagePerPageList+1;t=Math.max(t,1);a=h}}else{t=(l-1)*q.nPagePerPageList+1;a=(l)*q.nPagePerPageList;a=Math.min(a,h)}if(q.sMoveUnit=="page"){l=e;r=h}if(e>1){if(b){this._welPageList.append(b);this._addTextNode()
}}else{if(f){this._welPageList.append(f);this._addTextNode()}}if(l>1){if(o){this._welPageList.append(o);this._addTextNode()}}else{if(m){this._welPageList.append(m);this._addTextNode()}}var g,d;for(var s=t;s<=a;s++){if(s==e){g=jindo.$(jindo.$Template(q.sCurrentPageTemplate).process({page:s.toString()}))}else{g=jindo.$(jindo.$Template(q.sPageTemplate).process({page:s.toString()}));this._waPage.push(g)}d=jindo.$Element(g);if(s==t){d.addClass(this.option("sClassFirst"))}if(s==a){d.addClass(this.option("sClassLast"))
}this._welPageList.append(g);this._addTextNode()}if(l<r){if(k){this._welPageList.append(k);this._addTextNode()}}else{if(j){this._welPageList.append(j);this._addTextNode()}}if(e<h){if(p){this._welPageList.append(p);this._addTextNode()}}else{if(n){this._welPageList.append(n);this._addTextNode()}}},_empty:function(){var e=this.option(),f=e.elFirstPageLinkOn,d=e.elPrevPageLinkOn,h=e.elNextPageLinkOn,a=e.elLastPageLinkOn,b=e.elFirstPageLinkOff,i=e.elPrevPageLinkOff,c=e.elNextPageLinkOff,g=e.elLastPageLinkOff;
f=this._clone(f);d=this._clone(d);a=this._clone(a);h=this._clone(h);b=this._clone(b);i=this._clone(i);g=this._clone(g);c=this._clone(c);this._waPage.empty();this._welPageList.empty()},_clone:function(a){if(a&&typeof a.cloneNode=="function"){return a.cloneNode(true)}return a}}).extend(jindo.UIComponent);jindo.RollingChart=jindo.$Class({_nIndexOfRolling:0,_bIsRolling:false,$init:function(b,c){var a={sClassPrefix:"rollingchart-",sDirection:"down",nFPS:50,nDuration:300,nRollingInterval:100,sUrl:"",sRequestType:"jsonp",sRequestMethod:"get",htRequestParameter:null,nRequestInterval:10000,bActivateOnload:true};
this.option(a);this.option(c||{});this._el=jindo.$(b);this._assignHTMLElements();this._initTimer();this._initRolling();if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){this._elList=jindo.$$.getSingle("ol",this._el);this._aItems=jindo.$$("> li",this._elList)},getList:function(){return this._elList},getItems:function(){return this._aItems},getListOfItem:function(a){return jindo.$$.getSingle("ul",a)},isRolling:function(){return this._bIsRolling},_initTimer:function(){this._oRequestTimer=new jindo.Timer()
},getTimer:function(){return this._oRequestTimer},_initRolling:function(){var a=this;this._oRollingEventHandler={end:function(){setTimeout(function(){a.fireEvent("afterRolling",{nIndex:a._nIndexOfRolling});a._roll(a._nIndexOfRolling+1)},a.option("nRollingInterval"))}};this._oRolling=new jindo.Rolling(this._el,{nFPS:this.option("nFPS"),nDuration:this.option("nDuration"),sDirection:"vertical",fEffect:jindo.Effect.linear})},getRolling:function(){return this._oRolling},_setItemIndexToRolling:function(a){var c=this.getListOfItem(this.getItems()[a]);
var b=this.getRolling();b._el=c;b._elList=c},_onActivate:function(){var a=this;this.getTimer().start(function(){a._stopRequest();a._request();return true},this.option("nRequestInterval"))},_onDeactivate:function(){this.getTimer().abort()},_request:function(a){if(this.isRolling()){return}var e=this.option();var d=e.sUrl;var b=e.htRequestParameter;var c=this;this._oAjax=jindo.$Ajax(d,{type:e.sRequestType,method:e.sRequestMethod,onload:function(i){try{var g={htResponseJSON:i.json()};if(!c.fireEvent("response",g)){return
}if(!c.fireEvent("beforeUpdate")){return}var h=g.htResponseJSON;c._addItemToRolling(h);c.getRolling().getTransition().attach(c._oRollingEventHandler);c._roll(0)}catch(f){}}});if(!c.fireEvent("request")){return}this._oAjax.request(b)},_stopRequest:function(){try{this._oAjax.abort();this._oAjax=null}catch(a){}},_addItemToRolling:function(b){var a=this;var c=this.option("sDirection");jindo.$A(this.getItems()).forEach(function(e,d){var f=jindo.$Element(jindo.$("<li>"));f.html(b.items[d]);var g=a.getListOfItem(e);
if(c=="down"){g.insertBefore(f.$value(),g.firstChild);g.scrollTop=9999}else{jindo.$Element(g).append(f.$value());g.scrollTop=0}})},_removeItemRolled:function(){var b=this;var a=this.option("sDirection");jindo.$A(this.getItems()).forEach(function(d,c){if(a=="down"){jindo.$Element(jindo.$$("li",b.getListOfItem(d))[1]).leave()}else{var e=b.getListOfItem(d);jindo.$Element(jindo.$$.getSingle("li",e)).leave();e.scrollTop=0}});this._nIndexOfRolling=0},_roll:function(a){this._bIsRolling=true;this._nIndexOfRolling=a;
this.fireEvent("beforeRolling",{nIndex:a});var b=a;if(b==this.getItems().length){this._removeItemRolled();this._nIndexOfRolling=0;this.getRolling().getTransition().detach(this._oRollingEventHandler);this._bIsRolling=false;this.fireEvent("afterUpdate");return}this._setItemIndexToRolling(b);var c=1;if(this.option("sDirection")=="down"){c=-1}this.getRolling().moveBy(c)}}).extend(jindo.UIComponent);jindo.ScrollBox=new jindo.$Class({$init:function(a,b){this.option({sClassPrefix:"scrollbar-",bActivateOnload:true,sOverflowX:"auto",sOverflowY:"auto",bAdjustThumbSize:true,nMinThumbSize:50,nDelta:16});
this.option(b||{});this._el=jindo.$(a);if(this.option("bActivateOnload")){this.activate();this.reset()}},reset:function(){this._autoToggleScrollBar();var a=this.hasScrollBarHorizontal();var b=this.hasScrollBarVertical();this._adjustBoxSize();this._adjustContentSize();this._autoToggleScrollBar();if(a!=this.hasScrollBarHorizontal()||b!=this.hasScrollBarVertical()){this._adjustBoxSize();this._adjustContentSize()}this._autoToggleAvailability();this._adjustTrackSize();this._adjustThumbSize();this.$super.reset()
},_onActivate:function(){this.$super._onActivate();this.reset()},_onDeactivate:function(){this.$super._onDeactivate();this._adjustBoxSize()},setSize:function(b,a){if(b){jindo.$Element(this._el).css("width",b+"px")}if(a){jindo.$Element(this._el).css("height",a+"px")}this.setBoxSize(b,a);this._oBoxSize={nWidth:jindo.$Element(this._elBox).width(),nHeight:jindo.$Element(this._elBox).height()};this.reset()},getContentSize:function(){var a=jindo.$Element(this._elContent);return{nWidth:parseInt(a.width(),10),nHeight:parseInt(a.height(),10)}
},setContentSize:function(a,c){var b=jindo.$Element(this._elContent);if(a){if(a==Infinity){b.css("width","")}else{b.css("width",a+"px")}}if(c){if(c==Infinity){b.css("height","auto")}else{b.css("height",c+"px")}}this.$super.reset()},getBoxSize:function(){var a=jindo.$Element(this._elBox);return{nWidth:parseInt(a.width(),10),nHeight:parseInt(a.height(),10)}},setBoxSize:function(a,b){var c=jindo.$Element(this._elBox);if(a){c.css("width",a+"px")}if(b){c.css("height",b+"px")}this.$super.reset()},getTrackSize:function(a){if(!a.elScrollBar){return{nWidth:0,nHeight:0}
}var b=jindo.$Element(a.elTrack);return{nWidth:parseInt(b.width(),10),nHeight:parseInt(b.height(),10)}},setTrackSize:function(b,d,c){var a=jindo.$Element(b.elTrack);if(d){a.css("width",d+"px")}if(c){a.css("height",c+"px")}},isNeededScrollBarHorizontal:function(){if(this.option("sOverflowX")=="scroll"){return true}var b=this.getContentSize();var a=this.getDefaultBoxSize();if(this.getScrollBarHorizontal().elScrollBar&&this.option("sOverflowX")!="hidden"){if(this.hasScrollBarVertical()){if(b.nWidth>a.nWidth-jindo.$Element(this.getScrollBarVertical().elScrollBar).width()){return true
}}if(b.nWidth>a.nWidth){return true}}return false},isNeededScrollBarVertical:function(){if(this.option("sOverflowY")=="scroll"){return true}var b=this.getContentSize();var a=this.getDefaultBoxSize();if(this.getScrollBarVertical().elScrollBar&&this.option("sOverflowY")!="hidden"){if(this.hasScrollBarHorizontal()){if(b.nHeight>a.nHeight-jindo.$Element(this.getScrollBarHorizontal().elScrollBar).height()){return true}}if(b.nHeight>a.nHeight){return true}}return false},_autoToggleScrollBar:function(){if(!this.isActivating()){return
}var d=this.option("sClassPrefix");var f=this.getScrollBarHorizontal();var c=this.getScrollBarVertical();var e;var b=this.option("bAdjustThumbSize");var g=this.isNeededScrollBarVertical();if(c.elScrollBar){e=jindo.$Element(c.elScrollBar);if(g){e.addClass(d+"show")}else{e.removeClass(d+"show")}if(c.elThumb&&b){jindo.$Element(c.elThumb).css("height","0px")}}var a=this.isNeededScrollBarHorizontal();if(f.elScrollBar){e=jindo.$Element(f.elScrollBar);if(a){e.addClass(d+"show")}else{e.removeClass(d+"show")
}if(f.elThumb&&b){jindo.$Element(f.elThumb).css("width","0px")}}if(c.elScrollBar){e=jindo.$Element(c.elScrollBar);if(this.isNeededScrollBarVertical()){e.addClass(d+"show")}else{e.removeClass(d+"show")}if(c.elThumb&&b){jindo.$Element(c.elThumb).css("height","0px")}}},_adjustTrackSize:function(){if(!this.isActivating()){return}var c=this.getDefaultBoxSize();var k=this.getScrollBarHorizontal();var b=this.getScrollBarVertical();var d=this.isNeededScrollBarHorizontal();if(d&&k.elScrollBar){var g=c.nWidth;
var f=jindo.$Element(k.elScrollBar);f.css("top",c.nHeight-f.height()+"px");var e=0;if(this.hasScrollBarVertical()&&b.elScrollBar){e=parseInt(jindo.$Element(b.elScrollBar).width(),10);g-=e}f.width(g);var j=0;if(k.elButtonLeft){j=parseInt(jindo.$Element(k.elButtonLeft).width(),10);g-=j}if(k.elButtonRight){g-=parseInt(jindo.$Element(k.elButtonRight).width(),10)}jindo.$Element(k.elTrack).css("left",j+"px");this.setTrackSize(k,g,null)}var h=this.isNeededScrollBarVertical();if(h&&b.elScrollBar){var a=c.nHeight;
var i=0;if(this.hasScrollBarHorizontal()&&k.elScrollBar){i=parseInt(jindo.$Element(k.elScrollBar).height(),10);a-=i}if(b.elButtonUp){a-=parseInt(jindo.$Element(b.elButtonUp).height(),10)}if(b.elButtonDown){a-=parseInt(jindo.$Element(b.elButtonDown).height(),10)}this.setTrackSize(b,null,a)}},_adjustBoxSize:function(){var f=this.getDefaultBoxSize();var e=this.getScrollBarHorizontal();var d=this.getScrollBarVertical();var g=this.hasScrollBarVertical();var c=this.hasScrollBarHorizontal();this.setBoxSize(f.nWidth,f.nHeight);
if(this.isActivating()){if(c&&e.elScrollBar){var a=f.nHeight;a-=parseInt(jindo.$Element(e.elScrollBar).height(),10);this.setBoxSize(null,a)}if(g&&d.elScrollBar){var b=f.nWidth;b-=parseInt(jindo.$Element(d.elScrollBar).width(),10);this.setBoxSize(b,null)}}},_adjustContentSize:function(){if(!this.isActivating()){return}var e=this.getBoxSize();var a=this.option("sOverflowY")!="hidden";var d=this.option("sOverflowX")!="hidden";var c,b;if(a&&!d){c=e.nWidth}if(d&&!a){b=e.nHeight}this.setContentSize(c||Infinity,b||Infinity)
},_adjustThumbSize:function(){if(!this.isActivating()){return}if(!this.option("bAdjustThumbSize")){return}var g=this.option("nMinThumbSize");var f=this.getContentSize();var c=this.getBoxSize();var h;var i=this.getScrollBarHorizontal();var b=this.getScrollBarVertical();if(b.elScrollBar){var e=this.getTrackSize(b);var j=Math.floor(parseInt(e.nHeight*c.nHeight/f.nHeight,10));if(j<g){j=g}if(j>=e.nHeight){j=e.nHeight}jindo.$Element(b.elThumb).height(j);h=0;if(b.elThumbHead){h+=jindo.$Element(b.elThumbHead).height()
}if(b.elThumbFoot){h+=jindo.$Element(b.elThumbFoot).height()}if(b.elThumbBody){jindo.$Element(b.elThumbBody).height(j-h)}}if(i.elScrollBar){var a=this.getTrackSize(i);var d=Math.floor(parseInt(a.nWidth*c.nWidth/f.nWidth,10));if(d<g){d=g}if(d>=a.nWidth){d=a.nWidth}jindo.$Element(i.elThumb).width(d);h=0;if(i.elThumbHead){h+=jindo.$Element(i.elThumbHead).width()}if(i.elThumbFoot){h+=jindo.$Element(i.elThumbFoot).width()}if(i.elThumbBody){jindo.$Element(i.elThumbBody).width(d-h)}}},_autoToggleAvailability:function(){var c=this.option("sClassPrefix");
var a=this.getContentSize();var e=this.getBoxSize();var d=this.getScrollBarHorizontal();var b=this.getScrollBarVertical();if(d.elScrollBar){if(this.option("sOverflowX")=="scroll"&&e.nWidth>=a.nWidth){jindo.$Element(d.elScrollBar).addClass(c+"disabled");this.$super._onDeactivate("horizontal");if(this.isActivating()){jindo.$Element(this._el).removeClass(c+"noscript")}}else{jindo.$Element(d.elScrollBar).removeClass(c+"disabled");if(this.isActivating()){this.$super._onActivate("horizontal")}}}if(b.elScrollBar){if(this.option("sOverflowY")=="scroll"&&e.nHeight>=a.nHeight){jindo.$Element(b.elScrollBar).addClass(c+"disabled");
this.$super._onDeactivate("vertical");if(this.isActivating()){jindo.$Element(this._el).removeClass(c+"noscript")}}else{jindo.$Element(b.elScrollBar).removeClass(c+"disabled");if(this.isActivating()){this.$super._onActivate("vertical")}}}}}).extend(jindo.ScrollBar);jindo.StarRating=jindo.$Class({$init:function(b,c){var a={nStep:1,nMaxValue:10,nDefaultValue:0,bSnap:false,bActivateOnload:true};this.option(a);this.option(c||{});this._el=jindo.$(b);this._wel=jindo.$Element(b);this._assignHTMLElements();
this._wfMouseMove=jindo.$Fn(this._onMouseMove,this);this._wfMouseLeave=jindo.$Fn(this._onMouseLeave,this);this._wfClick=jindo.$Fn(this._onClick,this);if(this.option("bActivateOnload")){this.activate()}},_assignHTMLElements:function(){this._elRatingElement=jindo.$$.getSingle("span",this.getBaseElement());this._welRatingElement=jindo.$Element(this._elRatingElement)},getBaseElement:function(){return this._el},getRatingElement:function(){return this._elRatingElement},getValue:function(){return this._nValue
},getValueByWidth:function(){return this._welRatingElement.width()/this._nBaseWidth*this.option("nMaxValue")},getValueToBeSet:function(a){a=this._round(a,this.option("nStep"));a=Math.min(a,this.option("nMaxValue"));a=Math.max(a,0);return a},setValue:function(d,a){if(typeof a=="undefined"){a=true}var b=this.option("nMaxValue");d=this.getValueToBeSet(d);var c=this._nBaseWidth*d/b;c=Math.min(c,this._nBaseWidth);this._welRatingElement.width(c);this._nValue=d;if(a){this.fireEvent("set",{nValue:this._nValue})
}return this},reset:function(){var a=this.option("nDefaultValue")||0;this.setValue(a,false);return this},_round:function(c,i){var f=c,a=Math.floor(c),e=a+1,h=1,d,b,g;for(b=a;b<=e;b+=i){d=Math.abs(c-b);if(d<=h){h=d;f=b}}return f.toFixed(Math.max((i.toString().length-2),0))},_onActivate:function(){var a=this.getBaseElement();this._wfMouseMove.attach(a,"mousemove");this._wfMouseLeave.attach(a,"mouseleave");this._wfClick.attach(a,"click");this._nBaseWidth=this._wel.width();this.reset()},_onDeactivate:function(){var a=this.getBaseElement();
this._wfMouseMove.detach(a,"mousemove");this._wfMouseLeave.detach(a,"mouseleave");this._wfClick.detach(a,"click")},_onMouseMove:function(b){var c=b.pos(true).offsetX+1,d=(c>this._nBaseWidth)?this._nBaseWidth:c,a;if(this.option("bSnap")){a=c/this._nBaseWidth*this.option("nMaxValue");d=this._round(a,this.option("nStep"))*this._nBaseWidth/this.option("nMaxValue");d=Math.min(d,this._nBaseWidth)}this._welRatingElement.css("width",d+"px");a=this.getValueByWidth();this.fireEvent("move",{nValue:a,nValueToBeSet:this.getValueToBeSet(a)})
},_onMouseLeave:function(a){this.setValue(this._nValue,false);this.fireEvent("out")},_onClick:function(a){this.setValue(this.getValueByWidth())}}).extend(jindo.UIComponent);jindo.TabControl=jindo.$Class({_bIsActivating:false,_nCurrentIndex:null,_welSelectedTab:null,_welSelectedPanel:null,$init:function(b,c){var a={sClassPrefix:"tc-",sCheckEvent:"click",bActivateOnload:true};this.option(a);this.option(c||{});this._el=jindo.$(b);this._wfEventTab=jindo.$Fn(this._onEventTab,this);this._assignHTMLElements();
if(this.option("bActivateOnload")){this._selectTab(this._elSelectedTab);this.activate()}},_assignHTMLElements:function(){var a=this.option("sClassPrefix"),b=this._el;this._aTab=jindo.$$("."+a+"tab",b);this._aPanel=jindo.$$("."+a+"panel",b);this._elSelectedTab=jindo.$$.getSingle("."+a+"tab."+a+"selected",b)||this.getTab(0);this._waTab=jindo.$A(this._aTab)},getTab:function(a){return this.getTabs()[a]},getTabs:function(){return this._aTab},getPanel:function(a){return this.getPanels()[a]},getPanels:function(){return this._aPanel
},selectTab:function(b,a){if(typeof a=="undefined"){a=true}this._selectTab(this.getTab(b),a)},getIndex:function(a){return this._waTab.indexOf(a)},getCurrentIndex:function(){return this._nCurrentIndex},_selectTab:function(f,e){if(typeof e=="undefined"){e=true}var c=this.option("sClassPrefix"),b=this.getIndex(f),a=this.getPanel(b);if(e){if(!this.fireEvent("beforeSelect",{nIndex:b,elTab:f,elPanel:a})){return}}var d=jindo.$Element(f);if(this._welSelectedTab){this._welSelectedTab.removeClass(c+"selected")
}this._welSelectedTab=d;d.addClass(c+"selected");var g=jindo.$Element(a);if(this._welSelectedPanel){this._welSelectedPanel.removeClass(c+"selected")}this._welSelectedPanel=g;g.addClass(c+"selected");this._nCurrentIndex=b;if(e){this.fireEvent("select",{nIndex:b,elTab:f,elPanel:a})}},getBaseElement:function(){return this._el},_onActivate:function(){this._wfEventTab.attach(this._el,this.option("sCheckEvent"))},_onDeactivate:function(){this._wfEventTab.detach(this._el,this.option("sCheckEvent"))},_onEventTab:function(d){if(this.fireEvent(d.type,{weEvent:d})){var c=this.option("sClassPrefix"),a=d.element,b=jindo.$$.test(a,"."+c+"tab")?a:jindo.$$.getSingle("! ."+c+"tab",a);
if(b){this._selectTab(b)}}}}).extend(jindo.UIComponent);jindo.DynamicTree=jindo.$Class({$init:function(b,c){var a={sUrl:"",sRequestType:"jsonp",sRequestMethod:"get",htRequestParameter:{}};this.option(a);this.option(c||{});this._attachEvents();this._initAjax()},_attachEvents:function(){var a=this;this.attach("beforeExpand",function(c){var d=c.element;var b=this;if(b.getNodeData(d).hasOwnProperty("_aChildren")){return}var e=b.option("htRequestParameter");e.key=b._getNodeDataKey(d);var f={element:d,htRequestParameter:e};
if(b.fireEvent("request",f)){b._request(f.htRequestParameter)}else{c.stop()}})},_initAjax:function(){var b=this.option();var c=this.option("sClassPrefix");var a=b.sUrl;var d=this;this._oAjax=jindo.$Ajax(a,{type:b.sRequestType,method:b.sRequestMethod,onload:function(e){try{var h={htResponseJSON:e.json()};if(!d.fireEvent("response",h)){return}var i=d.createNode(h.htResponseJSON.aChildren);var g=jindo.$$.getSingle("."+h.htResponseJSON.sKey,d.getRootList());if(d.getChildListOfNode(g)){return}d.appendNode(g,i);
jindo.$A(i).forEach(function(j){if(jindo.$$.getSingle("."+c+"has-child",j)){jindo.$Element(j).addClass(c+"collapsed")}})}catch(f){}}})},_request:function(a){this._oAjax.abort();this._oAjax.request(a)},hasChild:function(a){return this._htNodeData[this._getNodeDataKey(a)]["bHasChild"]},_paintNode:function(c){if(!c){return}var a=this.getPartsOfNode(c);var g=this.getChildNodes(c);var d=this.getNodeData(c);var f=jindo.$Element(c);var e=jindo.$Element(a.elItem);delete d._aChildren;if(this.hasChild(c)){e.addClass(this.htClassName.sHasChild);
if(g.length>0){d.bHasChild=true;d._aChildren=[]}var b=this;jindo.$A(g).forEach(function(h,i){d._aChildren.push(b.getNodeData(h))})}else{e.removeClass(this.htClassName.sHasChild);if(a.elChild){a.elChild.parentNode.removeChild(a.elChild)}}d.lastNode=jindo.$$.getSingle("~ ."+this.htClassName.sNode,c)?false:true;(d.lastNode)?f.addClass(this.htClassName.sLastNode):f.removeClass(this.htClassName.sLastNode);c.parentNode.style.zoom=1},_makeNodeData:function(a){var b=this.getNodeData(a);b.bHasChild=false;
if(jindo.$Element(this.getPartsOfNode(a).elItem).hasClass(this.option("sClassPrefix")+"has-child")){b.bHasChild=true}this.$super._makeNodeData(a)}}).extend(jindo.Tree);jindo.CheckBox=jindo.$Class({sTagName:"input[type=checkbox]",$init:function(a,b){this.option({sClassPrefix:"checkbox-"});this.option(b||{});this._elWrapper=jindo.$(a);this._welWrapper=jindo.$Element(a);this._assignHTMLElements();this.wfOnClickInput=jindo.$Fn(this._onClickInput,this);this.wfOnClickWrapper=jindo.$Fn(this._onClickWrapper,this);
this.wfOnFocusInput=jindo.$Fn(this._onFocusInput,this);this.wfOnBlurInput=jindo.$Fn(this._onBlurInput,this);this.activate();this.paint()},_assignHTMLElements:function(){var b=this._elWrapper;this._elInput=jindo.$$.getSingle("input",b);if(this._elInput.type=="radio"){this.sTagName="input[type=radio]";this.option("sClassPrefix","radio-")}var a=this.option("sClassPrefix");this._elSubstitute=jindo.$$.getSingle("."+a+"mark",b);this._welSubstitute=jindo.$Element(this._elSubstitute)},getInput:function(){return this._elInput
},getChecked:function(){return this.getInput().checked},setChecked:function(a){this.getInput().checked=a;this.paint();return this},enable:function(){this.getInput().disabled=false;this.paint();return this},disable:function(){this.getInput().disabled=true;this.paint();return this},_onClickInput:function(b){b.stop(jindo.$Event.CANCEL_DEFAULT);var a=this;setTimeout(function(){a._welWrapper.fireEvent("click")},1)},_onClickWrapper:function(a){var b=this._elInput;if(b.disabled||a.element===b){return}b.focus();
if(this.fireEvent("beforeChange",{bChecked:b.checked})){switch(b.type){case"checkbox":b.checked=!b.checked;this.paint();break;case"radio":b.checked=true;var c=this;jindo.$A(this.constructor.getInstance()).forEach(function(d){if(d.getInput().name==c.getInput().name){d.paint()}});break}}},_onFocusInput:function(a){this._welWrapper.addClass(this.option("sClassPrefix")+"focused")},_onBlurInput:function(a){this._welWrapper.removeClass(this.option("sClassPrefix")+"focused")},_onActivate:function(){this._welWrapper.addClass(this.option("sClassPrefix")+"applied");
this.wfOnClickInput.attach(this._elInput,"click");this.wfOnClickWrapper.attach(this._elWrapper,"click");this.wfOnFocusInput.attach(this._elInput,"focus");this.wfOnBlurInput.attach(this._elInput,"blur")},_onDeactivate:function(){this._welWrapper.removeClass(this.option("sClassPrefix")+"applied");this.wfOnClickInput.detach(this._elInput,"click");this.wfOnClickWrapper.detach(this._elWrapper,"click");this.wfOnFocusInput.detach(this._elInput,"focus");this.wfOnBlurInput.detach(this._elInput,"blur")},_onPaint:function(){var a=this.option("sClassPrefix");
if(this._elInput.disabled){this._welWrapper.addClass(a+"disabled")}else{this._welWrapper.removeClass(a+"disabled")}if(this._elInput.checked){this._welSubstitute.addClass(a+"checked")}else{this._welSubstitute.removeClass(a+"checked")}this.fireEvent("change",{bChecked:this._elInput.checked})}}).extend(jindo.HTMLComponent);jindo.SelectBox=jindo.$Class({sTagName:"select",_bDisabled:false,_sPrevValue:null,_nSelectedIndex:0,_bRealFocused:false,$init:function(a,b){this._aItemData=[];this._aListItem=[];this._aOptions=[];
this.option({sClassPrefix:"selectbox-",nWidth:null,nHeight:null,bUseLayerPosition:true,aOptionHTML:[],aOptionLabel:[],LayerPosition:{sPosition:"outside-bottom",sAlign:"left",nTop:0,nLeft:0},LayerManager:{sCheckEvent:"mousedown",nShowDelay:20,nHideDelay:0}});this.option(b||{});this._el=jindo.$(a);this._assignHTMLElements();if(this.option("bUseLayerPosition")){this._initLayerPosition()}this._initLayerManager();this._initRolloverClick();this._oTimer=new jindo.Timer();this._wfOnFocusSelect=jindo.$Fn(this._onFocusSelect,this);
this._wfOnBlurSelect=jindo.$Fn(this._onBlurSelect,this);this._wfOnMouseDownBox=jindo.$Fn(this._onMouseDownBox,this);this._wfOnMouseDownList=jindo.$Fn(this._onMouseDownList,this);this._wfOnKeyDown=jindo.$Fn(this._onKeyDown,this);this._wfOnMouseWheel=jindo.$Fn(function(c){c.stop(jindo.$Event.CANCEL_DEFAULT);this._elLayer.scrollTop-=c.mouse().delta*16},this);this._oAgent=jindo.$Agent();this.activate()},_assignHTMLElements:function(){var a=this.option("sClassPrefix"),b=this._el;this._wel=jindo.$Element(b);
this._elSelect=jindo.$$.getSingle("select."+a+"source",b);this._sSelectInnerHTML=this._elSelect.innerHTML;this._elOptionDefault=jindo.$$.getSingle("option."+a+"default",b);this._elSelectOptionGroup=jindo.$$.getSingle("select."+a+"source-option-group",b);this._elBox=jindo.$$.getSingle("."+a+"box",b);this._elLabel=jindo.$$.getSingle("."+a+"label",b);this._elLayer=jindo.$$.getSingle("."+a+"layer",b);this._elList=jindo.$$.getSingle("."+a+"list",b);this._elList.innerHTML="";this._elSelectList=jindo.$("<ul>");
this._elList.insertBefore(this._elSelectList,this._elList.firstChild)},getSelectElement:function(){return this._elSelect},getBoxElement:function(){return this._elBox},getLabelElement:function(){return this._elLabel},getLayerElement:function(){return this._elLayer},getListElement:function(){return this._elList},getSelectListElement:function(){return this._elSelectList},_limitWidth:function(){var a=this.option("nWidth");if(a){jindo.$Element(this.getBoxElement()).css({width:a+"px",overflowX:"hidden"});
jindo.$Element(this.getLayerElement()).css({width:a+"px",overflowX:"hidden"})}},_limitHeight:function(){var c=this.option("nHeight");if(c){var b=jindo.$Element(this.getLayerElement()),a=b.$value().cloneNode(true),d=jindo.$Element(a),e;d.opacity(0);b.after(d);d.show();e=d.height();d.leave();if(c<e){b.css({height:c+"px",overflowX:"hidden"})}}},_initLayerManager:function(){var a=this,b=this.option("sClassPrefix"),c=this.getSelectElement();this._oLayerManager=new jindo.LayerManager(this.getLayerElement(),this.option("LayerManager")).attach({beforeShow:function(d){if(a.fireEvent("open")){a._limitWidth();
a._limitHeight();setTimeout(function(){c.focus()},10);a._wel.addClass(b+"open");if(a.option("bUseLayerPosition")){a.getLayerPosition().setPosition()}}else{d.stop()}},show:function(d){a._paintSelected()},beforeHide:function(d){if(a.fireEvent("close")){a._wel.removeClass(b+"open").removeClass(b+"focused");setTimeout(function(){a.getSelectElement().blur()},10)}else{d.stop();setTimeout(function(){c.focus()},10)}}}).link(this.getBoxElement()).link(this.getLayerElement())},getLayerManager:function(){return this._oLayerManager
},_initRolloverClick:function(){var b=this,a=this.option("sClassPrefix");this._oRolloverClick=new jindo.RolloverClick(this.getSelectListElement(),{sCheckEvent:"mouseup",RolloverArea:{sClassName:a+"item",sClassPrefix:a+"item-"}}).attach({over:function(d){if(b._welOvered){b._welOvered.removeClass(a+"item-over")}var c=jindo.$Element(d.element);c.addClass(a+"item-over");b._welOvered=c},out:function(c){c.stop()},click:function(e){var d=b._nSelectedIndex;jindo.$A(b._aItemData).forEach(function(f){if(f.elItem===e.element){b.setValue(f.sValue);
jindo.$A.Break()}});var c=b.getSelectedIndex();if(d!=c){jindo.$Element(b.getSelectElement()).fireEvent("change");b.fireEvent("change",{nIndex:d,nLastIndex:c})}if(!jindo.$Element(e.element).hasClass(a+"notclose")){b.getLayerManager().hide()}}})},getRolloverClick:function(){return this._oRolloverClick},_initLayerPosition:function(){this._oLayerPosition=new jindo.LayerPosition(this.getBoxElement(),this.getLayerElement(),this.option("LayerPosition"))},getLayerPosition:function(){return this._oLayerPosition
},_onActivate:function(){var a=this.option("sClassPrefix"),b=this.getSelectElement();this._limitWidth();this._wel.removeClass(a+"noscript");this._wfOnFocusSelect.attach(b,"focus");this._wfOnBlurSelect.attach(b,"blur");this._wfOnMouseDownBox.attach(this.getBoxElement(),"mousedown");this._wfOnMouseDownList.attach(this.getListElement(),"mousedown");this._wfOnKeyDown.attach(b,"keydown");this._wfOnMouseWheel.attach(b,"mousewheel");this.paint();this._sPrevValue=this.getValue()},_onDeactivate:function(){this.getLayerManager().hide();
var a=this.option("sClassPrefix"),b=this.getSelectElement();this._wel.addClass(a+"noscript");this._wfOnFocusSelect.detach(b,"focus");this._wfOnBlurSelect.detach(b,"blur");this._wfOnMouseDownBox.detach(this.getBoxElement(),"mousedown");this._wfOnMouseDownList.detach(this.getListElement(),"mousedown");this._wfOnKeyDown.detach(b,"keydown");this._wfOnMouseWheel.detach(b,"mousewheel")},getValueOf:function(c){for(var a=0,b;(b=this._aItemData[a]);a++){if(b.sText==c){return b.sValue}}return null},getValue:function(){return this.getSelectElement().value
},getText:function(){return this._aItemData[this._nSelectedIndex].sText},getHTML:function(){return this.getLabelElement().innerHTML},setValue:function(a){this.getSelectElement().value=a;this._sPrevValue=this.getValue();this._paint()},getSelectedIndex:function(a){return this.getSelectElement().selectedIndex},setSelectedIndex:function(b,a){if(typeof a=="undefined"){a=true}if(this._isSelectable(b)){var c=this.getSelectedIndex();this._setSelectedIndex(b);this._paint();if(a&&c!=b){this.fireEvent("change",{nIndex:b,nLastIndex:c})
}return true}return false},_setSelectedIndex:function(a){this.getSelectElement().selectedIndex=a},_isSelectable:function(a){var b=this._aItemData[a];if(!b||b.bDisabled||b.bDefault){return false}else{return true}},getOptions:function(){return this._aOptions},getListItems:function(){return this._aListItem},getDisabled:function(){return this._bDisabled},setOptionGroup:function(d){if(!this._elSelectOptionGroup||!this._elOptionDefault){return false}var a=this.getSelectElement(),f=this.option("sClassPrefix"),c=jindo.$$("."+f+"option-group-"+d,this._elSelectOptionGroup),e=this._elOptionDefault=this._elOptionDefault.cloneNode(true);
a.innerHTML="";a.appendChild(e);this._nSelectedIndex=0;for(var b=0;b<c.length;b++){a.appendChild(c[b].cloneNode(true))}this._sPrevValue=this.getValue();this.paint();return true},isSelected:function(){return !this._aItemData[this.getSelectedIndex()].bDefault},setDefault:function(){var a=-1;jindo.$A(this._aItemData).forEach(function(c,b){if(c.bDefault||c.bSelected){a=b}});if(a<0){a=0}this._nSelectedIndex=a;this._setSelectedIndex(a);this._sPrevValue=this.getValue();this._paint()},paint:function(){this._paintList();
this._paintSelected();this._paintLabel();this.getLayerManager().setLayer(this.getLayerElement())},_paint:function(){this._paintSelected();this._paintLabel()},_paintLabel:function(){var c=jindo.$Element(this.getLabelElement()),b=this.option("aOptionHTML")[this._nSelectedIndex]||"",a=this.option("aOptionLabel")[this._nSelectedIndex]||"",d=this.getText();if(b){if(a){c.html(a)}else{c.html(b)}}else{c.text(d)}c.attr("unselectable","on")},_paintList:function(){var j=this.option("sClassPrefix");this._aOptions=jindo.$$("option",this.getSelectElement());
var n=this._aOptions;this._aItemData=[];this._aListItem=[];this._nSelectedIndex=0;var g=this.getSelectListElement();g.innerHTML="";if(this.option("nHeight")){jindo.$Element(this.getLayerElement()).css("height","auto")}for(var p=0,k;(k=n[p]);p++){var f=jindo.$Element(k),m=f.hasClass(j+"default"),d=f.attr("selected")=="selected",o=m||k.disabled,h=this.option("aOptionHTML")[p]||"",b=f.text()||"",e=f.attr("value");if(!e){f.attr("value",b);e=b}this._aItemData[p]={elOption:k,elItem:null,sHTML:h,sText:b,sValue:e,bDisabled:o,bSelected:d,bDefault:m};
var c=null,l=this._aItemData[p];if(!l.bDefault){c=jindo.$("<li>");c.style.cssText=l.elOption.style.cssText;c.className=l.elOption.className;var a=jindo.$Element(c);if(l.sHTML){a.html(l.sHTML)}else{a.text(l.sText)}a.attr("unselectable","on");if(l.bDisabled){a.addClass(j+"item-disabled")}else{a.addClass(j+"item")}g.appendChild(c);this._aListItem.push(c);this._aItemData[p].elItem=c}}if(this._aListItem.length===0){this.disable();return}this.enable()},_paintSelected:function(){var g=this.option("sClassPrefix"),k=this.getSelectedIndex(),h,j=this._nSelectedIndex;
if(this._welSelected){this._welSelected.removeClass(g+"item-selected");this._welSelected=null}if(this._welOvered){this._welOvered.removeClass(g+"item-over");this._welOvered=null}this._nSelectedIndex=k;h=this._aItemData[k];if(h.elItem){var a=h.elItem,i=jindo.$Element(a);this._welSelected=this._welOvered=i;i.addClass(g+"item-selected").addClass(g+"item-over");if(this.isLayerOpened()){var c=this.getLayerElement();var f=parseInt(jindo.$Element(c).css("height"),10),l=a.offsetTop,b=a.offsetHeight,d=c.scrollTop,e;
if(j<k){e=true}else{e=false}if(l<d||l>d+f){c.scrollTop=l}if(e){if(l+b>f+d){c.scrollTop=(l+b-f)}}else{if(l<d){c.scrollTop=l}}}}},isLayerOpened:function(){return this.getLayerManager().getVisible()},disable:function(){this.getLayerManager().hide();var a=this.option("sClassPrefix");this._wel.addClass(a+"disabled");this.getSelectElement().disabled=true;this._bDisabled=true},enable:function(){var a=this.option("sClassPrefix");this._wel.removeClass(a+"disabled");this.getSelectElement().disabled=false;this._bDisabled=false
},open:function(){if(!this._bDisabled){this.getLayerManager().show()}return this},close:function(){this.getLayerManager().hide();return this},_onMouseDownBox:function(a){a.stop(jindo.$Event.CANCEL_DEFAULT);if(!this._bDisabled){this.getLayerManager().toggle()}},_onMouseDownList:function(a){if(!jindo.$$.getSingle("! ."+this.option("sClassPrefix")+"notclose",a.element)){a.stop(jindo.$Event.CANCEL_DEFAULT)}},_getSelectableIndex:function(e,d,c){var b=-1,f=this._aItemData.length-1,a;for(a=0;a<this._aItemData.length;
a++){if(this._isSelectable(a)){if(b<0){b=a}else{f=a}}}switch(d){case -1:if(e==b){return e}for(a=e-1;a>b;a--){if(this._isSelectable(a)){return a}}return b;case 1:if(e==f){return e}for(a=e+1;a<f;a++){if(this._isSelectable(a)){return a}}return f;case Infinity:return f;case -Infinity:return b}},_onKeyDown:function(f){var e=f.key();if((this._oAgent.os().mac&&this._oAgent.navigator().safari)||(this._oAgent.navigator().ie&&this._oAgent.navigator().version==6)){var c=e.keyCode;if(c!=9){f.stop(jindo.$Event.CANCEL_DEFAULT)
}var d=this.getSelectedIndex(),b=d;switch(c){case 37:b=this._getSelectableIndex(d,-1);break;case 38:b=this._getSelectableIndex(d,-1);break;case 39:b=this._getSelectableIndex(d,1);break;case 40:b=this._getSelectableIndex(d,1);break;case 33:b=this._getSelectableIndex(d,-Infinity);break;case 34:b=this._getSelectableIndex(d,Infinity);break;case 13:this.getLayerManager().hide();break}var a={nIndex:b,nLastIndex:parseInt(this._nSelectedIndex,10)};this._setSelectedIndex(b);this._paint();if(a.nIndex!=a.nLastIndex){this.fireEvent("change",a)
}}else{if(this.isLayerOpened()&&(e.enter||e.keyCode==9)){this.getLayerManager().hide()}}},_onFocusSelect:function(b){var c=this.option("sClassPrefix"),a=this._wel;if(!this.isLayerOpened()){if(this.fireEvent("focus")){this._bRealFocused=true}else{this.getSelectElement().blur();return}}a.addClass(c+"focused");if(!(this._oAgent.os().mac&&this._oAgent.navigator().safari)){var d=this;this._oTimer.start(function(){var f=d.getValue();if(!!d._sPrevValue&&d._sPrevValue!=f){var e=d.getSelectElement().selectedIndex;
if(!d._isSelectable(e)){var h=-(d._nSelectedIndex-e);h=(h>0)?1:-1;d._setSelectedIndex(d._getSelectableIndex(d._nSelectedIndex,h,e));return true}var g={nIndex:e,nLastIndex:parseInt(d._nSelectedIndex,10)};d._paint();if(g.nIndex!=g.nLastIndex){d.fireEvent("change",g)}d._sPrevValue=f}return true},10)}},_onBlurSelect:function(a){var c=this,b=this.option("sClassPrefix");if(this._bRealFocused){this.fireEvent("blur");this._wel.removeClass(b+"focused");this._bRealFocused=false}setTimeout(function(){c._oTimer.abort()
},10)}}).extend(jindo.HTMLComponent);jindo.UIComponent=jindo.$Class({$init:function(){this._bIsActivating=false},isActivating:function(){return this._bIsActivating},activate:function(){if(this.isActivating()){return this}this._bIsActivating=true;if(arguments.length>0){this._onActivate.apply(this,arguments)}else{this._onActivate()}return this},deactivate:function(){if(!this.isActivating()){return this}this._bIsActivating=false;if(arguments.length>0){this._onDeactivate.apply(this,arguments)}else{this._onDeactivate()}return this}}).extend(jindo.Component);jindo.WatchInput=jindo.$Class({_bTimerRunning:false,_bFocused:false,_sPrevValue:"",$init:function(b,c){var a={nInterval:100,bUseTimerOnIE:false,sKeyEvent:"keyup",bPermanent:false,bActivateOnload:true};this.option(a);this.option(c||{});this._elInput=jindo.$(b);this._oTimer=new jindo.Timer();this._bIE=jindo.$Agent().navigator().ie;this._wfFocus=jindo.$Fn(this._onFocus,this);this._wfBlur=jindo.$Fn(this._onBlur,this);this._wfKeyEvent=jindo.$Fn(this._onKeyEvent,this);this._wfStartTimer=jindo.$Fn(this._startTimer,this);
this._wfStopTimer=jindo.$Fn(this._stopTimer,this);if(this.option("bActivateOnload")){this.activate(true)}},getInput:function(){return this._elInput},setInputValue:function(a){this.getInput().value=a;this.setCompareValue(a);return this},getCompareValue:function(){return this._sPrevValue},setCompareValue:function(a){this._sPrevValue=a;return this},fireChangeEvent:function(){var a=this.getInput(),b=a.value;this.setCompareValue(b);this.fireEvent("change",{elInput:a,sText:b});return this},start:function(a){return this.activate(a||false)
},stop:function(){return this.deactivate()},_onActivate:function(b){this.setCompareValue("");var a=this.getInput();this._wfFocus.attach(a,"focus");if(this._bIE&&!this.option("bUseTimerOnIE")){this.fireEvent("start");this._wfKeyEvent.attach(a,this.option("sKeyEvent"))}else{if(this._isTimerRunning()){return}this.fireEvent("start");if(this.option("bPermanent")){this._startTimer()}else{this._wfStartTimer.attach(a,"focus");this._wfStopTimer.attach(a,"blur")}}this._wfBlur.attach(a,"blur");if(b||false){this.compare()
}},_onDeactivate:function(){var a=this.getInput();this._wfFocus.detach(a,"focus");this._wfKeyEvent.detach(a,this.option("sKeyEvent"));this._stopTimer();this._wfStartTimer.detach(a,"focus");this._wfStopTimer.detach(a,"blur");this._wfBlur.detach(a,"blur");this.fireEvent("stop")},getInterval:function(){return this.option("nInterval")},setInterval:function(a){this.option("nInterval",a);return this},_isTimerRunning:function(){return this._bTimerRunning},_startTimer:function(){if(this._isTimerRunning()){return
}this._bTimerRunning=true;this.fireEvent("timerStart");this.compare();var a=this;this._oTimer.start(function(){a.compare();return true},this.getInterval())},_stopTimer:function(){if(this._isTimerRunning()){this._oTimer.abort();this._bTimerRunning=false;this.compare();this.fireEvent("timerStop")}},_onKeyEvent:function(){this.compare()},_onFocus:function(){this._bFocused=true;this.fireEvent("focus")},_onBlur:function(){this._bFocused=false;this.fireEvent("blur")},compare:function(){if(this.getInput().value!=this.getCompareValue()){this.fireChangeEvent()
}return this}}).extend(jindo.UIComponent);